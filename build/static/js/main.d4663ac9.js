/*! For license information please see main.d4663ac9.js.LICENSE.txt */
!function(){var e={847:function(e){var t="2px",n={bgMain:"#FFE4E1",bgStrong:"#ADD8E6",bgMedium:"#A0A0A0",bgLight:"#DCDCDC",bgVerylight:"#F0F0F0",highlight1:"#A52A2A",highlight2:"#FF6347"},r="0px 0px 1px 0px ".concat(n.bgMedium),i="".concat("1px"," solid ").concat(n.bgLight),a="\n  cursor: pointer;\n  color: white;\n  background: ".concat(n.highlight1,";\n  box-shadow: ").concat(r,";\n  border: ").concat(i,";\n  border-radius: ").concat(t,";\n  :active {\n    color: ").concat(n.bgVerylight,";\n    background: black;\n  }\n  :focus {\n    border-color: ").concat(n.bgStrong,";\n    outline: none;\n  }\n  :hover:not(:focus) {\n    border-color: ").concat(n.bgMedium,";\n  }\n  :disabled {\n    background-color: ").concat(n.bgLight,";\n    :hover:not(:focus) {\n      border-color: ").concat(n.bgLight,";\n    }\n    cursor: auto;\n  }\n"),o="\n  ".concat(a,"\n  background: ").concat(n.highlight2,";\n"),s={appbarHeight:"15mm",opacity:{basic:"85%"},borders:{basic:i},margins:{basic:"2px",large:"6px"},fontFamily:"Arial, Helvetica, sans-serif",basicInput:"\n    padding-left: 6px;\n    box-shadow: ".concat(r,";\n    border: ").concat(i,";\n    border-radius: ").concat(t,";\n    :focus {\n      border-color: ").concat(n.bgStrong,";\n      outline: none;\n    }\n    :hover:not(:focus) {\n      border-color: ").concat(n.bgMedium,";\n    }\n    ::placeholder {\n      /* Chrome, Firefox, Opera, Safari 10.1+ */\n      color: lightgrey;\n      opacity: 1; /* Firefox */\n    }\n    ::-ms-input-placeholder {\n      /* Microsoft Edge */\n      color: lightgrey;\n    }\n  "),basicButton:a,secondaryButton:o,mobileWidth:600,sidepanelWidthPercent:30,sidepanelMaxWidth:"300px",colors:n,shadow:r,borderRadius:t};e.exports=s},5345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(m=!1,_(e),!v)if(null!==r(l))v=!0,N(w);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=d;try{for(_(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),_(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&I(x,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,M=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function R(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?S():(k=!1,M=null)}}else k=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,S=function(){L.postMessage(null)}}else S=function(){g(R,0)};function N(e){M=e,k||(k=!0,S())}function I(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(y(E),E=-1):m=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,N(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},4545:function(e,t,n){"use strict";e.exports=n(5345)},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),s=n(1804),u=n(9145),l=n(5411),c=n(6789),f=n(4531),h=n(6569),d=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete m["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(_+":"+x)}var w=s(e.baseURL,e.url);function S(){if(b){var r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,a={data:g&&"text"!==g&&"json"!==g?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};i((function(e){t(e),y()}),(function(e){n(e),y()}),a),b=null}}if(b.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(new f("Request aborted",f.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||c;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,b)),b=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||l(w))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;k&&(m[e.xsrfHeaderName]=k)}"setRequestHeader"in b&&r.forEach(m,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete m[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),g&&"json"!==g&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){b&&(n(!e||e&&e.type?new h:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var M=d(w);M&&-1===["http","https","file"].indexOf(M)?n(new f("Unsupported protocol "+M+":",f.ERR_BAD_REQUEST,e)):b.send(v)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);var s=function e(t){var n=new a(t),s=i(a.prototype.request,n);return r.extend(s,a.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(1709));s.Axios=a,s.CanceledError=n(6569),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.toFormData=n(1397),s.AxiosError=n(4531),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8089),s.isAxiosError=n(9580),e.exports=s,e.exports.default=s},6857:function(e,t,n){"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:function(e,t,n){"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),s=n(777),u=n(1804),l=n(7835),c=l.validators;function f(e){this.defaults=e,this.interceptors={request:new a,response:new a}}f.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var f=[o,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(u),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(v){p(v);break}}try{a=o(h)}catch(v){return Promise.reject(v)}for(;u.length;)a=a.then(u.shift(),u.shift());return a},f.prototype.getUri=function(e){e=s(this.defaults,e);var t=u(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(s(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},4531:function(e,t,n){"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(e,t,n,o,s,u){var l=Object.create(a);return r.toFlatObject(e,l,(function(e){return e!==Error.prototype})),i.call(l,e.message,t,n,o,s),l.name=e.name,u&&Object.assign(l,u),l},e.exports=i},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(1709),s=n(6569);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||a,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),i=n(4341),a=n(4531),o=n(6789),s=n(1397),u={"Content-Type":"application/x-www-form-urlencoded"};function l(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return l(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,a=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||a&&"multipart/form-data"===o){var u=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,u&&new u)}return a||"application/json"===o?(l(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw a.from(s,a.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(u)})),e.exports=c},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,o){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+o);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var s,u=o?o+"."+a:a;if(n&&!o&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(u,i(e))}));e(n,u)}})),n.pop()}else t.append(o,i(a))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,i=n(4531),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new i(a(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],s=t[o];if(s){var u=e[o],l=void 0===u||s(u,o,e);if(!0!==l)throw new i("option "+o+" must be "+l,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},3589:function(e,t,n){"use strict";var r,i=n(4049),a=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function u(e){return Array.isArray(e)}function l(e){return"undefined"===typeof e}var c=s("ArrayBuffer");function f(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=s("Date"),p=s("File"),v=s("Blob"),m=s("FileList");function g(e){return"[object Function]"===a.call(e)}var y=s("URLSearchParams");function b(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),u(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var _,x=(_="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return _&&e instanceof _});e.exports={isArray:u,isArrayBuffer:c,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||a.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&c(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:f,isPlainObject:h,isUndefined:l,isDate:d,isFile:p,isBlob:v,isFunction:g,isStream:function(e){return f(e)&&g(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:b,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):u(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,a,o={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)o[a=r[i]]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(l(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:x,isFileList:m}},7494:function(e){function t(e,t,n){var r,i,a,o,s;function u(){var l=Date.now()-o;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,o=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}t.debounce=t,e.exports=t},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=c(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=h(n,g);try{l(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case l:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return x(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||x(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===v},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===g)},t.typeOf=x},8309:function(e,t,n){"use strict";e.exports=n(746)},763:function(e,t,n){var r;e=n.nmd(e),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=16,l=32,c=64,f=128,h=256,d=1/0,p=9007199254740991,v=NaN,m=4294967295,g=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",l],["partialRight",c],["rearg",h]],y="[object Arguments]",b="[object Array]",_="[object Boolean]",x="[object Date]",w="[object Error]",S="[object Function]",k="[object GeneratorFunction]",M="[object Map]",E="[object Number]",T="[object Object]",C="[object Promise]",A="[object RegExp]",R="[object Set]",P="[object String]",L="[object Symbol]",N="[object WeakMap]",I="[object ArrayBuffer]",D="[object DataView]",O="[object Float32Array]",z="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",B="[object Int32Array]",V="[object Uint8Array]",j="[object Uint8ClampedArray]",H="[object Uint16Array]",W="[object Uint32Array]",G=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,$=RegExp(Y.source),J=RegExp(Z.source),K=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ie.source),oe=/^\s+/,se=/\s/,ue=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="['\u2019]",Pe="[\\ud800-\\udfff]",Le="["+Ae+"]",Ne="["+ke+"]",Ie="\\d+",De="[\\u2700-\\u27bf]",Oe="["+Ee+"]",ze="[^\\ud800-\\udfff"+Ae+Ie+Me+Ee+Te+"]",Fe="\\ud83c[\\udffb-\\udfff]",Ue="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",je="["+Te+"]",He="(?:"+Oe+"|"+ze+")",We="(?:"+je+"|"+ze+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Ne+"|"+Fe+")"+"?",Ye="[\\ufe0e\\ufe0f]?",Ze=Ye+Xe+("(?:\\u200d(?:"+[Ue,Be,Ve].join("|")+")"+Ye+Xe+")*"),$e="(?:"+[De,Be,Ve].join("|")+")"+Ze,Je="(?:"+[Ue+Ne+"?",Ne,Be,Ve,Pe].join("|")+")",Ke=RegExp(Re,"g"),Qe=RegExp(Ne,"g"),et=RegExp(Fe+"(?="+Fe+")|"+Je+Ze,"g"),tt=RegExp([je+"?"+Oe+"+"+Ge+"(?="+[Le,je,"$"].join("|")+")",We+"+"+qe+"(?="+[Le,je+He,"$"].join("|")+")",je+"?"+He+"+"+Ge,je+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ie,$e].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+ke+Ce+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ot={};ot[O]=ot[z]=ot[F]=ot[U]=ot[B]=ot[V]=ot[j]=ot[H]=ot[W]=!0,ot[y]=ot[b]=ot[I]=ot[_]=ot[D]=ot[x]=ot[w]=ot[S]=ot[M]=ot[E]=ot[T]=ot[A]=ot[R]=ot[P]=ot[N]=!1;var st={};st[y]=st[b]=st[I]=st[D]=st[_]=st[x]=st[O]=st[z]=st[F]=st[U]=st[B]=st[M]=st[E]=st[T]=st[A]=st[R]=st[P]=st[L]=st[V]=st[j]=st[H]=st[W]=!0,st[w]=st[S]=st[N]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ft||ht||Function("return this")(),pt=t&&!t.nodeType&&t,vt=pt&&e&&!e.nodeType&&e,mt=vt&&vt.exports===pt,gt=mt&&ft.process,yt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),bt=yt&&yt.isArrayBuffer,_t=yt&&yt.isDate,xt=yt&&yt.isMap,wt=yt&&yt.isRegExp,St=yt&&yt.isSet,kt=yt&&yt.isTypedArray;function Mt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function Pt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function It(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Dt(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function Ot(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function zt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Gt("length");function Ut(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Ht,n)}function jt(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function Wt(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:v}function Gt(e){return function(t){return null==t?i:t[e]}}function qt(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n}function Yt(e,t){for(var n,r=-1,a=e.length;++r<a;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Zt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e?e.slice(0,vn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function Kt(e,t){return Nt(t,(function(t){return e[t]}))}function Qt(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+ut[e]}function sn(e){return nt.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==s||(e[n]=s,a[i++]=n)}return a}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function dn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ft(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function vn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var mn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n=(t=null==t?dt:gn.defaults(dt.Object(),t,gn.pick(dt,it))).Array,r=t.Date,se=t.Error,ke=t.Function,Me=t.Math,Ee=t.Object,Te=t.RegExp,Ce=t.String,Ae=t.TypeError,Re=n.prototype,Pe=ke.prototype,Le=Ee.prototype,Ne=t["__core-js_shared__"],Ie=Pe.toString,De=Le.hasOwnProperty,Oe=0,ze=function(){var e=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Fe=Le.toString,Ue=Ie.call(Ee),Be=dt._,Ve=Te("^"+Ie.call(De).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=mt?t.Buffer:i,He=t.Symbol,We=t.Uint8Array,Ge=je?je.allocUnsafe:i,qe=ln(Ee.getPrototypeOf,Ee),Xe=Ee.create,Ye=Le.propertyIsEnumerable,Ze=Re.splice,$e=He?He.isConcatSpreadable:i,Je=He?He.iterator:i,et=He?He.toStringTag:i,nt=function(){try{var e=ha(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ft=r&&r.now!==dt.Date.now&&r.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,pt=Me.ceil,vt=Me.floor,gt=Ee.getOwnPropertySymbols,yt=je?je.isBuffer:i,Ft=t.isFinite,qt=Re.join,yn=ln(Ee.keys,Ee),bn=Me.max,_n=Me.min,xn=r.now,wn=t.parseInt,Sn=Me.random,kn=Re.reverse,Mn=ha(t,"DataView"),En=ha(t,"Map"),Tn=ha(t,"Promise"),Cn=ha(t,"Set"),An=ha(t,"WeakMap"),Rn=ha(Ee,"create"),Pn=An&&new An,Ln={},Nn=Ua(Mn),In=Ua(En),Dn=Ua(Tn),On=Ua(Cn),zn=Ua(An),Fn=He?He.prototype:i,Un=Fn?Fn.valueOf:i,Bn=Fn?Fn.toString:i;function Vn(e){if(rs(e)&&!qo(e)&&!(e instanceof Gn)){if(e instanceof Wn)return e;if(De.call(e,"__wrapped__"))return Ba(e)}return new Wn(e)}var jn=function(){function e(){}return function(t){if(!ns(t))return{};if(Xe)return Xe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Hn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function $n(e){var t=this.__data__=new Xn(e);this.size=t.size}function Jn(e,t){var n=qo(e),r=!n&&Go(e),i=!n&&!r&&$o(e),a=!n&&!r&&!i&&fs(e),o=n||r||i||a,s=o?Zt(e.length,Ce):[],u=s.length;for(var l in e)!t&&!De.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ba(l,u))||s.push(l);return s}function Kn(e){var t=e.length;return t?e[Zr(0,t-1)]:i}function Qn(e,t){return Oa(Ri(e),ur(t,0,e.length))}function er(e){return Oa(Ri(e))}function tr(e,t,n){(n!==i&&!jo(e[t],n)||n===i&&!(t in e))&&or(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&jo(r,n)&&(n!==i||t in e)||or(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(jo(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,a){t(r,e,n(e),a)})),r}function ar(e,t){return e&&Pi(t,Ns(t),e)}function or(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,a=t.length,o=n(a),s=null==e;++r<a;)o[r]=s?i:Cs(e,t[r]);return o}function ur(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,a,o){var s,u=1&t,l=2&t,c=4&t;if(n&&(s=a?n(e,r,a,o):n(e)),s!==i)return s;if(!ns(e))return e;var f=qo(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ri(e,s)}else{var h=va(e),d=h==S||h==k;if($o(e))return ki(e,u);if(h==T||h==y||d&&!a){if(s=l||d?{}:ga(e),!u)return l?function(e,t){return Pi(e,pa(e),t)}(e,function(e,t){return e&&Pi(t,Is(t),e)}(s,e)):function(e,t){return Pi(e,da(e),t)}(e,ar(s,e))}else{if(!st[h])return a?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case I:return Mi(e);case _:case x:return new r(+e);case D:return function(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case O:case z:case F:case U:case B:case V:case j:case H:case W:return Ei(e,n);case M:return new r;case E:case P:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case R:return new r;case L:return i=e,Un?Ee(Un.call(i)):{}}var i}(e,h,u)}}o||(o=new $n);var p=o.get(e);if(p)return p;o.set(e,s),us(e)?e.forEach((function(r){s.add(lr(r,t,n,r,e,o))})):is(e)&&e.forEach((function(r,i){s.set(i,lr(r,t,n,i,e,o))}));var v=f?i:(c?l?aa:ia:l?Is:Ns)(e);return Tt(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,lr(r,t,n,i,e,o))})),s}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ee(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===i&&!(a in e)||!o(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Ae(a);return La((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,a=Pt,o=!0,s=e.length,u=[],l=t.length;if(!s)return u;n&&(t=Nt(t,Jt(n))),r?(a=Lt,o=!1):t.length>=200&&(a=Qt,o=!1,t=new Zn(t));e:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,o&&f===f){for(var h=l;h--;)if(t[h]===f)continue e;u.push(c)}else a(t,f,r)||u.push(c)}return u}Vn.templateSettings={escape:K,evaluate:Q,interpolate:ee,variable:"",imports:{_:Vn}},Vn.prototype=Hn.prototype,Vn.prototype.constructor=Vn,Wn.prototype=jn(Hn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=jn(Hn.prototype),Gn.prototype.constructor=Gn,qn.prototype.clear=function(){this.__data__=Rn?Rn(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(Rn){var n=t[e];return n===o?i:n}return De.call(t,e)?t[e]:i},qn.prototype.has=function(e){var t=this.__data__;return Rn?t[e]!==i:De.call(t,e)},qn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&t===i?o:t,this},Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ze.call(t,n,1),--this.size,!0)},Xn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Xn.prototype.has=function(e){return rr(this.__data__,e)>-1},Xn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(En||Xn),string:new qn}},Yn.prototype.delete=function(e){var t=ca(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ca(this,e).get(e)},Yn.prototype.has=function(e){return ca(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ca(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Zn.prototype.add=Zn.prototype.push=function(e){return this.__data__.set(e,o),this},Zn.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.clear=function(){this.__data__=new Xn,this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$n.prototype.get=function(e){return this.__data__.get(e)},$n.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Xn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var dr=Ii(xr),pr=Ii(wr,!0);function vr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,a=e.length;++r<a;){var o=e[r],s=t(o);if(null!=s&&(u===i?s===s&&!cs(s):n(s,u)))var u=s,l=o}return l}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ya),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):It(i,s):r||(i[i.length]=s)}return i}var br=Di(),_r=Di(!0);function xr(e,t){return e&&br(e,t,Ns)}function wr(e,t){return e&&_r(e,t,Ns)}function Sr(e,t){return Rt(t,(function(t){return Qo(e[t])}))}function kr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Fa(t[n++])];return n&&n==r?e:i}function Mr(e,t,n){var r=t(e);return qo(e)?r:It(r,n(e))}function Er(e){return null==e?e===i?"[object Undefined]":"[object Null]":et&&et in Ee(e)?function(e){var t=De.call(e,et),n=e[et];try{e[et]=i;var r=!0}catch(o){}var a=Fe.call(e);r&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Fe.call(e)}(e)}function Tr(e,t){return e>t}function Cr(e,t){return null!=e&&De.call(e,t)}function Ar(e,t){return null!=e&&t in Ee(e)}function Rr(e,t,r){for(var a=r?Lt:Pt,o=e[0].length,s=e.length,u=s,l=n(s),c=1/0,f=[];u--;){var h=e[u];u&&t&&(h=Nt(h,Jt(t))),c=_n(h.length,c),l[u]=!r&&(t||o>=120&&h.length>=120)?new Zn(u&&h):i}h=e[0];var d=-1,p=l[0];e:for(;++d<o&&f.length<c;){var v=h[d],m=t?t(v):v;if(v=r||0!==v?v:0,!(p?Qt(p,m):a(f,m,r))){for(u=s;--u;){var g=l[u];if(!(g?Qt(g,m):a(e[u],m,r)))continue e}p&&p.push(m),f.push(v)}}return f}function Pr(e,t,n){var r=null==(e=Ca(e,t=_i(t,e)))?e:e[Fa(Ja(t))];return null==r?i:Mt(r,e,n)}function Lr(e){return rs(e)&&Er(e)==y}function Nr(e,t,n,r,a){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,a,o){var s=qo(e),u=qo(t),l=s?b:va(e),c=u?b:va(t),f=(l=l==y?T:l)==T,h=(c=c==y?T:c)==T,d=l==c;if(d&&$o(e)){if(!$o(t))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new $n),s||fs(e)?na(e,t,n,r,a,o):function(e,t,n,r,i,a,o){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case I:return!(e.byteLength!=t.byteLength||!a(new We(e),new We(t)));case _:case x:case E:return jo(+e,+t);case w:return e.name==t.name&&e.message==t.message;case A:case P:return e==t+"";case M:var s=un;case R:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var c=na(s(e),s(t),r,i,a,o);return o.delete(e),c;case L:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,l,n,r,a,o);if(!(1&n)){var p=f&&De.call(e,"__wrapped__"),v=h&&De.call(t,"__wrapped__");if(p||v){var m=p?e.value():e,g=v?t.value():t;return o||(o=new $n),a(m,g,n,r,o)}}if(!d)return!1;return o||(o=new $n),function(e,t,n,r,a,o){var s=1&n,u=ia(e),l=u.length,c=ia(t).length;if(l!=c&&!s)return!1;var f=l;for(;f--;){var h=u[f];if(!(s?h in t:De.call(t,h)))return!1}var d=o.get(e),p=o.get(t);if(d&&p)return d==t&&p==e;var v=!0;o.set(e,t),o.set(t,e);var m=s;for(;++f<l;){var g=e[h=u[f]],y=t[h];if(r)var b=s?r(y,g,h,t,e,o):r(g,y,h,e,t,o);if(!(b===i?g===y||a(g,y,n,r,o):b)){v=!1;break}m||(m="constructor"==h)}if(v&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return o.delete(e),o.delete(t),v}(e,t,n,r,a,o)}(e,t,n,r,Nr,a))}function Ir(e,t,n,r){var a=n.length,o=a,s=!r;if(null==e)return!o;for(e=Ee(e);a--;){var u=n[a];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<o;){var l=(u=n[a])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var h=new $n;if(r)var d=r(c,f,l,e,t,h);if(!(d===i?Nr(f,c,3,r,h):d))return!1}}return!0}function Dr(e){return!(!ns(e)||(t=e,ze&&ze in t))&&(Qo(e)?Ve:ye).test(Ua(e));var t}function Or(e){return"function"==typeof e?e:null==e?au:"object"==typeof e?qo(e)?jr(e[0],e[1]):Vr(e):pu(e)}function zr(e){if(!ka(e))return yn(e);var t=[];for(var n in Ee(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ee(e))t.push(n);return t}(e);var t=ka(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Br(e,t){var r=-1,i=Yo(e)?n(e.length):[];return dr(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}function Vr(e){var t=fa(e);return 1==t.length&&t[0][2]?Ea(t[0][0],t[0][1]):function(n){return n===e||Ir(n,e,t)}}function jr(e,t){return xa(e)&&Ma(t)?Ea(Fa(e),t):function(n){var r=Cs(n,e);return r===i&&r===t?As(n,e):Nr(t,r,3)}}function Hr(e,t,n,r,a){e!==t&&br(t,(function(o,s){if(a||(a=new $n),ns(o))!function(e,t,n,r,a,o,s){var u=Ra(e,n),l=Ra(t,n),c=s.get(l);if(c)return void tr(e,n,c);var f=o?o(u,l,n+"",e,t,s):i,h=f===i;if(h){var d=qo(l),p=!d&&$o(l),v=!d&&!p&&fs(l);f=l,d||p||v?qo(u)?f=u:Zo(u)?f=Ri(u):p?(h=!1,f=ki(l,!0)):v?(h=!1,f=Ei(l,!0)):f=[]:os(l)||Go(l)?(f=u,Go(u)?f=bs(u):ns(u)&&!Qo(u)||(f=ga(l))):h=!1}h&&(s.set(l,f),a(f,l,r,o,s),s.delete(l));tr(e,n,f)}(e,t,s,n,Hr,r,a);else{var u=r?r(Ra(e,s),o,s+"",e,t,a):i;u===i&&(u=o),tr(e,s,u)}}),Is)}function Wr(e,t){var n=e.length;if(n)return ba(t+=t<0?n:0,n)?e[t]:i}function Gr(e,t,n){t=t.length?Nt(t,(function(e){return qo(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[au];var r=-1;t=Nt(t,Jt(la()));var i=Br(e,(function(e,n,i){var a=Nt(t,(function(t){return t(e)}));return{criteria:a,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;for(;++r<o;){var u=Ti(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function qr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=kr(e,o);n(s,o)&&ei(a,_i(o,e),s)}return a}function Xr(e,t,n,r){var i=r?jt:Vt,a=-1,o=t.length,s=e;for(e===t&&(t=Ri(t)),n&&(s=Nt(e,Jt(n)));++a<o;)for(var u=0,l=t[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ze.call(s,u,1),Ze.call(e,u,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ba(i)?Ze.call(e,i,1):hi(e,i)}}return e}function Zr(e,t){return e+vt(Sn()*(t-e+1))}function $r(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Na(Ta(e,t,au),e+"")}function Kr(e){return Kn(js(e))}function Qr(e,t){var n=js(e);return Oa(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var a=-1,o=(t=_i(t,e)).length,s=o-1,u=e;null!=u&&++a<o;){var l=Fa(t[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(a!=s){var f=u[l];(c=r?r(f,l,u):i)===i&&(c=ns(f)?f:ba(t[a+1])?[]:{})}nr(u,l,c),u=u[l]}return e}var ti=Pn?function(e,t){return Pn.set(e,t),e}:au,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:au;function ri(e){return Oa(js(e))}function ii(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=n(a);++i<a;)o[i]=e[i+t];return o}function ai(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function oi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!cs(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return si(e,t,au,n)}function si(e,t,n,r){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=n(t))!==t,u=null===t,l=cs(t),c=t===i;a<o;){var f=vt((a+o)/2),h=n(e[f]),d=h!==i,p=null===h,v=h===h,m=cs(h);if(s)var g=r||v;else g=c?v&&(r||d):u?v&&d&&(r||!p):l?v&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);g?a=f+1:o=f}return _n(o,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!jo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function li(e){return"number"==typeof e?e:cs(e)?v:+e}function ci(e){if("string"==typeof e)return e;if(qo(e))return Nt(e,ci)+"";if(cs(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Pt,a=e.length,o=!0,s=[],u=s;if(n)o=!1,i=Lt;else if(a>=200){var l=t?null:$i(e);if(l)return fn(l);o=!1,i=Qt,u=new Zn}else u=t?[]:s;e:for(;++r<a;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}function hi(e,t){return null==(e=Ca(e,t=_i(t,e)))||delete e[Fa(Ja(t))]}function di(e,t,n,r){return ei(e,t,n(kr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,It([e],t.args))}),n)}function mi(e,t,r){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=e[a],u=-1;++u<i;)u!=a&&(o[a]=hr(o[a]||s,e[u],t,r));return fi(yr(o,1),t,r)}function gi(e,t,n){for(var r=-1,a=e.length,o=t.length,s={};++r<a;){var u=r<o?t[r]:i;n(s,e[r],u)}return s}function yi(e){return Zo(e)?e:[]}function bi(e){return"function"==typeof e?e:au}function _i(e,t){return qo(e)?e:xa(e,t)?[e]:za(_s(e))}var xi=Jr;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=ut||function(e){return dt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=Ge?Ge(n):new e.constructor(n);return e.copy(r),r}function Mi(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Ei(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==i,r=null===e,a=e===e,o=cs(e),s=t!==i,u=null===t,l=t===t,c=cs(t);if(!u&&!c&&!o&&e>t||o&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!a)return 1;if(!r&&!o&&!c&&e<t||c&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}function Ci(e,t,r,i){for(var a=-1,o=e.length,s=r.length,u=-1,l=t.length,c=bn(o-s,0),f=n(l+c),h=!i;++u<l;)f[u]=t[u];for(;++a<s;)(h||a<o)&&(f[r[a]]=e[a]);for(;c--;)f[u++]=e[a++];return f}function Ai(e,t,r,i){for(var a=-1,o=e.length,s=-1,u=r.length,l=-1,c=t.length,f=bn(o-u,0),h=n(f+c),d=!i;++a<f;)h[a]=e[a];for(var p=a;++l<c;)h[p+l]=t[l];for(;++s<u;)(d||a<o)&&(h[p+r[s]]=e[a++]);return h}function Ri(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Pi(e,t,n,r){var a=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var u=t[o],l=r?r(n[u],e[u],u,n,e):i;l===i&&(l=e[u]),a?or(n,u,l):nr(n,u,l)}return n}function Li(e,t){return function(n,r){var i=qo(n)?Et:ir,a=t?t():{};return i(n,e,la(r,2),a)}}function Ni(e){return Jr((function(t,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(a--,o):i,s&&_a(n[0],n[1],s)&&(o=a<3?i:o,a=1),t=Ee(t);++r<a;){var u=n[r];u&&e(t,u,r,o)}return t}))}function Ii(e,t){return function(n,r){if(null==n)return n;if(!Yo(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Ee(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,a=Ee(t),o=r(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===n(a[u],u,a))break}return t}}function Oi(e){return function(t){var n=sn(t=_s(t))?pn(t):i,r=n?n[0]:t.charAt(0),a=n?wi(n,1).join(""):t.slice(1);return r[e]()+a}}function zi(e){return function(t){return Dt(Qs(Gs(t).replace(Ke,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Ui(e){return function(t,n,r){var a=Ee(t);if(!Yo(t)){var o=la(n,3);t=Ns(t),n=function(e){return o(a[e],e,a)}}var s=e(t,n,r);return s>-1?a[o?t[s]:s]:i}}function Bi(e){return ra((function(t){var n=t.length,r=n,o=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Ae(a);if(o&&!u&&"wrapper"==sa(s))var u=new Wn([],!0)}for(r=u?r:n;++r<n;){var l=sa(s=t[r]),c="wrapper"==l?oa(s):i;u=c&&wa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[sa(c[0])].apply(u,c[3]):1==s.length&&wa(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&qo(r))return u.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}}))}function Vi(e,t,r,a,o,s,u,l,c,h){var d=t&f,p=1&t,v=2&t,m=24&t,g=512&t,y=v?i:Fi(e);return function i(){for(var f=arguments.length,b=n(f),_=f;_--;)b[_]=arguments[_];if(m)var x=ua(i),w=nn(b,x);if(a&&(b=Ci(b,a,o,m)),s&&(b=Ai(b,s,u,m)),f-=w,m&&f<h){var S=cn(b,x);return Yi(e,t,Vi,i.placeholder,r,b,S,l,c,h-f)}var k=p?r:this,M=v?k[e]:e;return f=b.length,l?b=Aa(b,l):g&&f>1&&b.reverse(),d&&c<f&&(b.length=c),this&&this!==dt&&this instanceof i&&(M=y||Fi(M)),M.apply(k,b)}}function ji(e,t){return function(n,r){return function(e,t,n,r){return xr(e,(function(e,i,a){t(r,n(e),i,a)})),r}(n,e,t(r),{})}}function Hi(e,t){return function(n,r){var a;if(n===i&&r===i)return t;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),a=e(n,r)}return a}}function Wi(e){return ra((function(t){return t=Nt(t,Jt(la())),Jr((function(n){var r=this;return e(t,(function(e){return Mt(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?$r(t,e):t;var r=$r(t,pt(e/dn(t)));return sn(t)?wi(pn(r),0,e).join(""):r.slice(0,e)}function qi(e){return function(t,r,a){return a&&"number"!=typeof a&&_a(t,r,a)&&(r=a=i),t=vs(t),r===i?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var a=-1,o=bn(pt((t-e)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=e,e+=r;return s}(t,r,a=a===i?t<r?1:-1:vs(a),e)}}function Xi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Yi(e,t,n,r,a,o,s,u,f,h){var d=8&t;t|=d?l:c,4&(t&=~(d?c:l))||(t&=-4);var p=[e,t,a,d?o:i,d?s:i,d?i:o,d?i:s,u,f,h],v=n.apply(i,p);return wa(e)&&Pa(v,p),v.placeholder=r,Ia(v,e,t)}function Zi(e){var t=Me[e];return function(e,n){if(e=ys(e),(n=null==n?0:_n(ms(n),292))&&Ft(e)){var r=(_s(e)+"e").split("e");return+((r=(_s(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var $i=Cn&&1/fn(new Cn([,-0]))[1]==d?function(e){return new Cn(e)}:cu;function Ji(e){return function(t){var n=va(t);return n==M?un(t):n==R?hn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ki(e,t,r,o,d,p,v,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Ae(a);var y=o?o.length:0;if(y||(t&=-97,o=d=i),v=v===i?v:bn(ms(v),0),m=m===i?m:ms(m),y-=d?d.length:0,t&c){var b=o,_=d;o=d=i}var x=g?i:oa(e),w=[e,t,r,o,d,b,_,p,v,m];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,o=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var l=e[3];e[3]=l?Ci(l,u,t[4]):u,e[4]=l?cn(e[3],s):t[4]}(u=t[5])&&(l=e[5],e[5]=l?Ai(l,u,t[6]):u,e[6]=l?cn(e[5],s):t[6]);(u=t[7])&&(e[7]=u);r&f&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],r=w[2],o=w[3],d=w[4],!(m=w[9]=w[9]===i?g?0:e.length:bn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==u?function(e,t,r){var a=Fi(e);return function o(){for(var s=arguments.length,u=n(s),l=s,c=ua(o);l--;)u[l]=arguments[l];var f=s<3&&u[0]!==c&&u[s-1]!==c?[]:cn(u,c);return(s-=f.length)<r?Yi(e,t,Vi,o.placeholder,i,u,f,i,i,r-s):Mt(this&&this!==dt&&this instanceof o?a:e,this,u)}}(e,t,m):t!=l&&33!=t||d.length?Vi.apply(i,w):function(e,t,r,i){var a=1&t,o=Fi(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,f=n(c+u),h=this&&this!==dt&&this instanceof t?o:e;++l<c;)f[l]=i[l];for(;u--;)f[l++]=arguments[++s];return Mt(h,a?r:this,f)}}(e,t,r,o);else var S=function(e,t,n){var r=1&t,i=Fi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Ia((x?ti:Pa)(S,w),e,t)}function Qi(e,t,n,r){return e===i||jo(e,Le[n])&&!De.call(r,n)?t:e}function ea(e,t,n,r,a,o){return ns(e)&&ns(t)&&(o.set(t,e),Hr(e,t,i,ea,o),o.delete(t)),e}function ta(e){return os(e)?i:e}function na(e,t,n,r,a,o){var s=1&n,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=o.get(e),f=o.get(t);if(c&&f)return c==t&&f==e;var h=-1,d=!0,p=2&n?new Zn:i;for(o.set(e,t),o.set(t,e);++h<u;){var v=e[h],m=t[h];if(r)var g=s?r(m,v,h,t,e,o):r(v,m,h,e,t,o);if(g!==i){if(g)continue;d=!1;break}if(p){if(!zt(t,(function(e,t){if(!Qt(p,t)&&(v===e||a(v,e,n,r,o)))return p.push(t)}))){d=!1;break}}else if(v!==m&&!a(v,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function ra(e){return Na(Ta(e,i,qa),e+"")}function ia(e){return Mr(e,Ns,da)}function aa(e){return Mr(e,Is,pa)}var oa=Pn?function(e){return Pn.get(e)}:cu;function sa(e){for(var t=e.name+"",n=Ln[t],r=De.call(Ln,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ua(e){return(De.call(Vn,"placeholder")?Vn:e).placeholder}function la(){var e=Vn.iteratee||ou;return e=e===ou?Or:e,arguments.length?e(arguments[0],arguments[1]):e}function ca(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fa(e){for(var t=Ns(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ma(i)]}return t}function ha(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Dr(n)?n:i}var da=gt?function(e){return null==e?[]:(e=Ee(e),Rt(gt(e),(function(t){return Ye.call(e,t)})))}:gu,pa=gt?function(e){for(var t=[];e;)It(t,da(e)),e=qe(e);return t}:gu,va=Er;function ma(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,a=!1;++r<i;){var o=Fa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&ts(i)&&ba(o,i)&&(qo(e)||Go(e))}function ga(e){return"function"!=typeof e.constructor||ka(e)?{}:jn(qe(e))}function ya(e){return qo(e)||Go(e)||!!($e&&e&&e[$e])}function ba(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&_e.test(e))&&e>-1&&e%1==0&&e<t}function _a(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Yo(n)&&ba(t,n.length):"string"==r&&t in n)&&jo(n[t],e)}function xa(e,t){if(qo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!cs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ee(t))}function wa(e){var t=sa(e),n=Vn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=oa(n);return!!r&&e===r[0]}(Mn&&va(new Mn(new ArrayBuffer(1)))!=D||En&&va(new En)!=M||Tn&&va(Tn.resolve())!=C||Cn&&va(new Cn)!=R||An&&va(new An)!=N)&&(va=function(e){var t=Er(e),n=t==T?e.constructor:i,r=n?Ua(n):"";if(r)switch(r){case Nn:return D;case In:return M;case Dn:return C;case On:return R;case zn:return N}return t});var Sa=Ne?Qo:yu;function ka(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ma(e){return e===e&&!ns(e)}function Ea(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ee(n)))}}function Ta(e,t,r){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,a=-1,o=bn(i.length-t,0),s=n(o);++a<o;)s[a]=i[t+a];a=-1;for(var u=n(t+1);++a<t;)u[a]=i[a];return u[t]=r(s),Mt(e,this,u)}}function Ca(e,t){return t.length<2?e:kr(e,ii(t,0,-1))}function Aa(e,t){for(var n=e.length,r=_n(t.length,n),a=Ri(e);r--;){var o=t[r];e[r]=ba(o,n)?a[o]:i}return e}function Ra(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Pa=Da(ti),La=ht||function(e,t){return dt.setTimeout(e,t)},Na=Da(ni);function Ia(e,t,n){var r=t+"";return Na(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ue,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(g,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(r),n)))}function Da(e){var t=0,n=0;return function(){var r=xn(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Oa(e,t){var n=-1,r=e.length,a=r-1;for(t=t===i?r:t;++n<t;){var o=Zr(n,a),s=e[o];e[o]=e[n],e[n]=s}return e.length=t,e}var za=function(e){var t=Oo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(de,"$1"):n||e)})),t}));function Fa(e){if("string"==typeof e||cs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ua(e){if(null!=e){try{return Ie.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ba(e){if(e instanceof Gn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ri(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Va=Jr((function(e,t){return Zo(e)?hr(e,yr(t,1,Zo,!0)):[]})),ja=Jr((function(e,t){var n=Ja(t);return Zo(n)&&(n=i),Zo(e)?hr(e,yr(t,1,Zo,!0),la(n,2)):[]})),Ha=Jr((function(e,t){var n=Ja(t);return Zo(n)&&(n=i),Zo(e)?hr(e,yr(t,1,Zo,!0),i,n):[]}));function Wa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Bt(e,la(t,3),i)}function Ga(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r-1;return n!==i&&(a=ms(n),a=n<0?bn(r+a,0):_n(a,r-1)),Bt(e,la(t,3),a,!0)}function qa(e){return(null==e?0:e.length)?yr(e,1):[]}function Xa(e){return e&&e.length?e[0]:i}var Ya=Jr((function(e){var t=Nt(e,yi);return t.length&&t[0]===e[0]?Rr(t):[]})),Za=Jr((function(e){var t=Ja(e),n=Nt(e,yi);return t===Ja(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Rr(n,la(t,2)):[]})),$a=Jr((function(e){var t=Ja(e),n=Nt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Rr(n,i,t):[]}));function Ja(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ka=Jr(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Xr(e,t):e}var eo=ra((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,Nt(t,(function(e){return ba(e,n)?+e:e})).sort(Ti)),r}));function to(e){return null==e?e:kn.call(e)}var no=Jr((function(e){return fi(yr(e,1,Zo,!0))})),ro=Jr((function(e){var t=Ja(e);return Zo(t)&&(t=i),fi(yr(e,1,Zo,!0),la(t,2))})),io=Jr((function(e){var t=Ja(e);return t="function"==typeof t?t:i,fi(yr(e,1,Zo,!0),i,t)}));function ao(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if(Zo(e))return t=bn(e.length,t),!0})),Zt(t,(function(t){return Nt(e,Gt(t))}))}function oo(e,t){if(!e||!e.length)return[];var n=ao(e);return null==t?n:Nt(n,(function(e){return Mt(t,i,e)}))}var so=Jr((function(e,t){return Zo(e)?hr(e,t):[]})),uo=Jr((function(e){return mi(Rt(e,Zo))})),lo=Jr((function(e){var t=Ja(e);return Zo(t)&&(t=i),mi(Rt(e,Zo),la(t,2))})),co=Jr((function(e){var t=Ja(e);return t="function"==typeof t?t:i,mi(Rt(e,Zo),i,t)})),fo=Jr(ao);var ho=Jr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,oo(e,n)}));function po(e){var t=Vn(e);return t.__chain__=!0,t}function vo(e,t){return t(e)}var mo=ra((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&ba(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:vo,args:[a],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(a)}));var go=Li((function(e,t,n){De.call(e,n)?++e[n]:or(e,n,1)}));var yo=Ui(Wa),bo=Ui(Ga);function _o(e,t){return(qo(e)?Tt:dr)(e,la(t,3))}function xo(e,t){return(qo(e)?Ct:pr)(e,la(t,3))}var wo=Li((function(e,t,n){De.call(e,n)?e[n].push(t):or(e,n,[t])}));var So=Jr((function(e,t,r){var i=-1,a="function"==typeof t,o=Yo(e)?n(e.length):[];return dr(e,(function(e){o[++i]=a?Mt(t,e,r):Pr(e,t,r)})),o})),ko=Li((function(e,t,n){or(e,n,t)}));function Mo(e,t){return(qo(e)?Nt:Br)(e,la(t,3))}var Eo=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_a(e,t[0],t[1])?t=[]:n>2&&_a(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,yr(t,1),[])})),Co=ft||function(){return dt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ki(e,f,i,i,i,i,t)}function Ro(e,t){var n;if("function"!=typeof t)throw new Ae(a);return e=ms(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Po=Jr((function(e,t,n){var r=1;if(n.length){var i=cn(n,ua(Po));r|=l}return Ki(e,r,t,n,i)})),Lo=Jr((function(e,t,n){var r=3;if(n.length){var i=cn(n,ua(Lo));r|=l}return Ki(t,r,e,n,i)}));function No(e,t,n){var r,o,s,u,l,c,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ae(a);function v(t){var n=r,a=o;return r=o=i,f=t,u=e.apply(a,n)}function m(e){return f=e,l=La(y,t),h?v(e):u}function g(e){var n=e-c;return c===i||n>=t||n<0||d&&e-f>=s}function y(){var e=Co();if(g(e))return b(e);l=La(y,function(e){var n=t-(e-c);return d?_n(n,s-(e-f)):n}(e))}function b(e){return l=i,p&&r?v(e):(r=o=i,u)}function _(){var e=Co(),n=g(e);if(r=arguments,o=this,c=e,n){if(l===i)return m(c);if(d)return Si(l),l=La(y,t),v(c)}return l===i&&(l=La(y,t)),u}return t=ys(t)||0,ns(n)&&(h=!!n.leading,s=(d="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=function(){l!==i&&Si(l),f=0,r=c=o=l=i},_.flush=function(){return l===i?u:b(Co())},_}var Io=Jr((function(e,t){return fr(e,1,t)})),Do=Jr((function(e,t,n){return fr(e,ys(t)||0,n)}));function Oo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Oo.Cache||Yn),n}function zo(e){if("function"!=typeof e)throw new Ae(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Oo.Cache=Yn;var Fo=xi((function(e,t){var n=(t=1==t.length&&qo(t[0])?Nt(t[0],Jt(la())):Nt(yr(t,1),Jt(la()))).length;return Jr((function(r){for(var i=-1,a=_n(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return Mt(e,this,r)}))})),Uo=Jr((function(e,t){var n=cn(t,ua(Uo));return Ki(e,l,i,t,n)})),Bo=Jr((function(e,t){var n=cn(t,ua(Bo));return Ki(e,c,i,t,n)})),Vo=ra((function(e,t){return Ki(e,h,i,i,i,t)}));function jo(e,t){return e===t||e!==e&&t!==t}var Ho=Xi(Tr),Wo=Xi((function(e,t){return e>=t})),Go=Lr(function(){return arguments}())?Lr:function(e){return rs(e)&&De.call(e,"callee")&&!Ye.call(e,"callee")},qo=n.isArray,Xo=bt?Jt(bt):function(e){return rs(e)&&Er(e)==I};function Yo(e){return null!=e&&ts(e.length)&&!Qo(e)}function Zo(e){return rs(e)&&Yo(e)}var $o=yt||yu,Jo=_t?Jt(_t):function(e){return rs(e)&&Er(e)==x};function Ko(e){if(!rs(e))return!1;var t=Er(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Qo(e){if(!ns(e))return!1;var t=Er(e);return t==S||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==ms(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=xt?Jt(xt):function(e){return rs(e)&&va(e)==M};function as(e){return"number"==typeof e||rs(e)&&Er(e)==E}function os(e){if(!rs(e)||Er(e)!=T)return!1;var t=qe(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ie.call(n)==Ue}var ss=wt?Jt(wt):function(e){return rs(e)&&Er(e)==A};var us=St?Jt(St):function(e){return rs(e)&&va(e)==R};function ls(e){return"string"==typeof e||!qo(e)&&rs(e)&&Er(e)==P}function cs(e){return"symbol"==typeof e||rs(e)&&Er(e)==L}var fs=kt?Jt(kt):function(e){return rs(e)&&ts(e.length)&&!!ot[Er(e)]};var hs=Xi(Ur),ds=Xi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Yo(e))return ls(e)?pn(e):Ri(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=va(e);return(t==M?un:t==R?fn:js)(e)}function vs(e){return e?(e=ys(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function ms(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function gs(e){return e?ur(ms(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(cs(e))return v;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ge.test(e);return n||be.test(e)?ct(e.slice(2),n?2:8):me.test(e)?v:+e}function bs(e){return Pi(e,Is(e))}function _s(e){return null==e?"":ci(e)}var xs=Ni((function(e,t){if(ka(t)||Yo(t))Pi(t,Ns(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),ws=Ni((function(e,t){Pi(t,Is(t),e)})),Ss=Ni((function(e,t,n,r){Pi(t,Is(t),e,r)})),ks=Ni((function(e,t,n,r){Pi(t,Ns(t),e,r)})),Ms=ra(sr);var Es=Jr((function(e,t){e=Ee(e);var n=-1,r=t.length,a=r>2?t[2]:i;for(a&&_a(t[0],t[1],a)&&(r=1);++n<r;)for(var o=t[n],s=Is(o),u=-1,l=s.length;++u<l;){var c=s[u],f=e[c];(f===i||jo(f,Le[c])&&!De.call(e,c))&&(e[c]=o[c])}return e})),Ts=Jr((function(e){return e.push(i,ea),Mt(Os,i,e)}));function Cs(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function As(e,t){return null!=e&&ma(e,t,Ar)}var Rs=ji((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),nu(au)),Ps=ji((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),la),Ls=Jr(Pr);function Ns(e){return Yo(e)?Jn(e):zr(e)}function Is(e){return Yo(e)?Jn(e,!0):Fr(e)}var Ds=Ni((function(e,t,n){Hr(e,t,n)})),Os=Ni((function(e,t,n,r){Hr(e,t,n,r)})),zs=ra((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Pi(e,aa(e),n),r&&(n=lr(n,7,ta));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Fs=ra((function(e,t){return null==e?{}:function(e,t){return qr(e,t,(function(t,n){return As(e,n)}))}(e,t)}));function Us(e,t){if(null==e)return{};var n=Nt(aa(e),(function(e){return[e]}));return t=la(t),qr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=Ji(Ns),Vs=Ji(Is);function js(e){return null==e?[]:Kt(e,Ns(e))}var Hs=zi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return Ks(_s(e).toLowerCase())}function Gs(e){return(e=_s(e))&&e.replace(xe,rn).replace(Qe,"")}var qs=zi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Xs=zi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Oi("toLowerCase");var Zs=zi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var $s=zi((function(e,t,n){return e+(n?" ":"")+Ks(t)}));var Js=zi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ks=Oi("toUpperCase");function Qs(e,t,n){return e=_s(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Jr((function(e,t){try{return Mt(e,i,t)}catch(n){return Ko(n)?n:new se(n)}})),tu=ra((function(e,t){return Tt(t,(function(t){t=Fa(t),or(e,t,Po(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Bi(),iu=Bi(!0);function au(e){return e}function ou(e){return Or("function"==typeof e?e:lr(e,1))}var su=Jr((function(e,t){return function(n){return Pr(n,e,t)}})),uu=Jr((function(e,t){return function(n){return Pr(e,n,t)}}));function lu(e,t,n){var r=Ns(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Ns(t)));var a=!(ns(n)&&"chain"in n)||!!n.chain,o=Qo(e);return Tt(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__),i=n.__actions__=Ri(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,It([this.value()],arguments))})})),e}function cu(){}var fu=Wi(Nt),hu=Wi(At),du=Wi(zt);function pu(e){return xa(e)?Gt(Fa(e)):function(e){return function(t){return kr(t,e)}}(e)}var vu=qi(),mu=qi(!0);function gu(){return[]}function yu(){return!1}var bu=Hi((function(e,t){return e+t}),0),_u=Zi("ceil"),xu=Hi((function(e,t){return e/t}),1),wu=Zi("floor");var Su=Hi((function(e,t){return e*t}),1),ku=Zi("round"),Mu=Hi((function(e,t){return e-t}),0);return Vn.after=function(e,t){if("function"!=typeof t)throw new Ae(a);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},Vn.ary=Ao,Vn.assign=xs,Vn.assignIn=ws,Vn.assignInWith=Ss,Vn.assignWith=ks,Vn.at=Ms,Vn.before=Ro,Vn.bind=Po,Vn.bindAll=tu,Vn.bindKey=Lo,Vn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},Vn.chain=po,Vn.chunk=function(e,t,r){t=(r?_a(e,t,r):t===i)?1:bn(ms(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var o=0,s=0,u=n(pt(a/t));o<a;)u[s++]=ii(e,o,o+=t);return u},Vn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},Vn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return It(qo(r)?Ri(r):[r],yr(t,1))},Vn.cond=function(e){var t=null==e?0:e.length,n=la();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Ae(a);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Mt(i[0],this,n))return Mt(i[1],this,n)}}))},Vn.conforms=function(e){return function(e){var t=Ns(e);return function(n){return cr(n,e,t)}}(lr(e,1))},Vn.constant=nu,Vn.countBy=go,Vn.create=function(e,t){var n=jn(e);return null==t?n:ar(n,t)},Vn.curry=function e(t,n,r){var a=Ki(t,8,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Vn.curryRight=function e(t,n,r){var a=Ki(t,u,i,i,i,i,i,n=r?i:n);return a.placeholder=e.placeholder,a},Vn.debounce=No,Vn.defaults=Es,Vn.defaultsDeep=Ts,Vn.defer=Io,Vn.delay=Do,Vn.difference=Va,Vn.differenceBy=ja,Vn.differenceWith=Ha,Vn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ms(t))<0?0:t,r):[]},Vn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ms(t)))<0?0:t):[]},Vn.dropRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0,!0):[]},Vn.dropWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!0):[]},Vn.fill=function(e,t,n,r){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_a(e,t,n)&&(n=0,r=a),function(e,t,n,r){var a=e.length;for((n=ms(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:ms(r))<0&&(r+=a),r=n>r?0:gs(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Vn.filter=function(e,t){return(qo(e)?Rt:gr)(e,la(t,3))},Vn.flatMap=function(e,t){return yr(Mo(e,t),1)},Vn.flatMapDeep=function(e,t){return yr(Mo(e,t),d)},Vn.flatMapDepth=function(e,t,n){return n=n===i?1:ms(n),yr(Mo(e,t),n)},Vn.flatten=qa,Vn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,d):[]},Vn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:ms(t)):[]},Vn.flip=function(e){return Ki(e,512)},Vn.flow=ru,Vn.flowRight=iu,Vn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Vn.functions=function(e){return null==e?[]:Sr(e,Ns(e))},Vn.functionsIn=function(e){return null==e?[]:Sr(e,Is(e))},Vn.groupBy=wo,Vn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Vn.intersection=Ya,Vn.intersectionBy=Za,Vn.intersectionWith=$a,Vn.invert=Rs,Vn.invertBy=Ps,Vn.invokeMap=So,Vn.iteratee=ou,Vn.keyBy=ko,Vn.keys=Ns,Vn.keysIn=Is,Vn.map=Mo,Vn.mapKeys=function(e,t){var n={};return t=la(t,3),xr(e,(function(e,r,i){or(n,t(e,r,i),e)})),n},Vn.mapValues=function(e,t){var n={};return t=la(t,3),xr(e,(function(e,r,i){or(n,r,t(e,r,i))})),n},Vn.matches=function(e){return Vr(lr(e,1))},Vn.matchesProperty=function(e,t){return jr(e,lr(t,1))},Vn.memoize=Oo,Vn.merge=Ds,Vn.mergeWith=Os,Vn.method=su,Vn.methodOf=uu,Vn.mixin=lu,Vn.negate=zo,Vn.nthArg=function(e){return e=ms(e),Jr((function(t){return Wr(t,e)}))},Vn.omit=zs,Vn.omitBy=function(e,t){return Us(e,zo(la(t)))},Vn.once=function(e){return Ro(2,e)},Vn.orderBy=function(e,t,n,r){return null==e?[]:(qo(t)||(t=null==t?[]:[t]),qo(n=r?i:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Vn.over=fu,Vn.overArgs=Fo,Vn.overEvery=hu,Vn.overSome=du,Vn.partial=Uo,Vn.partialRight=Bo,Vn.partition=Eo,Vn.pick=Fs,Vn.pickBy=Us,Vn.property=pu,Vn.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},Vn.pull=Ka,Vn.pullAll=Qa,Vn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,la(n,2)):e},Vn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Xr(e,t,i,n):e},Vn.pullAt=eo,Vn.range=vu,Vn.rangeRight=mu,Vn.rearg=Vo,Vn.reject=function(e,t){return(qo(e)?Rt:gr)(e,zo(la(t,3)))},Vn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=la(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Yr(e,i),n},Vn.rest=function(e,t){if("function"!=typeof e)throw new Ae(a);return Jr(e,t=t===i?t:ms(t))},Vn.reverse=to,Vn.sampleSize=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ms(t),(qo(e)?Qn:Qr)(e,t)},Vn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Vn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Vn.shuffle=function(e){return(qo(e)?er:ri)(e)},Vn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_a(e,t,n)?(t=0,n=r):(t=null==t?0:ms(t),n=n===i?r:ms(n)),ii(e,t,n)):[]},Vn.sortBy=To,Vn.sortedUniq=function(e){return e&&e.length?ui(e):[]},Vn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,la(t,2)):[]},Vn.split=function(e,t,n){return n&&"number"!=typeof n&&_a(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=_s(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=ci(t))&&sn(e)?wi(pn(e),0,n):e.split(t,n):[]},Vn.spread=function(e,t){if("function"!=typeof e)throw new Ae(a);return t=null==t?0:bn(ms(t),0),Jr((function(n){var r=n[t],i=wi(n,0,t);return r&&It(i,r),Mt(e,this,i)}))},Vn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Vn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ms(t))<0?0:t):[]},Vn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ms(t)))<0?0:t,r):[]},Vn.takeRightWhile=function(e,t){return e&&e.length?pi(e,la(t,3),!1,!0):[]},Vn.takeWhile=function(e,t){return e&&e.length?pi(e,la(t,3)):[]},Vn.tap=function(e,t){return t(e),e},Vn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ae(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),No(e,t,{leading:r,maxWait:t,trailing:i})},Vn.thru=vo,Vn.toArray=ps,Vn.toPairs=Bs,Vn.toPairsIn=Vs,Vn.toPath=function(e){return qo(e)?Nt(e,Fa):cs(e)?[e]:Ri(za(_s(e)))},Vn.toPlainObject=bs,Vn.transform=function(e,t,n){var r=qo(e),i=r||$o(e)||fs(e);if(t=la(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:ns(e)&&Qo(a)?jn(qe(e)):{}}return(i?Tt:xr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Vn.unary=function(e){return Ao(e,1)},Vn.union=no,Vn.unionBy=ro,Vn.unionWith=io,Vn.uniq=function(e){return e&&e.length?fi(e):[]},Vn.uniqBy=function(e,t){return e&&e.length?fi(e,la(t,2)):[]},Vn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},Vn.unset=function(e,t){return null==e||hi(e,t)},Vn.unzip=ao,Vn.unzipWith=oo,Vn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},Vn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,bi(n),r)},Vn.values=js,Vn.valuesIn=function(e){return null==e?[]:Kt(e,Is(e))},Vn.without=so,Vn.words=Qs,Vn.wrap=function(e,t){return Uo(bi(t),e)},Vn.xor=uo,Vn.xorBy=lo,Vn.xorWith=co,Vn.zip=fo,Vn.zipObject=function(e,t){return gi(e||[],t||[],nr)},Vn.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},Vn.zipWith=ho,Vn.entries=Bs,Vn.entriesIn=Vs,Vn.extend=ws,Vn.extendWith=Ss,lu(Vn,Vn),Vn.add=bu,Vn.attempt=eu,Vn.camelCase=Hs,Vn.capitalize=Ws,Vn.ceil=_u,Vn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ys(n))===n?n:0),t!==i&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},Vn.clone=function(e){return lr(e,4)},Vn.cloneDeep=function(e){return lr(e,5)},Vn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},Vn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},Vn.conformsTo=function(e,t){return null==t||cr(e,t,Ns(t))},Vn.deburr=Gs,Vn.defaultTo=function(e,t){return null==e||e!==e?t:e},Vn.divide=xu,Vn.endsWith=function(e,t,n){e=_s(e),t=ci(t);var r=e.length,a=n=n===i?r:ur(ms(n),0,r);return(n-=t.length)>=0&&e.slice(n,a)==t},Vn.eq=jo,Vn.escape=function(e){return(e=_s(e))&&J.test(e)?e.replace(Z,an):e},Vn.escapeRegExp=function(e){return(e=_s(e))&&ae.test(e)?e.replace(ie,"\\$&"):e},Vn.every=function(e,t,n){var r=qo(e)?At:vr;return n&&_a(e,t,n)&&(t=i),r(e,la(t,3))},Vn.find=yo,Vn.findIndex=Wa,Vn.findKey=function(e,t){return Ut(e,la(t,3),xr)},Vn.findLast=bo,Vn.findLastIndex=Ga,Vn.findLastKey=function(e,t){return Ut(e,la(t,3),wr)},Vn.floor=wu,Vn.forEach=_o,Vn.forEachRight=xo,Vn.forIn=function(e,t){return null==e?e:br(e,la(t,3),Is)},Vn.forInRight=function(e,t){return null==e?e:_r(e,la(t,3),Is)},Vn.forOwn=function(e,t){return e&&xr(e,la(t,3))},Vn.forOwnRight=function(e,t){return e&&wr(e,la(t,3))},Vn.get=Cs,Vn.gt=Ho,Vn.gte=Wo,Vn.has=function(e,t){return null!=e&&ma(e,t,Cr)},Vn.hasIn=As,Vn.head=Xa,Vn.identity=au,Vn.includes=function(e,t,n,r){e=Yo(e)?e:js(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},Vn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=bn(r+i,0)),Vt(e,t,i)},Vn.inRange=function(e,t,n){return t=vs(t),n===i?(n=t,t=0):n=vs(n),function(e,t,n){return e>=_n(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},Vn.invoke=Ls,Vn.isArguments=Go,Vn.isArray=qo,Vn.isArrayBuffer=Xo,Vn.isArrayLike=Yo,Vn.isArrayLikeObject=Zo,Vn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Er(e)==_},Vn.isBuffer=$o,Vn.isDate=Jo,Vn.isElement=function(e){return rs(e)&&1===e.nodeType&&!os(e)},Vn.isEmpty=function(e){if(null==e)return!0;if(Yo(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||$o(e)||fs(e)||Go(e)))return!e.length;var t=va(e);if(t==M||t==R)return!e.size;if(ka(e))return!zr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Vn.isEqual=function(e,t){return Nr(e,t)},Vn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Nr(e,t,i,n):!!r},Vn.isError=Ko,Vn.isFinite=function(e){return"number"==typeof e&&Ft(e)},Vn.isFunction=Qo,Vn.isInteger=es,Vn.isLength=ts,Vn.isMap=is,Vn.isMatch=function(e,t){return e===t||Ir(e,t,fa(t))},Vn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Ir(e,t,fa(t),n)},Vn.isNaN=function(e){return as(e)&&e!=+e},Vn.isNative=function(e){if(Sa(e))throw new se("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},Vn.isNil=function(e){return null==e},Vn.isNull=function(e){return null===e},Vn.isNumber=as,Vn.isObject=ns,Vn.isObjectLike=rs,Vn.isPlainObject=os,Vn.isRegExp=ss,Vn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=p},Vn.isSet=us,Vn.isString=ls,Vn.isSymbol=cs,Vn.isTypedArray=fs,Vn.isUndefined=function(e){return e===i},Vn.isWeakMap=function(e){return rs(e)&&va(e)==N},Vn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Er(e)},Vn.join=function(e,t){return null==e?"":qt.call(e,t)},Vn.kebabCase=qs,Vn.last=Ja,Vn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=ms(n))<0?bn(r+a,0):_n(a,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,a):Bt(e,Ht,a,!0)},Vn.lowerCase=Xs,Vn.lowerFirst=Ys,Vn.lt=hs,Vn.lte=ds,Vn.max=function(e){return e&&e.length?mr(e,au,Tr):i},Vn.maxBy=function(e,t){return e&&e.length?mr(e,la(t,2),Tr):i},Vn.mean=function(e){return Wt(e,au)},Vn.meanBy=function(e,t){return Wt(e,la(t,2))},Vn.min=function(e){return e&&e.length?mr(e,au,Ur):i},Vn.minBy=function(e,t){return e&&e.length?mr(e,la(t,2),Ur):i},Vn.stubArray=gu,Vn.stubFalse=yu,Vn.stubObject=function(){return{}},Vn.stubString=function(){return""},Vn.stubTrue=function(){return!0},Vn.multiply=Su,Vn.nth=function(e,t){return e&&e.length?Wr(e,ms(t)):i},Vn.noConflict=function(){return dt._===this&&(dt._=Be),this},Vn.noop=cu,Vn.now=Co,Vn.pad=function(e,t,n){e=_s(e);var r=(t=ms(t))?dn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(vt(i),n)+e+Gi(pt(i),n)},Vn.padEnd=function(e,t,n){e=_s(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?e+Gi(t-r,n):e},Vn.padStart=function(e,t,n){e=_s(e);var r=(t=ms(t))?dn(e):0;return t&&r<t?Gi(t-r,n)+e:e},Vn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(_s(e).replace(oe,""),t||0)},Vn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_a(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=vs(e),t===i?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var a=Sn();return _n(e+a*(t-e+lt("1e-"+((a+"").length-1))),t)}return Zr(e,t)},Vn.reduce=function(e,t,n){var r=qo(e)?Dt:Xt,i=arguments.length<3;return r(e,la(t,4),n,i,dr)},Vn.reduceRight=function(e,t,n){var r=qo(e)?Ot:Xt,i=arguments.length<3;return r(e,la(t,4),n,i,pr)},Vn.repeat=function(e,t,n){return t=(n?_a(e,t,n):t===i)?1:ms(t),$r(_s(e),t)},Vn.replace=function(){var e=arguments,t=_s(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Vn.result=function(e,t,n){var r=-1,a=(t=_i(t,e)).length;for(a||(a=1,e=i);++r<a;){var o=null==e?i:e[Fa(t[r])];o===i&&(r=a,o=n),e=Qo(o)?o.call(e):o}return e},Vn.round=ku,Vn.runInContext=e,Vn.sample=function(e){return(qo(e)?Kn:Kr)(e)},Vn.size=function(e){if(null==e)return 0;if(Yo(e))return ls(e)?dn(e):e.length;var t=va(e);return t==M||t==R?e.size:zr(e).length},Vn.snakeCase=Zs,Vn.some=function(e,t,n){var r=qo(e)?zt:ai;return n&&_a(e,t,n)&&(t=i),r(e,la(t,3))},Vn.sortedIndex=function(e,t){return oi(e,t)},Vn.sortedIndexBy=function(e,t,n){return si(e,t,la(n,2))},Vn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=oi(e,t);if(r<n&&jo(e[r],t))return r}return-1},Vn.sortedLastIndex=function(e,t){return oi(e,t,!0)},Vn.sortedLastIndexBy=function(e,t,n){return si(e,t,la(n,2),!0)},Vn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=oi(e,t,!0)-1;if(jo(e[n],t))return n}return-1},Vn.startCase=$s,Vn.startsWith=function(e,t,n){return e=_s(e),n=null==n?0:ur(ms(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},Vn.subtract=Mu,Vn.sum=function(e){return e&&e.length?Yt(e,au):0},Vn.sumBy=function(e,t){return e&&e.length?Yt(e,la(t,2)):0},Vn.template=function(e,t,n){var r=Vn.templateSettings;n&&_a(e,t,n)&&(t=i),e=_s(e),t=Ss({},t,r,Qi);var a,o,s=Ss({},t.imports,r.imports,Qi),u=Ns(s),l=Kt(s,u),c=0,f=t.interpolate||we,h="__p += '",d=Te((t.escape||we).source+"|"+f.source+"|"+(f===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(c,u).replace(Se,on),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t})),h+="';\n";var v=De.call(t,"variable")&&t.variable;if(v){if(he.test(v))throw new se("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(G,""):h).replace(q,"$1").replace(X,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=eu((function(){return ke(u,p+"return "+h).apply(i,l)}));if(m.source=h,Ko(m))throw m;return m},Vn.times=function(e,t){if((e=ms(e))<1||e>p)return[];var n=m,r=_n(e,m);t=la(t),e-=m;for(var i=Zt(r,t);++n<e;)t(n);return i},Vn.toFinite=vs,Vn.toInteger=ms,Vn.toLength=gs,Vn.toLower=function(e){return _s(e).toLowerCase()},Vn.toNumber=ys,Vn.toSafeInteger=function(e){return e?ur(ms(e),-9007199254740991,p):0===e?e:0},Vn.toString=_s,Vn.toUpper=function(e){return _s(e).toUpperCase()},Vn.trim=function(e,t,n){if((e=_s(e))&&(n||t===i))return $t(e);if(!e||!(t=ci(t)))return e;var r=pn(e),a=pn(t);return wi(r,en(r,a),tn(r,a)+1).join("")},Vn.trimEnd=function(e,t,n){if((e=_s(e))&&(n||t===i))return e.slice(0,vn(e)+1);if(!e||!(t=ci(t)))return e;var r=pn(e);return wi(r,0,tn(r,pn(t))+1).join("")},Vn.trimStart=function(e,t,n){if((e=_s(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=pn(e);return wi(r,en(r,pn(t))).join("")},Vn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var a="separator"in t?t.separator:a;n="length"in t?ms(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=_s(e)).length;if(sn(e)){var s=pn(e);o=s.length}if(n>=o)return e;var u=n-dn(r);if(u<1)return r;var l=s?wi(s,0,u).join(""):e.slice(0,u);if(a===i)return l+r;if(s&&(u+=l.length-u),ss(a)){if(e.slice(u).search(a)){var c,f=l;for(a.global||(a=Te(a.source,_s(ve.exec(a))+"g")),a.lastIndex=0;c=a.exec(f);)var h=c.index;l=l.slice(0,h===i?u:h)}}else if(e.indexOf(ci(a),u)!=u){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+r},Vn.unescape=function(e){return(e=_s(e))&&$.test(e)?e.replace(Y,mn):e},Vn.uniqueId=function(e){var t=++Oe;return _s(e)+t},Vn.upperCase=Js,Vn.upperFirst=Ks,Vn.each=_o,Vn.eachRight=xo,Vn.first=Xa,lu(Vn,function(){var e={};return xr(Vn,(function(t,n){De.call(Vn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Vn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Vn[e].placeholder=Vn})),Tt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===i?1:bn(ms(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:la(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(au)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Pr(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(zo(la(e)))},Gn.prototype.slice=function(e,t){e=ms(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ms(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(m)},xr(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),a=Vn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(Vn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Gn,l=s[0],c=u||qo(t),f=function(e){var t=a.apply(Vn,It([e],s));return r&&h?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,v=u&&!d;if(!o&&c){t=v?t:new Gn(this);var m=e.apply(t,s);return m.__actions__.push({func:vo,args:[f],thisArg:i}),new Wn(m,h)}return p&&v?e.apply(this,s):(m=this.thru(f),p?r?m.value()[0]:m.value():m)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Vn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(qo(i)?i:[],e)}return this[n]((function(n){return t.apply(qo(n)?n:[],e)}))}})),xr(Gn.prototype,(function(e,t){var n=Vn[t];if(n){var r=n.name+"";De.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Vi(i,2).name]=[{name:"wrapper",func:i}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Ri(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ri(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ri(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qo(e),r=t<0,i=n?e.length:0,a=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_n(t,e+o);break;case"takeRight":e=bn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,h=0,d=_n(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return vi(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var v=-1,m=e[l+=t];++v<f;){var g=c[v],y=g.iteratee,b=g.type,_=y(m);if(2==b)m=_;else if(!_){if(1==b)continue e;break e}}p[h++]=m}return p},Vn.prototype.at=mo,Vn.prototype.chain=function(){return po(this)},Vn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Vn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Vn.prototype.plant=function(e){for(var t,n=this;n instanceof Hn;){var r=Ba(n);r.__index__=0,r.__values__=i,t?a.__wrapped__=r:t=r;var a=r;n=n.__wrapped__}return a.__wrapped__=e,t},Vn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:vo,args:[to],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(to)},Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Vn.prototype.first=Vn.prototype.head,Je&&(Vn.prototype[Je]=function(){return this}),Vn}();dt._=gn,(r=function(){return gn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var O,z=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case M:return"Profiler";case k:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Me(e){if(e=bi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?ke?ke.push(e):ke=[e]:Se=e}function Te(){if(Se){var e=Se,t=ke;if(ke=Se=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Se||null!==ke)&&(Ae(),Te())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Ne=!1}function De(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Oe=!1,ze=null,Fe=!1,Ue=null,Be={onError:function(e){Oe=!0,ze=e}};function Ve(e,t,n,r,i,a,o,s,u){Oe=!1,ze=null,De.apply(Be,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ze=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,kt,Mt,Et=!1,Tt=[],Ct=null,At=null,Rt=null,Pt=new Map,Lt=new Map,Nt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zt(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Mt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Et=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),Lt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function jt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==At&&Vt(At,e),null!==Rt&&Vt(Rt,e),Pt.forEach(t),Lt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)zt(n),null===n.blockedOn&&Nt.shift()}var Ht=_.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=bt,a=Ht.transition;Ht.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Ht.transition=a}}function qt(e,t,n,r){var i=bt,a=Ht.transition;Ht.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Ht.transition=a}}function Xt(e,t,n,r){if(Wt){var i=Zt(e,t,n,r);if(null===i)Wr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return At=Ot(At,e,t,n,r,i),!0;case"mouseover":return Rt=Ot(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Ot(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Lt.set(a,Ot(Lt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&xt(a),null===(a=Zt(e,t,n,r))&&Wr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Zt(e,t,n,r){if(Yt=null,null!==(e=yi(e=xe(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Kt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Kt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),fn=z({},ln,{view:0,detail:0}),hn=an(fn),dn=z({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(z({},dn,{dataTransfer:0})),mn=an(z({},fn,{relatedTarget:0})),gn=an(z({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),_n=an(z({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Mn(){return kn}var En=z({},fn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(z({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(z({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Rn=an(z({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=z({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Pn),Nn=[9,13,27,32],In=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var On=c&&"TextEvent"in window&&!Dn,zn=c&&(!In||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){Fr(e,0)}function Zn(e){if(X(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(c){var Kn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Kn=Qn}else Kn=!1;Jn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Zn(Xn)){var t=[];Gn(t,Xn,e,xe(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Xn)}function ar(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},kr={};function Mr(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Mr("animationend"),Tr=Mr("animationiteration"),Cr=Mr("animationstart"),Ar=Mr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),u(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Ir=Pr[Nr];Lr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Lr(Er,"onAnimationEnd"),Lr(Tr,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var c=ze;Oe=!1,ze=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;zr(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;zr(i,s,l),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=xe(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=mn;break;case"focusout":l="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=An;break;case Er:case Tr:case Cr:u=gn;break;case Ar:u=Rn;break;case"scroll":u=hn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Le(p,h))&&c.push(Gr(p,v,d)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(f=je(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:_i(u),d=null==l?s:_i(l),(s=new c(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,yi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=d,c.relatedTarget=f,v=c),f=v,u&&l)e:{for(h=l,p=0,d=c=u;d;d=Xr(d))p++;for(d=0,v=h;v;v=Xr(v))d++;for(;0<p-d;)c=Xr(c),p--;for(;0<d-p;)h=Xr(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Xr(c),h=Xr(h)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==f&&Yr(o,f,l,c,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Wn(s))if(Jn)m=or;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?_i(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(y=en()):(Kt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(g=qr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!In&&Bn(e,t)?(e=en(),Qt=Kt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Le(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Le(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Le(n,a))&&o.unshift(Gr(n,u,s)):i||null!=(u=Le(n,a))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace($r,"")}function Kr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[di]||null}var wi=[],Si=-1;function ki(e){return{current:e}}function Mi(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ei(e,t){Si++,wi[Si]=e.current,e.current=t}var Ti={},Ci=ki(Ti),Ai=ki(!1),Ri=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Mi(Ai),Mi(Ci)}function Ii(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return z({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ci.current,Ei(Ci,e),Ei(Ai,Ai.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Mi(Ai),Mi(Ci),Ei(Ci,e)):Mi(Ai),Ei(Ai,n)}var Fi=null,Ui=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function ji(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Xe(Qe,ji),i}finally{bt=t,Bi=!1}}return null}var Hi=[],Wi=0,Gi=null,qi=0,Xi=[],Yi=0,Zi=null,$i=1,Ji="";function Ki(e,t){Hi[Wi++]=qi,Hi[Wi++]=Gi,Gi=e,qi=t}function Qi(e,t,n){Xi[Yi++]=$i,Xi[Yi++]=Ji,Xi[Yi++]=Zi,Zi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Ki(e,1),Qi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Hi[--Wi],Hi[Wi]=null,qi=Hi[--Wi],Hi[Wi]=null;for(;e===Zi;)Zi=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null,$i=Xi[--Yi],Xi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=li(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=ki(null),ya=null,ba=null,_a=null;function xa(){_a=ba=ya=null}function wa(e){var t=ga.current;Mi(ga),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ka(e,t){ya=e,_a=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,c=l=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=z({},f,h);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ou|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ia(e,i,r))&&(nl(t,e,r,n),Da(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ha(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(i=Li(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ma(a):(a=Li(t)?Ri:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){return(0,e._init)(e._payload)}function Za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&Ya(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Il(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Dl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Il(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case w:return(t=Fl(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dl(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case L:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:f(e,t,n,r,null);Xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return f(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function v(i,a,s,u){for(var l=null,c=null,f=a,v=a=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(i,f,s[v],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===c?l=g:c.sibling=g,c=g,f=m}if(v===s.length)return n(i,f),ia&&Ki(i,v),l;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===c?l=f:c.sibling=f,c=f);return ia&&Ki(i,v),l}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?l=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ki(i,v),l}function m(i,s,u,l){var c=D(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var f=c=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(i,v,y.value,l);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===f?c=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),ia&&Ki(i,m),c;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=h(i,y.value,l))&&(s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return ia&&Ki(i,m),c}for(v=r(i,v);!y.done;m++,y=u.next())null!==(y=p(v,i,m,y.value,l))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===f?c=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ki(i,m),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===S){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===L&&Ya(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=qa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((a=Dl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Il(o.type,o.key,o.props,null,r.mode,u)).ref=qa(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case L:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(D(o))return m(r,a,o,u);Xa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=zl(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Za(!0),Ja=Za(!1),Ka={},Qa=ki(Ka),eo=ki(Ka),to=ki(Ka);function no(e){if(e===Ka)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Qa,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi(Qa),Ei(Qa,t)}function io(){Mi(Qa),Mi(eo),Mi(to)}function ao(e){no(to.current);var t=no(Qa.current),n=ue(t,e.type);t!==n&&(Ei(eo,e),Ei(Qa,n))}function oo(e){eo.current===e&&(Mi(Qa),Mi(eo))}var so=ki(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var fo=_.ReactCurrentDispatcher,ho=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,bo=!1,_o=0,xo=0;function wo(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,fo.current=ls,e=n(r,i)}while(bo)}if(fo.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function Mo(){var e=0!==_o;return _o=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var f=c.lane;if((po&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,vo.lanes|=f,Ou|=f}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ou|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Lo(e,t){var n=vo,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Wo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,Io.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Oo(t)&&zo(e)}function Do(e,t,n){return n((function(){Oo(t)&&zo(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function zo(e){var t=Aa(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function Vo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Ho(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return jo(2048,8,e,t)}function Go(e,t){return jo(4,2,e,t)}function qo(e,t){return jo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Xo.bind(null,t,e),n)}function Zo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Ou|=n,e.baseState=!0),t)}function Qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ca(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Ma,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ma,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:Zo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Qo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Do.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Au.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ma,useCallback:$o,useContext:Ma,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:qo,useMemo:Jo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Zo,useDeferredValue:function(e){return Ko(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Lo,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ma,useCallback:$o,useContext:Ma,useEffect:Wo,useImperativeHandle:Yo,useInsertionEffect:Go,useLayoutEffect:qo,useMemo:Jo,useReducer:Ro,useRef:Bo,useState:function(){return Ro(Co)},useDebugValue:Zo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Ko(t,mo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Lo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Gu=r),hs(0,t)},n}function vs(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===qu?qu=new Set([this]):qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ml.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,Ia(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=_.ReactCurrentOwner,_s=!1;function xs(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return ka(t,i),r=ko(e,t,n,r,a,i),n=Mo(),null===e||_s?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ll(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Il(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ks(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Nl(a,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ts(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Nu,Lu),Lu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Nu,Lu),Lu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Nu,Lu),Lu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Nu,Lu),Lu|=r;return xs(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Li(n)?Ri:Ci.current;return a=Pi(t,a),ka(t,i),n=ko(e,t,n,r,a,i),r=Mo(),null===e||_s?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Cs(e,t,n,r,i){if(Li(n)){var a=!0;Oi(t)}else a=!1;if(ka(t,i),null===t.stateNode)Hs(e,t),Ha(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ma(l):l=Pi(t,l=Li(n)?Ri:Ci.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Wa(t,o,r,l),Ra=!1;var h=t.memoizedState;o.state=h,za(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ai.current||Ra?("function"===typeof c&&(Ba(t,n,c,r),u=t.memoizedState),(s=Ra||ja(t,n,s,r,h,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,La(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ma(t.type,s),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ma(u):u=Pi(t,u=Li(n)?Ri:Ci.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Wa(t,o,r,u),Ra=!1,h=t.memoizedState,o.state=h,za(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ai.current||Ra?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(l=Ra||ja(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&zi(t,n,!1),Ws(e,t,a);r=t.stateNode,bs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,xs(e,t,n,r),t.child}var Ls,Ns,Is,Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function zs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ol(u,i,0,null),e=Dl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ds,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ol({mode:"visible",children:r.children},i,0,null),(o=Dl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ds,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nl(r,e,i,-1))}return vl(),Us(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Yi++]=$i,Xi[Yi++]=Ji,Xi[Yi++]=Zi,$i=e.id,Ji=e.overflow,Zi=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Nl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Nl(r,s):(s=Dl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Os(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Nl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Ol({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function js(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,n,t);else if(19===e.tag)Bs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Li(t.type)&&Ni(),qs(t),null;case 3:return r=t.stateNode,io(),Mi(Ai),Mi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),qs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=no(Qa.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ye(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":q(r),Q(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Ls(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Z(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":q(e),Q(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Is(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Qa.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Mi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Iu&&(Iu=3):vl())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return io(),null===e&&jr(t.stateNode.containerInfo),qs(t),null;case 10:return wa(t.type._context),qs(t),null;case 19:if(Mi(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Gs(o,!1);else{if(0!==Iu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ju&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return qs(t),null}else 2*Je()-o.renderingStartTime>ju&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Lu)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Li(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Mi(Ai),Mi(Ci),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Mi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Qa.current);var a,o=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),o=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,$s=!1,Js="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){kl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,fu=!1;function hu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Qs(n,t);case 6:var r=cu,i=fu;cu=null,hu(e,t,n),fu=i,null!==(cu=r)&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(fu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=fu,cu=n.stateNode.containerInfo,fu=!0,hu(e,t,n),cu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}hu(e,t,n);break;case 1:if(!$s&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kl(n,t,s)}hu(e,t,n);break;case 21:hu(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,hu(e,t,n),$s=r):hu(e,t,n);break;default:hu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,fu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));du(o,s,i),cu=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){kl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),gu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(m){kl(e,e.return,m)}try{nu(5,e,e.return)}catch(m){kl(e,e.return,m)}}break;case 1:vu(t,e),gu(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(vu(t,e),gu(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){kl(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(i,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var f=l[s],h=l[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,c)}switch(u){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){kl(e,e.return,m)}}break;case 6:if(vu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){kl(e,e.return,m)}}break;case 3:if(vu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){kl(e,e.return,m)}break;case 4:default:vu(t,e),gu(e);break;case 13:vu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=Je())),4&r&&pu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||f,vu(t,e),$s=c):vu(t,e),gu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Ks=e,f=e.child;null!==f;){for(h=Ks=f;null!==Ks;){switch(p=(d=Ks).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Qs(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){kl(r,n,m)}}break;case 5:Qs(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Ks=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=ve("display",s))}catch(m){kl(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){kl(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){kl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yu(e,t,n){Ks=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var i=Ks,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Zs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Zs;var l=$s;if(Zs=o,($s=u)&&!l)for(Ks=i;null!==Ks;)u=(o=Ks).child,22===o.tag&&null!==o.memoizedState?wu(i):null!==u?(u.return=o,Ks=u):wu(i);for(;null!==a;)Ks=a,bu(a,t,n),a=a.sibling;Ks=i,Zs=s,$s=l}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ks=a):_u(e)}}function _u(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}$s||512&t.flags&&iu(t)}catch(d){kl(t,t.return,d)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function xu(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function wu(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){kl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){kl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){kl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){kl(t,o,u)}}}catch(u){kl(t,t.return,u)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var Su,ku=Math.ceil,Mu=_.ReactCurrentDispatcher,Eu=_.ReactCurrentOwner,Tu=_.ReactCurrentBatchConfig,Cu=0,Au=null,Ru=null,Pu=0,Lu=0,Nu=ki(0),Iu=0,Du=null,Ou=0,zu=0,Fu=0,Uu=null,Bu=null,Vu=0,ju=1/0,Hu=null,Wu=!1,Gu=null,qu=null,Xu=!1,Yu=null,Zu=0,$u=0,Ju=null,Ku=-1,Qu=0;function el(){return 0!==(6&Cu)?Je():-1!==Ku?Ku:Ku=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Qu&&(Qu=vt()),Qu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nl(e,t,n,r){if(50<$u)throw $u=0,Ju=null,Error(a(185));gt(e,n,r),0!==(2&Cu)&&e===Au||(e===Au&&(0===(2&Cu)&&(zu|=n),4===Iu&&sl(e,Pu)),rl(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(ju=Je()+500,Ui&&ji()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Pu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(ul.bind(null,e)):Vi(ul.bind(null,e)),oi((function(){0===(6&Cu)&&ji()})),n=null;else{switch(_t(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Ku=-1,Qu=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(wl()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var i=Cu;Cu|=2;var o=pl();for(Au===e&&Pu===t||(Hu=null,ju=Je()+500,hl(e,t));;)try{yl();break}catch(u){dl(e,u)}xa(),Mu.current=o,Cu=i,null!==Ru?t=0:(Au=null,Pu=0,t=Iu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Du,hl(e,0),sl(e,r),rl(e,Je()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ml(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Du,hl(e,0),sl(e,r),rl(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xl(e,Bu,Hu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Vu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xl.bind(null,e,Bu,Hu),t);break}xl(e,Bu,Hu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ku(r/1960))-r)){e.timeoutHandle=ri(xl.bind(null,e,Bu,Hu),r);break}xl(e,Bu,Hu);break;default:throw Error(a(329))}}}return rl(e,Je()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Bu,Bu=n,null!==t&&ol(t)),e}function ol(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function sl(e,t){for(t&=~Fu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Cu))throw Error(a(327));wl();var t=ht(e,0);if(0===(1&t))return rl(e,Je()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Du,hl(e,0),sl(e,t),rl(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Bu,Hu),rl(e,Je()),null}function ll(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(ju=Je()+500,Ui&&ji())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Cu)&&wl();var t=Cu;Cu|=1;var n=Tu.transition,r=bt;try{if(Tu.transition=null,bt=1,e)return e()}finally{bt=r,Tu.transition=n,0===(6&(Cu=t))&&ji()}}function fl(){Lu=Nu.current,Mi(Nu)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:io(),Mi(Ai),Mi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Mi(so);break;case 10:wa(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Au=e,Ru=e=Nl(e.current,null),Pu=Lu=t,Iu=0,Du=null,Fu=zu=Ou=0,Bu=Uu=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dl(e,t){for(;;){var n=Ru;try{if(xa(),fo.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,bo=!1,_o=0,Eu.current=null,null===n||null===n.return){Iu=1,Du=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Pu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(o,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){ms(o,c,t),vl();break e}l=Error(a(426))}else if(ia&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Iu&&(Iu=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ps(0,l,t));break e;case 1:u=l;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qu||!qu.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Mu.current;return Mu.current=os,null===e?os:e}function vl(){0!==Iu&&3!==Iu&&2!==Iu||(Iu=4),null===Au||0===(268435455&Ou)&&0===(268435455&zu)||sl(Au,Pu)}function ml(e,t){var n=Cu;Cu|=2;var r=pl();for(Au===e&&Pu===t||(Hu=null,hl(e,t));;)try{gl();break}catch(i){dl(e,i)}if(xa(),Cu=n,Mu.current=r,null!==Ru)throw Error(a(261));return Au=null,Pu=0,Iu}function gl(){for(;null!==Ru;)bl(Ru)}function yl(){for(;null!==Ru&&!Ze();)bl(Ru)}function bl(e){var t=Su(e.alternate,e,Lu);e.memoizedProps=e.pendingProps,null===t?_l(e):Ru=t,Eu.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Lu)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Iu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Iu&&(Iu=5)}function xl(e,t,n){var r=bt,i=Tu.transition;try{Tu.transition=null,bt=1,function(e,t,n,r){do{wl()}while(null!==Yu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Ru=Au=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Al(tt,(function(){return wl(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=bt;bt=1;var u=Cu;Cu|=4,Eu.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(u=s),d===o&&++f===r&&(l=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(x){kl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}v=tu,tu=!1}(e,n),mu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,yu(n,e,i),$e(),Cu=u,bt=s,Tu.transition=o}else e.current=n;if(Xu&&(Xu=!1,Yu=e,Zu=i),0===(o=e.pendingLanes)&&(qu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Gu,Gu=null,e;0!==(1&Zu)&&0!==e.tag&&wl(),0!==(1&(o=e.pendingLanes))?e===Ju?$u++:($u=0,Ju=e):$u=0,ji()}(e,t,n,r)}finally{Tu.transition=i,bt=r}return null}function wl(){if(null!==Yu){var e=_t(Zu),t=Tu.transition,n=bt;try{if(Tu.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Zu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Ks=c;null!==Ks;){var f=Ks;switch(f.tag){case 0:case 11:case 15:nu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ks=h;else for(;null!==Ks;){var d=(f=Ks).sibling,p=f.return;if(au(f),f===c){Ks=null;break}if(null!==d){d.return=p,Ks=d;break}Ks=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ks=y;break e}Ks=o.return}}var b=e.current;for(Ks=b;null!==Ks;){var _=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Ks=_;else e:for(s=b;null!==Ks;){if(0!==(2048&(u=Ks).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){kl(u,u.return,w)}if(u===s){Ks=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Ks=x;break e}Ks=u.return}}if(Cu=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{bt=n,Tu.transition=t}}return!1}function Sl(e,t,n){e=Ia(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function kl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qu||!qu.has(r))){t=Ia(t,e=vs(t,e=cs(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Pu&n)===n&&(4===Iu||3===Iu&&(130023424&Pu)===Pu&&500>Je()-Vu?hl(e,0):Fu|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Aa(e,t))&&(gt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function Cl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),El(e,n)}function Al(e,t){return Xe(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Ll(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ll(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Dl(n.children,i,o,t);case k:s=8,i|=8;break;case M:return(e=Pl(12,n,t,2|i)).elementType=M,e.lanes=o,e;case A:return(e=Pl(13,n,t,i)).elementType=A,e.lanes=o,e;case R:return(e=Pl(19,n,t,i)).elementType=R,e.lanes=o,e;case N:return Ol(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case C:s=11;break e;case P:s=14;break e;case L:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dl(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ol(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function zl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,i,a,o,s,u){return e=new Ul(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Vl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function jl(e){if(!e)return Ti;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Li(n))return Di(e,n,t)}return t}function Hl(e,t,n,r,i,a,o,s,u){return(e=Bl(n,r,!0,e,0,a,0,s,u)).context=jl(null),n=e.current,(a=Na(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Ia(n,a,i),e.current.lanes=i,gt(e,i,r),rl(e,r),e}function Wl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=jl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ia(i,t,o))&&(nl(e,i,o,a),Da(e,i,o)),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),da();break;case 5:ao(t);break;case 1:Li(t.type)&&Oi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(Ei(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return js(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,ia&&0!==(1048576&t.flags)&&Qi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);ka(t,n),i=ko(null,t,r,e,i,n);var o=Mo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ll(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,La(e,t),za(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return zs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Na(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Sa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Sa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ka(t,n),r=r(i=Ma(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Ss(e,t,r,i=ma(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Hs(e,t),t.tag=1,Li(r)?(e=!0,Oi(t)):e=!1,ka(t,n),Ha(t,r,i),Ga(t,r,i,n),As(null,t,r,!0,e,n);case 19:return js(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gl(o);s.call(e)}}Wl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gl(o);a.call(e)}}var o=Hl(t,r,e,0,null,!1,0,"",Ql);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gl(u);s.call(e)}}var u=Bl(e,0,!1,null,0,!1,0,"",Ql);return e._reactRootContainer=u,e[pi]=u.current,jr(8===e.nodeType?e.parentNode:e),cl((function(){Wl(t,u,n,r)})),u}(n,t,e,i,r);return Gl(o)}$l.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wl(e,t,null,null)},$l.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Wl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&zt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Je()),0===(6&Cu)&&(ju=Je()+500,ji()))}break;case 13:cl((function(){var t=Aa(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Xl(e,1)}},wt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nl(t,e,134217728,el());Xl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Aa(e,t);if(null!==n)nl(n,e,t,el());Xl(e,t)}},kt=function(){return bt},Mt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));X(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ll,Ae=cl;var tc={usingClientEntryPoint:!1,Events:[bi,_i,xi,Ee,Te,ll]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(a(200));return Vl(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(a(299));var n=!1,r="",i=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Zl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Kl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Kl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,l=60112,c=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),a=b("react.strict_mode"),o=b("react.profiler"),s=b("react.provider"),u=b("react.context"),l=b("react.forward_ref"),c=b("react.suspense"),f=b("react.suspense_list"),h=b("react.memo"),d=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case c:case f:return e;default:switch(e=e&&e.$$typeof){case u:case l:case d:case h:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===g||e===a||e===c||e===f||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===l||e.$$typeof===m||e.$$typeof===p||e[0]===v)},t.typeOf=_},7441:function(e,t,n){"use strict";e.exports=n(1372)},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},r=n(2791),i=n(3100),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var _=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case l:return"Portal";case h:return"Profiler";case f:return"StrictMode";case m:return"Suspense";case g:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case d:return(e._context.displayName||"Context")+".Provider";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case b:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function k(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function M(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function E(e){if(M(e)!==e)throw Error(o(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=M(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return E(i),e;if(a===r)return E(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function C(e){return null!==(e=T(e))?A(e):null}function A(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=A(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var P,L=Array.isArray,N=e.getPublicInstance,I=e.getRootHostContext,D=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,F=e.createInstance,U=e.appendInitialChild,B=e.finalizeInitialChildren,V=e.prepareUpdate,j=e.shouldSetTextContent,H=e.createTextInstance,W=e.scheduleTimeout,G=e.cancelTimeout,q=e.noTimeout,X=e.isPrimaryRenderer,Y=e.supportsMutation,Z=e.supportsPersistence,$=e.supportsHydration,J=e.getInstanceFromNode,K=e.preparePortalMount,Q=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,ue=e.matchAccessibilityRole,le=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,fe=e.appendChild,he=e.appendChildToContainer,de=e.commitTextUpdate,pe=e.commitMount,ve=e.commitUpdate,me=e.insertBefore,ge=e.insertInContainerBefore,ye=e.removeChild,be=e.removeChildFromContainer,_e=e.resetTextContent,xe=e.hideInstance,we=e.hideTextInstance,Se=e.unhideInstance,ke=e.unhideTextInstance,Me=e.clearContainer,Ee=e.cloneInstance,Te=e.createContainerChildSet,Ce=e.appendChildToContainerChildSet,Ae=e.finalizeContainerChildren,Re=e.replaceContainerChildren,Pe=e.cloneHiddenInstance,Le=e.cloneHiddenTextInstance,Ne=e.canHydrateInstance,Ie=e.canHydrateTextInstance,De=e.canHydrateSuspenseInstance,Oe=e.isSuspenseInstancePending,ze=e.isSuspenseInstanceFallback,Fe=e.registerSuspenseInstanceRetry,Ue=e.getNextHydratableSibling,Be=e.getFirstHydratableChild,Ve=e.getFirstHydratableChildWithinContainer,je=e.getFirstHydratableChildWithinSuspenseInstance,He=e.hydrateInstance,We=e.hydrateTextInstance,Ge=e.hydrateSuspenseInstance,qe=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Ze=e.clearSuspenseBoundary,$e=e.clearSuspenseBoundaryFromContainer,Je=e.shouldDeleteUnhydratedTailInstances,Ke=e.didNotMatchHydratedContainerTextInstance,Qe=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function ut(e,t){at++,it[at]=e.current,e.current=t}var lt={},ct=ot(lt),ft=ot(!1),ht=lt;function dt(e,t){var n=e.type.contextTypes;if(!n)return lt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vt(){st(ft),st(ct)}function mt(e,t,n){if(ct.current!==lt)throw Error(o(168));ut(ct,t),ut(ft,n)}function gt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,k(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lt,ht=ct.current,ut(ct,e),ut(ft,ft.current),!0}function bt(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=gt(e,t,ht),r.__reactInternalMemoizedMergedChildContext=e,st(ft),st(ct),ut(ct,e)):st(ft),ut(ft,n)}var _t=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xt(e)/wt|0)|0},xt=Math.log,wt=Math.LN2;var St=64,kt=4194304;function Mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Et(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=Mt(s):0!==(a&=o)&&(r=Mt(a))}else 0!==(o=n&~i)?r=Mt(o):0!==a&&(r=Mt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-_t(t)),r|=e[n],t&=~i;return r}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function At(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-_t(t)]=n}function Pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Lt=0;function Nt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It=i.unstable_scheduleCallback,Dt=i.unstable_cancelCallback,Ot=i.unstable_shouldYield,zt=i.unstable_requestPaint,Ft=i.unstable_now,Ut=i.unstable_ImmediatePriority,Bt=i.unstable_UserBlockingPriority,Vt=i.unstable_NormalPriority,jt=i.unstable_IdlePriority,Ht=null,Wt=null;var Gt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qt=null,Xt=!1,Yt=!1;function Zt(e){null===qt?qt=[e]:qt.push(e)}function $t(){if(!Yt&&null!==qt){Yt=!0;var e=0,t=Lt;try{var n=qt;for(Lt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qt=null,Xt=!1}catch(i){throw null!==qt&&(qt=qt.slice(e+1)),It(Ut,$t),i}finally{Lt=t,Yt=!1}}return null}var Jt=s.ReactCurrentBatchConfig;function Kt(e,t){if(Gt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Gt(e[i],t[i]))return!1}return!0}function Qt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){X?(ut(tn,t._currentValue),t._currentValue=n):(ut(tn,t._currentValue2),t._currentValue2=n)}function un(e){var t=tn.current;st(tn),X?e._currentValue=t:e._currentValue2=t}function ln(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oi=!0),e.firstContext=null)}function fn(e){var t=X?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var hn=null,dn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=n.interleaved)?(t.next=t,null===hn?hn=[n]:hn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pt(e,n)}}function bn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _n(e,t,n,r){var i=e.updateQueue;dn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var f=e.alternate;null!==f&&((u=(f=f.updateQueue).lastBaseUpdate)!==s&&(null===u?f.firstBaseUpdate=c:u.next=c,f.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,f=c=l=null,u=o;;){var d=u.lane,p=u.eventTime;if((r&d)===d){null!==f&&(f=f.next={eventTime:p,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,m=u;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(v=m.payload)){h=v.call(p,h,d);break e}h=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(d="function"===typeof(v=m.payload)?v.call(p,h,d):v)||void 0===d)break e;h=a({},h,d);break e;case 2:dn=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[u]:d.push(u))}else p={eventTime:p,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===f?(c=f=p,l=h):f=f.next=p,s|=d;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(d=u).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===f&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=f,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=h}}function xn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var wn=(new r.Component).refs;function Sn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var kn={isMounted:function(e){return!!(e=e._reactInternals)&&M(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xo(),i=wo(e),a=mn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=So(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xo(),i=wo(e),a=mn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),gn(e,a),null!==(t=So(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xo(),r=wo(e),i=mn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),gn(e,i),null!==(t=So(e,r,n))&&yn(t,e,r)}};function Mn(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Kt(n,r)||!Kt(i,a))}function En(e,t,n){var r=!1,i=lt,a=t.contextType;return"object"===typeof a&&null!==a?a=fn(a):(i=pt(t)?ht:ct.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?dt(e,i):lt),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=kn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&kn.enqueueReplaceState(t,t.state,null)}function Cn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=wn,pn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=fn(a):(a=pt(t)?ht:ct.current,i.context=dt(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Sn(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&kn.enqueueReplaceState(i,i.state,null),_n(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var An=[],Rn=0,Pn=null,Ln=0,Nn=[],In=0,Dn=null,On=1,zn="";function Fn(e,t){An[Rn++]=Ln,An[Rn++]=Pn,Pn=e,Ln=t}function Un(e,t,n){Nn[In++]=On,Nn[In++]=zn,Nn[In++]=Dn,Dn=e;var r=On;e=zn;var i=32-_t(r)-1;r&=~(1<<i),n+=1;var a=32-_t(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,On=1<<32-_t(t)+i|n<<i|r,zn=a+e}else On=1<<a|n<<i|r,zn=e}function Bn(e){null!==e.return&&(Fn(e,1),Un(e,1,0))}function Vn(e){for(;e===Pn;)Pn=An[--Rn],An[Rn]=null,Ln=An[--Rn],An[Rn]=null;for(;e===Dn;)Dn=Nn[--In],Nn[In]=null,zn=Nn[--In],Nn[In]=null,On=Nn[--In],Nn[In]=null}var jn=null,Hn=null,Wn=!1,Gn=!1,qn=null;function Xn(e,t){var n=Ko(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Ne(t,e.type,e.pendingProps))&&(e.stateNode=t,jn=e,Hn=Be(t),!0);case 6:return null!==(t=Ie(t,e.pendingProps))&&(e.stateNode=t,jn=e,Hn=null,!0);case 13:if(null!==(t=De(t))){var n=null!==Dn?{id:On,overflow:zn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ko(18,null,null,0)).stateNode=t,n.return=e,e.child=n,jn=e,Hn=null,!0}return!1;default:return!1}}function Zn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function $n(e){if(Wn){var t=Hn;if(t){var n=t;if(!Yn(e,t)){if(Zn(e))throw Error(o(418));t=Ue(n);var r=jn;t&&Yn(e,t)?Xn(r,n):(e.flags=-4097&e.flags|2,Wn=!1,jn=e)}}else{if(Zn(e))throw Error(o(418));e.flags=-4097&e.flags|2,Wn=!1,jn=e}}}function Jn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jn=e}function Kn(e){if(!$||e!==jn)return!1;if(!Wn)return Jn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Je(e.type)&&!j(e.type,e.memoizedProps))){var t=Hn;if(t){if(Zn(e)){for(e=Hn;e;)e=Ue(e);throw Error(o(418))}for(;t;)Xn(e,t),t=Ue(t)}}if(Jn(e),13===e.tag){if(!$)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Hn=qe(e)}else Hn=jn?Ue(e.stateNode):null;return!0}function Qn(){$&&(Hn=jn=null,Gn=Wn=!1)}function er(e){null===qn?qn=[e]:qn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===wn&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function f(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var a=n.type;return a===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===b&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function v(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case u:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case l:return(t=as(t,e.mode,n)).return=e,t;case b:return v(e,(0,t._init)(t._payload),n)}if(L(t)||w(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:f(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case u:return n.key===i?h(e,t,n,r):null;case l:return n.key===i?d(e,t,n,r):null;case b:return m(e,t,(i=n._init)(n._payload),r)}if(L(n)||w(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return f(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case u:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return g(e,t,n,(0,r._init)(r._payload),i)}if(L(r)||w(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,o,s,u){for(var l=null,c=null,f=o,h=o=0,d=null;null!==f&&h<s.length;h++){f.index>h?(d=f,f=null):d=f.sibling;var p=m(i,f,s[h],u);if(null===p){null===f&&(f=d);break}e&&f&&null===p.alternate&&t(i,f),o=a(p,o,h),null===c?l=p:c.sibling=p,c=p,f=d}if(h===s.length)return n(i,f),Wn&&Fn(i,h),l;if(null===f){for(;h<s.length;h++)null!==(f=v(i,s[h],u))&&(o=a(f,o,h),null===c?l=f:c.sibling=f,c=f);return Wn&&Fn(i,h),l}for(f=r(i,f);h<s.length;h++)null!==(d=g(f,i,h,s[h],u))&&(e&&null!==d.alternate&&f.delete(null===d.key?h:d.key),o=a(d,o,h),null===c?l=d:c.sibling=d,c=d);return e&&f.forEach((function(e){return t(i,e)})),Wn&&Fn(i,h),l}function _(i,s,u,l){var c=w(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var f=c=null,h=s,d=s=0,p=null,y=u.next();null!==h&&!y.done;d++,y=u.next()){h.index>d?(p=h,h=null):p=h.sibling;var b=m(i,h,y.value,l);if(null===b){null===h&&(h=p);break}e&&h&&null===b.alternate&&t(i,h),s=a(b,s,d),null===f?c=b:f.sibling=b,f=b,h=p}if(y.done)return n(i,h),Wn&&Fn(i,d),c;if(null===h){for(;!y.done;d++,y=u.next())null!==(y=v(i,y.value,l))&&(s=a(y,s,d),null===f?c=y:f.sibling=y,f=y);return Wn&&Fn(i,d),c}for(h=r(i,h);!y.done;d++,y=u.next())null!==(y=g(h,i,d,y.value,l))&&(e&&null!==y.alternate&&h.delete(null===y.key?d:y.key),s=a(y,s,d),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach((function(e){return t(i,e)})),Wn&&Fn(i,d),c}return function e(r,a,o,f){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case u:e:{for(var h=o.key,d=a;null!==d;){if(d.key===h){if((h=o.type)===c){if(7===d.tag){n(r,d.sibling),(a=i(d,o.props.children)).return=r,r=a;break e}}else if(d.elementType===h||"object"===typeof h&&null!==h&&h.$$typeof===b&&rr(h)===d.type){n(r,d.sibling),(a=i(d,o.props)).ref=tr(r,d,o),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}o.type===c?((a=ns(o.props.children,r.mode,f,o.key)).return=r,r=a):((f=ts(o.type,o.key,o.props,null,r.mode,f)).ref=tr(r,a,o),f.return=r,r=f)}return s(r);case l:e:{for(d=o.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,f)).return=r,r=a}return s(r);case b:return e(r,a,(d=o._init)(o._payload),f)}if(L(o))return y(r,a,o,f);if(w(o))return _(r,a,o,f);nr(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,f)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},ur=ot(sr),lr=ot(sr),cr=ot(sr);function fr(e){if(e===sr)throw Error(o(174));return e}function hr(e,t){ut(cr,t),ut(lr,e),ut(ur,sr),e=I(t),st(ur),ut(ur,e)}function dr(){st(ur),st(lr),st(cr)}function pr(e){var t=fr(cr.current),n=fr(ur.current);n!==(t=D(n,e.type,t))&&(ut(lr,e),ut(ur,t))}function vr(e){lr.current===e&&(st(ur),st(lr))}var mr=ot(0);function gr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Oe(n)||ze(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function br(){for(var e=0;e<yr.length;e++){var t=yr[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var _r=s.ReactCurrentDispatcher,xr=s.ReactCurrentBatchConfig,wr=0,Sr=null,kr=null,Mr=null,Er=!1,Tr=!1,Cr=0,Ar=0;function Rr(){throw Error(o(321))}function Pr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function Lr(e,t,n,r,i,a){if(wr=a,Sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_r.current=null===e||null===e.memoizedState?pi:vi,e=n(r,i),Tr){a=0;do{if(Tr=!1,Cr=0,25<=a)throw Error(o(301));a+=1,Mr=kr=null,t.updateQueue=null,_r.current=mi,e=n(r,i)}while(Tr)}if(_r.current=di,t=null!==kr&&null!==kr.next,wr=0,Mr=kr=Sr=null,Er=!1,t)throw Error(o(300));return e}function Nr(){var e=0!==Cr;return Cr=0,e}function Ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Mr?Sr.memoizedState=Mr=e:Mr=Mr.next=e,Mr}function Dr(){if(null===kr){var e=Sr.alternate;e=null!==e?e.memoizedState:null}else e=kr.next;var t=null===Mr?Sr.memoizedState:Mr.next;if(null!==t)Mr=t,kr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(kr=e).memoizedState,baseState:kr.baseState,baseQueue:kr.baseQueue,queue:kr.queue,next:null},null===Mr?Sr.memoizedState=Mr=e:Mr=Mr.next=e}return Mr}function Or(e,t){return"function"===typeof t?t(e):t}function zr(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=kr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var f=c.lane;if((wr&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,Sr.lanes|=f,to|=f}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,Gt(r,t.memoizedState)||(Oi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,Sr.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fr(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Gt(a,t.memoizedState)||(Oi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ur(){}function Br(e,t){var n=Sr,r=Dr(),i=t(),a=!Gt(r.memoizedState,i);if(a&&(r.memoizedState=i,Oi=!0),r=r.queue,Jr(Hr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Mr&&1&Mr.memoizedState.tag){if(n.flags|=2048,qr(9,jr.bind(null,n,r,i,t),void 0,null),null===Ya)throw Error(o(349));0!==(30&wr)||Vr(n,t,i)}return i}function Vr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jr(e,t,n,r){t.value=n,t.getSnapshot=r,Wr(t)&&So(e,1,-1)}function Hr(e,t,n){return n((function(){Wr(t)&&So(e,1,-1)}))}function Wr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch(r){return!0}}function Gr(e){var t=Ir();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:e},t.queue=e,e=e.dispatch=ui.bind(null,Sr,e),[t.memoizedState,e]}function qr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Sr.updateQueue)?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xr(){return Dr().memoizedState}function Yr(e,t,n,r){var i=Ir();Sr.flags|=e,i.memoizedState=qr(1|t,n,void 0,void 0===r?null:r)}function Zr(e,t,n,r){var i=Dr();r=void 0===r?null:r;var a=void 0;if(null!==kr){var o=kr.memoizedState;if(a=o.destroy,null!==r&&Pr(r,o.deps))return void(i.memoizedState=qr(t,n,a,r))}Sr.flags|=e,i.memoizedState=qr(1|t,n,a,r)}function $r(e,t){return Yr(8390656,8,e,t)}function Jr(e,t){return Zr(2048,8,e,t)}function Kr(e,t){return Zr(4,2,e,t)}function Qr(e,t){return Zr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Pr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Pr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Lt;Lt=0!==n&&4>n?n:4,e(!0);var r=xr.transition;xr.transition={};try{e(!1),t()}finally{Lt=n,xr.transition=r}}function oi(){return Dr().memoizedState}function si(e,t,n){var r=wo(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},li(e)?ci(t,n):(fi(e,t,n),null!==(e=So(e,r,n=xo()))&&hi(e,t,r))}function ui(e,t,n){var r=wo(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(li(e))ci(t,i);else{fi(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Gt(s,o))return}catch(u){}null!==(e=So(e,r,n=xo()))&&hi(e,t,r)}}function li(e){var t=e.alternate;return e===Sr||null!==t&&t===Sr}function ci(e,t){Tr=Er=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fi(e,t,n){null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=t.interleaved)?(n.next=n,null===hn?hn=[t]:hn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hi(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pt(e,n)}}var di={readContext:fn,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},pi={readContext:fn,useCallback:function(e,t){return Ir().memoizedState=[e,void 0===t?null:t],e},useContext:fn,useEffect:$r,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=Ir();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ir();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,Sr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ir().memoizedState=e},useState:Gr,useDebugValue:ni,useDeferredValue:function(e){var t=Gr(e),n=t[0],r=t[1];return $r((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){var e=Gr(!1),t=e[0];return e=ai.bind(null,e[1]),Ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Sr,i=Ir();if(Wn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ya)throw Error(o(349));0!==(30&wr)||Vr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,$r(Hr.bind(null,r,a,e),[e]),r.flags|=2048,qr(9,jr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ir(),t=Ya.identifierPrefix;if(Wn){var n=zn;t=":"+t+"R"+(n=(On&~(1<<32-_t(On)-1)).toString(32)+n),0<(n=Cr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ar++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},vi={readContext:fn,useCallback:ri,useContext:fn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:zr,useRef:Xr,useState:function(){return zr(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=zr(Or),n=t[0],r=t[1];return Jr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[zr(Or)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Br,useId:oi,unstable_isNewReconciler:!1},mi={readContext:fn,useCallback:ri,useContext:fn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Fr,useRef:Xr,useState:function(){return Fr(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=Fr(Or),n=t[0],r=t[1];return Jr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Fr(Or)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Br,useId:oi,unstable_isNewReconciler:!1};function gi(e,t){try{var n="",r=t;do{n+=Qt(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var bi,_i,xi,wi,Si="function"===typeof WeakMap?WeakMap:Map;function ki(e,t,n){(n=mn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){co||(co=!0,fo=r),yi(0,t)},n}function Mi(e,t,n){(n=mn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===ho?ho=new Set([this]):ho.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ei(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Si;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=qo.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ci(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=mn(-1,1)).tag=2,gn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ai(e){e.flags|=4}function Ri(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)bi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)U(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_i=function(){},xi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=fr(ur.current);n=V(a,n,e,r,i,o),(t.updateQueue=n)&&Ai(t)}},wi=function(e,t,n,r){n!==r&&Ai(t)};else if(Z){bi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Pe(a,i.type,i.memoizedProps,i)),U(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Le(a,i.memoizedProps,i)),U(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),bi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Pi=function e(t,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=Pe(o,a.type,a.memoizedProps,a)),Ce(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=Le(o,a.memoizedProps,a)),Ce(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};_i=function(e,t){var n=t.stateNode;if(!Ri(e,t)){e=n.containerInfo;var r=Te(e);Pi(r,t,!1,!1),n.pendingChildren=r,Ai(t),Ae(e,r)}},xi=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=Ri(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,u=fr(ur.current),l=null;o!==r&&(l=V(s,n,o,r,i,u)),e&&null===l?t.stateNode=a:(a=Ee(a,l,n,o,r,t,e,s),B(a,n,r,i,u)&&Ai(t),t.stateNode=a,e?Ai(t):bi(a,t,!1,!1))}},wi=function(e,t,n,r){n!==r?(e=fr(cr.current),n=fr(ur.current),t.stateNode=H(r,e,n,t),Ai(t)):t.stateNode=e.stateNode}}else _i=function(){},xi=function(){},wi=function(){};function Li(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ni(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ii(e,t,n){var r=t.pendingProps;switch(Vn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(t),null;case 1:case 17:return pt(t.type)&&vt(),Ni(t),null;case 3:return r=t.stateNode,dr(),st(ft),st(ct),br(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Kn(t)?Ai(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==qn&&(Co(qn),qn=null))),_i(e,t),Ni(t),null;case 5:vr(t),n=fr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)xi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ni(t),null}if(e=fr(ur.current),Kn(t)){if(!$)throw Error(o(175));e=He(t.stateNode,t.type,t.memoizedProps,n,e,t,!Gn),t.updateQueue=e,null!==e&&Ai(t)}else{var a=F(i,r,n,e,t);bi(a,t,!1,!1),t.stateNode=a,B(a,i,r,n,e)&&Ai(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ni(t),null;case 6:if(e&&null!=t.stateNode)wi(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=fr(cr.current),n=fr(ur.current),Kn(t)){if(!$)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=We(e,r,t,!Gn))&&null!==(i=jn))switch(a=0!==(1&i.mode),i.tag){case 3:Ke(i.stateNode.containerInfo,e,r,a);break;case 5:Qe(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Ai(t)}else t.stateNode=H(r,e,n,t)}return Ni(t),null;case 13:if(st(mr),r=t.memoizedState,Wn&&null!==Hn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Hn;e;)e=Ue(e);return Qn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Kn(t),null===e){if(!r)throw Error(o(318));if(!$)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));Ge(e,t)}else Qn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ni(t),null}return null!==qn&&(Co(qn),qn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Kn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&mr.current)?0===Qa&&(Qa=3):Oo())),null!==t.updateQueue&&(t.flags|=4),Ni(t),null);case 4:return dr(),_i(e,t),null===e&&K(t.stateNode.containerInfo),Ni(t),null;case 10:return un(t.type._context),Ni(t),null;case 19:if(st(mr),null===(i=t.memoizedState))return Ni(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)Li(i,!1);else{if(0!==Qa||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=gr(e))){for(t.flags|=128,Li(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return ut(mr,1&mr.current|2),t.child}e=e.sibling}null!==i.tail&&Ft()>so&&(t.flags|=128,r=!0,Li(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=gr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Li(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Wn)return Ni(t),null}else 2*Ft()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,Li(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ft(),t.sibling=null,e=mr.current,ut(mr,r?1&e|2:1&e),t):(Ni(t),null);case 22:case 23:return Lo(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ja)&&(Ni(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Ni(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Di=s.ReactCurrentOwner,Oi=!1;function zi(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Fi(e,t,n,r,i){n=n.render;var a=t.ref;return cn(t,i),r=Lr(e,t,n,r,a,i),n=Nr(),null===e||Oi?(Wn&&n&&Bn(t),t.flags|=1,zi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Qo(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Bi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Kt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function Bi(e,t,n,r,i){if(null!==e&&Kt(e.memoizedProps,r)&&e.ref===t.ref){if(Oi=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Oi=!0)}return Hi(e,t,n,r,i)}function Vi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},ut(Ka,Ja),Ja|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,ut(Ka,Ja),Ja|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,ut(Ka,Ja),Ja|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ut(Ka,Ja),Ja|=r;return zi(e,t,i,n),t.child}function ji(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hi(e,t,n,r,i){var a=pt(n)?ht:ct.current;return a=dt(t,a),cn(t,i),n=Lr(e,t,n,r,a,i),r=Nr(),null===e||Oi?(Wn&&r&&Bn(t),t.flags|=1,zi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Wi(e,t,n,r,i){if(pt(n)){var a=!0;yt(t)}else a=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),En(t,n,r),Cn(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=fn(l):l=dt(t,l=pt(n)?ht:ct.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Tn(t,o,r,l),dn=!1;var h=t.memoizedState;o.state=h,_n(t,r,o,i),u=t.memoizedState,s!==r||h!==u||ft.current||dn?("function"===typeof c&&(Sn(t,n,c,r),u=t.memoizedState),(s=dn||Mn(t,n,s,r,h,u,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vn(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:en(t.type,s),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=fn(u):u=dt(t,u=pt(n)?ht:ct.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Tn(t,o,r,u),dn=!1,h=t.memoizedState,o.state=h,_n(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||ft.current||dn?("function"===typeof d&&(Sn(t,n,d,r),p=t.memoizedState),(l=dn||Mn(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Gi(e,t,n,r,a,i)}function Gi(e,t,n,r,i,a){ji(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&bt(t,n,!1),ia(e,t,a);r=t.stateNode,Di.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):zi(e,t,s,a),t.memoizedState=r.state,i&&bt(t,n,!0),t.child}function qi(e){var t=e.stateNode;t.pendingContext?mt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mt(0,t.context,!1),hr(e,t.containerInfo)}function Xi(e,t,n,r,i){return Qn(),er(i),t.flags|=256,zi(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Zi(e){return{baseLanes:e,cachePool:null}}function $i(e,t,n){var r,i=t.pendingProps,a=mr.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ut(mr,1&a),null===e)return $n(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:ze(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Zi(n),t.memoizedState=Yi,e):Ji(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Zi(n),t.memoizedState=Yi,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(ze(r))t=ea(e,t,n,Error(o(419)));else if(i=0!==(n&e.childLanes),Oi||i){if(null!==(i=Ya)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,So(e,i,-1))}Oo(),t=ea(e,t,n,Error(o(421)))}else Oe(r)?(t.flags|=128,t.child=e.child,t=Yo.bind(null,e),Fe(r,t),t=null):(n=a.treeContext,$&&(Hn=je(r),jn=t,Wn=!0,qn=null,Gn=!1,null!==n&&(Nn[In++]=On,Nn[In++]=zn,Nn[In++]=Dn,On=n.id,zn=n.overflow,Dn=t)),(t=Ji(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Zi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Zi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}function Ji(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Qi(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ln(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(zi(e,t,r.children,n),0!==(2&(r=mr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ut(mr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===gr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===gr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Vn(t),t.tag){case 1:return pt(t.type)&&vt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return dr(),st(ft),st(ct),br(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return vr(t),null;case 13:if(st(mr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));Qn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(mr),null;case 4:return dr(),null;case 10:return un(t.type._context),null;case 22:case 23:return Lo(),null;default:return null}}var oa=!1,sa=!1,ua="function"===typeof WeakSet?WeakSet:Set,la=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Go(e,t,r)}else n.current=null}function fa(e,t,n){try{n()}catch(r){Go(e,t,r)}}var ha=!1;function da(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&fa(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function va(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=N(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ma(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Ht,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&fa(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Go(t,n,o)}break;case 5:ca(t,n);break;case 4:Y?ka(e,t,n):Z&&Z&&(t=t.stateNode.containerInfo,n=Te(t),Re(t,n))}}function ga(e,t,n){for(var r=t;;)if(ma(e,r,n),null===r.child||Y&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ba(e){return 5===e.tag||3===e.tag||4===e.tag}function _a(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ba(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xa(e){if(Y){e:{for(var t=e.return;null!==t;){if(ba(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(_e(t),n.flags&=-33),Sa(e,n=_a(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wa(e,n=_a(e),t);break;default:throw Error(o(161))}}}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Sa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?me(n,e,t):fe(n,e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function ka(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)ga(e,a,n),i?be(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?$e(r,a.stateNode):Ze(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ma(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ma(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return da(3,t,t.return),pa(3,t),void da(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&ve(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void de(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void($&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void Ea(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return da(3,t,t.return),pa(3,t),void da(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Ea(t);case 3:$&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if(Z){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Ea(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ua),t.forEach((function(t){var r=Zo.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t,n){la=e,Ca(e,t,n)}function Ca(e,t,n){for(var r=0!==(1&e.mode);null!==la;){var i=la,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||sa;s=oa;var l=sa;if(oa=o,(sa=u)&&!l)for(la=i;null!==la;)u=(o=la).child,22===o.tag&&null!==o.memoizedState?Pa(i):null!==u?(u.return=o,la=u):Pa(i);for(;null!==a;)la=a,Ca(a,t,n),a=a.sibling;la=i,oa=s,sa=l}Aa(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,la=a):Aa(e)}}function Aa(e){for(;null!==la;){var t=la;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&xn(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=N(t.child.stateNode);break;case 1:n=t.child.stateNode}xn(t,s,n)}break;case 5:var u=t.stateNode;null===n&&4&t.flags&&pe(u,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if($&&null===t.memoizedState){var l=t.alternate;if(null!==l){var c=l.memoizedState;if(null!==c){var f=c.dehydrated;null!==f&&Ye(f)}}}break;default:throw Error(o(163))}sa||512&t.flags&&va(t)}catch(h){Go(t,t.return,h)}}if(t===e){la=null;break}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}function Ra(e){for(;null!==la;){var t=la;if(t===e){la=null;break}var n=t.sibling;if(null!==n){n.return=t.return,la=n;break}la=t.return}}function Pa(e){for(;null!==la;){var t=la;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(u){Go(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Go(t,i,u)}}var a=t.return;try{va(t)}catch(u){Go(t,a,u)}break;case 5:var o=t.return;try{va(t)}catch(u){Go(t,o,u)}}}catch(u){Go(t,t.return,u)}if(t===e){la=null;break}var s=t.sibling;if(null!==s){s.return=t.return,la=s;break}la=t.return}}var La=0,Na=1,Ia=2,Da=3,Oa=4;if("function"===typeof Symbol&&Symbol.for){var za=Symbol.for;La=za("selector.component"),Na=za("selector.has_pseudo_class"),Ia=za("selector.role"),Da=za("selector.test_id"),Oa=za("selector.text")}function Fa(e){var t=J(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function Ua(e,t){switch(t.$$typeof){case La:if(e.type===t.value)return!0;break;case Na:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&Ua(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Ia:if(5===e.tag&&ue(e.stateNode,t.value))return!0;break;case Oa:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Da:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ba(e){switch(e.$$typeof){case La:return"<"+(S(e.value)||"Unknown")+">";case Na:return":has("+(Ba(e)||"")+")";case Ia:return'[role="'+e.value+'"]';case Oa:return'"'+e.value+'"';case Da:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Va(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&Ua(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function ja(e,t){if(!re)throw Error(o(363));e=Va(e=Fa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ha=Math.ceil,Wa=s.ReactCurrentDispatcher,Ga=s.ReactCurrentOwner,qa=s.ReactCurrentBatchConfig,Xa=0,Ya=null,Za=null,$a=0,Ja=0,Ka=ot(0),Qa=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function uo(){so=Ft()+500}var lo,co=!1,fo=null,ho=null,po=!1,vo=null,mo=0,go=0,yo=null,bo=-1,_o=0;function xo(){return 0!==(6&Xa)?Ft():-1!==bo?bo:bo=Ft()}function wo(e){return 0===(1&e.mode)?1:0!==(2&Xa)&&0!==$a?$a&-$a:null!==Jt.transition?(0===_o&&(e=St,0===(4194240&(St<<=1))&&(St=64),_o=e),_o):0!==(e=Lt)?e:Q()}function So(e,t,n){if(50<go)throw go=0,yo=null,Error(o(185));var r=ko(e,t);return null===r?null:(Rt(r,t,n),0!==(2&Xa)&&r===Ya||(r===Ya&&(0===(2&Xa)&&(no|=t),4===Qa&&Ao(r,$a)),Mo(r,n),1===t&&0===Xa&&0===(1&e.mode)&&(uo(),Xt&&$t())),r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Mo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-_t(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=Tt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=Et(e,e===Ya?$a:0);if(0===r)null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Dt(n),1===t)0===e.tag?function(e){Xt=!0,Zt(e)}(Ro.bind(null,e)):Zt(Ro.bind(null,e)),te?ne((function(){0===Xa&&$t()})):It(Ut,$t),n=null;else{switch(Nt(r)){case 1:n=Ut;break;case 4:n=Bt;break;case 16:default:n=Vt;break;case 536870912:n=jt}n=$o(n,Eo.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Eo(e,t){if(bo=-1,_o=0,0!==(6&Xa))throw Error(o(327));var n=e.callbackNode;if(Ho()&&e.callbackNode!==n)return null;var r=Et(e,e===Ya?$a:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=zo(e,r);else{t=r;var i=Xa;Xa|=2;var a=Do();for(Ya===e&&$a===t||(uo(),No(e,t));;)try{Uo();break}catch(u){Io(e,u)}on(),Wa.current=a,Xa=i,null!==Za?t=0:(Ya=null,$a=0,t=Qa)}if(0!==t){if(2===t&&(0!==(i=Ct(e))&&(r=i,t=To(e,i))),1===t)throw n=eo,No(e,0),Ao(e,r),Mo(e,Ft()),n;if(6===t)Ao(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Gt(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=zo(e,r))&&(0!==(a=Ct(e))&&(r=a,t=To(e,a))),1===t))throw n=eo,No(e,0),Ao(e,r),Mo(e,Ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:jo(e,ao);break;case 3:if(Ao(e,r),(130023424&r)===r&&10<(t=oo+500-Ft())){if(0!==Et(e,0))break;if(((i=e.suspendedLanes)&r)!==r){xo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=W(jo.bind(null,e,ao),t);break}jo(e,ao);break;case 4:if(Ao(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-_t(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ft()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ha(r/1960))-r)){e.timeoutHandle=W(jo.bind(null,e,ao),r);break}jo(e,ao);break;default:throw Error(o(329))}}}return Mo(e,Ft()),e.callbackNode===n?Eo.bind(null,e):null}function To(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(No(e,t).flags|=256),2!==(e=zo(e,t))&&(t=ao,ao=n,null!==t&&Co(t)),e}function Co(e){null===ao?ao=e:ao.push.apply(ao,e)}function Ao(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function Ro(e){if(0!==(6&Xa))throw Error(o(327));Ho();var t=Et(e,0);if(0===(1&t))return Mo(e,Ft()),null;var n=zo(e,t);if(0!==e.tag&&2===n){var r=Ct(e);0!==r&&(t=r,n=To(e,r))}if(1===n)throw n=eo,No(e,0),Ao(e,t),Mo(e,Ft()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jo(e,ao),Mo(e,Ft()),null}function Po(e){null!==vo&&0===vo.tag&&0===(6&Xa)&&Ho();var t=Xa;Xa|=1;var n=qa.transition,r=Lt;try{if(qa.transition=null,Lt=1,e)return e()}finally{Lt=r,qa.transition=n,0===(6&(Xa=t))&&$t()}}function Lo(){Ja=Ka.current,st(Ka)}function No(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==q&&(e.timeoutHandle=q,G(n)),null!==Za)for(n=Za.return;null!==n;){var r=n;switch(Vn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vt();break;case 3:dr(),st(ft),st(ct),br();break;case 5:vr(r);break;case 4:dr();break;case 13:case 19:st(mr);break;case 10:un(r.type._context);break;case 22:case 23:Lo()}n=n.return}if(Ya=e,Za=e=es(e.current,null),$a=Ja=t,Qa=0,eo=null,ro=no=to=0,ao=io=null,null!==hn){for(t=0;t<hn.length;t++)if(null!==(r=(n=hn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}hn=null}return e}function Io(e,t){for(;;){var n=Za;try{if(on(),_r.current=di,Er){for(var r=Sr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Er=!1}if(wr=0,Mr=kr=Sr=null,Tr=!1,Cr=0,Ga.current=null,null===n||null===n.return){Qa=1,eo=t,Za=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=$a,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Ti(s);if(null!==p){p.flags&=-257,Ci(p,s,u,0,t),1&p.mode&&Ei(a,c,t),l=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(l),t.updateQueue=m}else v.add(l);break e}if(0===(1&t)){Ei(a,c,t),Oo();break e}l=Error(o(426))}else if(Wn&&1&u.mode){var g=Ti(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),Ci(g,s,u,0,t),er(l);break e}}a=l,4!==Qa&&(Qa=2),null===io?io=[a]:io.push(a),l=gi(l,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,bn(u,ki(0,l,t));break e;case 1:a=l;var y=u.type,b=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ho||!ho.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,bn(u,Mi(u,a,t));break e}}u=u.return}while(null!==u)}Vo(n)}catch(_){t=_,Za===n&&null!==n&&(Za=n=n.return);continue}break}}function Do(){var e=Wa.current;return Wa.current=di,null===e?di:e}function Oo(){0!==Qa&&3!==Qa&&2!==Qa||(Qa=4),null===Ya||0===(268435455&to)&&0===(268435455&no)||Ao(Ya,$a)}function zo(e,t){var n=Xa;Xa|=2;var r=Do();for(Ya===e&&$a===t||No(e,t);;)try{Fo();break}catch(i){Io(e,i)}if(on(),Xa=n,Wa.current=r,null!==Za)throw Error(o(261));return Ya=null,$a=0,Qa}function Fo(){for(;null!==Za;)Bo(Za)}function Uo(){for(;null!==Za&&!Ot();)Bo(Za)}function Bo(e){var t=lo(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,null===t?Vo(e):Za=t,Ga.current=null}function Vo(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ii(n,t,Ja)))return void(Za=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Za=n);if(null===e)return Qa=6,void(Za=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Za=t);Za=t=e}while(null!==t);0===Qa&&(Qa=5)}function jo(e,t){var n=Lt,r=qa.transition;try{qa.transition=null,Lt=1,function(e,t,n){do{Ho()}while(null!==vo);if(0!==(6&Xa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_t(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Ya&&(Za=Ya=null,$a=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||po||(po=!0,$o(Vt,(function(){return Ho(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=qa.transition,qa.transition=null;var s=Lt;Lt=1;var u=Xa;Xa|=4,Ga.current=null,function(e,t){for(O(e.containerInfo),la=t;null!==la;)if(t=(e=la).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,la=t;else for(;null!==la;){e=la;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Me(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(u){Go(e,e.return,u)}if(null!==(t=e.sibling)){t.return=e.return,la=t;break}la=e.return}n=ha,ha=!1}(e,r),function(e,t){for(la=t;null!==la;){var n=(t=la).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;Y?ka(a,i,t):ga(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(x){Go(i,t,x)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,la=n;else for(;null!==la;){t=la;try{var s=t.flags;if(32&s&&Y&&_e(t.stateNode),512&s){var u=t.alternate;if(null!==u){var l=u.ref;null!==l&&("function"===typeof l?l(null):l.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Ft())}break;case 22:var f=null!==t.memoizedState,h=t.alternate,d=null!==h&&null!==h.memoizedState;if(n=t,Y)e:if(r=n,i=f,a=null,Y)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var v=p.stateNode;i?xe(v):Se(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var m=p.stateNode;i?we(m):ke(m,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(f&&!d&&0!==(1&n.mode)){la=n;for(var g=n.child;null!==g;){for(n=la=g;null!==la;){var y=(r=la).child;switch(r.tag){case 0:case 11:case 14:case 15:da(4,r,r.return);break;case 1:ca(r,r.return);var b=r.stateNode;if("function"===typeof b.componentWillUnmount){var _=r.return;try{b.props=r.memoizedProps,b.state=r.memoizedState,b.componentWillUnmount()}catch(x){Go(r,_,x)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){Ra(n);continue}}null!==y?(y.return=r,la=y):Ra(n)}g=g.sibling}}}switch(4102&s){case 2:xa(t),t.flags&=-3;break;case 6:xa(t),t.flags&=-3,Ma(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ma(t.alternate,t);break;case 4:Ma(t.alternate,t)}}catch(x){Go(t,t.return,x)}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}}(e,r),z(e.containerInfo),e.current=r,Ta(r,e,i),zt(),Xa=u,Lt=s,qa.transition=a}else e.current=r;if(po&&(po=!1,vo=e,mo=i),0===(a=e.pendingLanes)&&(ho=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Ht,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Mo(e,Ft()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(co)throw co=!1,e=fo,fo=null,e;0!==(1&mo)&&0!==e.tag&&Ho(),0!==(1&(a=e.pendingLanes))?e===yo?go++:(go=0,yo=e):go=0,$t()}(e,t,n)}finally{qa.transition=r,Lt=n}return null}function Ho(){if(null!==vo){var e=Nt(mo),t=qa.transition,n=Lt;try{if(qa.transition=null,Lt=16>e?16:e,null===vo)var r=!1;else{if(e=vo,vo=null,mo=0,0!==(6&Xa))throw Error(o(331));var i=Xa;for(Xa|=4,la=e.current;null!==la;){var a=la,s=a.child;if(0!==(16&la.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(la=c;null!==la;){var f=la;switch(f.tag){case 0:case 11:case 15:da(8,f,a)}var h=f.child;if(null!==h)h.return=f,la=h;else for(;null!==la;){var d=(f=la).sibling,p=f.return;if(ya(f),f===c){la=null;break}if(null!==d){d.return=p,la=d;break}la=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}la=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,la=s;else e:for(;null!==la;){if(0!==(2048&(a=la).flags))switch(a.tag){case 0:case 11:case 15:da(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,la=y;break e}la=a.return}}var b=e.current;for(la=b;null!==la;){var _=(s=la).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,la=_;else e:for(s=b;null!==la;){if(0!==(2048&(u=la).flags))try{switch(u.tag){case 0:case 11:case 15:pa(9,u)}}catch(w){Go(u,u.return,w)}if(u===s){la=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,la=x;break e}la=u.return}}if(Xa=i,$t(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Ht,e)}catch(w){}r=!0}return r}finally{Lt=n,qa.transition=t}}return!1}function Wo(e,t,n){gn(e,t=ki(0,t=gi(n,t),1)),t=xo(),null!==(e=ko(e,1))&&(Rt(e,1,t),Mo(e,t))}function Go(e,t,n){if(3===e.tag)Wo(e,e,n);else for(;null!==t;){if(3===t.tag){Wo(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ho||!ho.has(r))){gn(t,e=Mi(t,e=gi(n,e),1)),e=xo(),null!==(t=ko(t,1))&&(Rt(t,1,e),Mo(t,e));break}}t=t.return}}function qo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&n,Ya===e&&($a&n)===n&&(4===Qa||3===Qa&&(130023424&$a)===$a&&500>Ft()-oo?No(e,0):ro|=n),Mo(e,t)}function Xo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=kt,0===(130023424&(kt<<=1))&&(kt=4194304)));var n=xo();null!==(e=ko(e,t))&&(Rt(e,t,n),Mo(e,n))}function Yo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xo(e,n)}function Zo(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Xo(e,n)}function $o(e,t){return It(e,t)}function Jo(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(e,t,n,r){return new Jo(e,t,n,r)}function Qo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Ko(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Qo(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,a,t);case f:s=8,i|=8;break;case h:return(e=Ko(12,n,t,2|i)).elementType=h,e.lanes=a,e;case m:return(e=Ko(13,n,t,i)).elementType=m,e.lanes=a,e;case g:return(e=Ko(19,n,t,i)).elementType=g,e.lanes=a,e;case _:return rs(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case d:s=10;break e;case p:s=9;break e;case v:s=11;break e;case y:s=14;break e;case b:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ko(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=Ko(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Ko(22,e,r,t)).elementType=_,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Ko(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=Ko(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=At(0),this.expirationTimes=At(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.identifierPrefix=r,this.onRecoverableError=i,$&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,u){return e=new os(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ko(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),e}function us(e){if(!e)return lt;e:{if(M(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(pt(n))return gt(e,n,t)}return t}function ls(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=C(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function fs(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function hs(e){return null===(e=C(e))?null:e.stateNode}function ds(){return null}return lo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ft.current)Oi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Oi=!1,function(e,t,n){switch(t.tag){case 3:qi(t),Qn();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:hr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ut(mr,1&mr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?$i(e,t,n):(ut(mr,1&mr.current),null!==(e=ia(e,t,n))?e.sibling:null);ut(mr,1&mr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(mr,mr.current),r)break;return null;case 22:case 23:return t.lanes=0,Vi(e,t,n)}return ia(e,t,n)}(e,t,n);Oi=0!==(131072&e.flags)}else Oi=!1,Wn&&0!==(1048576&t.flags)&&Un(t,Ln,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=dt(t,ct.current);cn(t,n),i=Lr(null,t,r,e,i,n);var a=Nr();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=kn,t.stateNode=i,i._reactInternals=t,Cn(t,r,e,n),t=Gi(null,t,r,!0,a,n)):(t.tag=0,Wn&&a&&Bn(t),zi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Qo(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===v)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Hi(null,t,r,e,n);break e;case 1:t=Wi(null,t,r,e,n);break e;case 11:t=Fi(null,t,r,e,n);break e;case 14:t=Ui(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Wi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(qi(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,vn(e,t),_n(t,r,null,n);var s=t.memoizedState;if(r=s.element,$&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=Xi(e,t,r,n,i=Error(o(424)));break e}for($&&(Hn=Ve(t.stateNode.containerInfo),jn=t,Wn=!0,qn=null,Gn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){t=ia(e,t,n);break e}zi(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&$n(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,j(r,i)?s=null:null!==a&&j(r,a)&&(t.flags|=32),ji(e,t),zi(e,t,s,n),t.child;case 6:return null===e&&$n(t),null;case 13:return $i(e,t,n);case 4:return hr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):zi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return zi(e,t,t.pendingProps,n),t.child;case 8:case 12:return zi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(Gt(a.value,s)){if(a.children===i.children&&!ft.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=mn(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ln(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),ln(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}zi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=fn(i)),t.flags|=1,zi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ui(e,t,r,i=en(r.type,i),n);case 15:return Bi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,cn(t,n),En(t,r,i),Cn(t,r,i,n),Gi(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Vi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(So(e,134217728,xo()),fs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=xo(),n=wo(e);So(e,n,t),fs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mt(t.pendingLanes);0!==n&&(Pt(t,1|n),Mo(t,Ft()),0===(6&Xa)&&(uo(),$t()))}break;case 13:var r=xo();Po((function(){return So(e,1,r)})),fs(e,1)}},t.batchedUpdates=function(e,t){var n=Xa;Xa|=1;try{return e(t)}finally{0===(Xa=n)&&(uo(),Xt&&$t())}},t.createComponentSelector=function(e){return{$$typeof:La,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Na,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,u){return(e=ss(n,r,!0,e,0,a,0,s,u)).context=us(null),n=e.current,(a=mn(r=xo(),i=wo(n))).callback=void 0!==t&&null!==t?t:null,gn(n,a),e.current.lanes=i,Rt(e,i,r),Mo(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Ia,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Da,value:e}},t.createTextSelector=function(e){return{$$typeof:Oa,value:e}},t.deferredUpdates=function(e){var t=Lt,n=qa.transition;try{return qa.transition=null,Lt=16,e()}finally{Lt=t,qa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Lt,o=qa.transition;try{return qa.transition=null,Lt=1,e(t,n,r,i)}finally{Lt=a,qa.transition=o,0===Xa&&uo()}},t.findAllNodes=ja,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=ja(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,u=t-1;0<=u;u--)if(t!==u){var l=e[u],c=l.x,f=c+l.width,h=l.y,d=h+l.height;if(r>=c&&a>=h&&i<=f&&s<=d){e.splice(t,1);break}if(!(r!==c||n.width!==l.width||d<a||h>s)){h>a&&(l.height+=h-a,l.y=a),d<s&&(l.height=s-h),e.splice(t,1);break}if(!(a!==h||n.height!==l.height||f<r||c>i)){c>r&&(l.width+=c-r,l.x=r),f<i&&(l.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=ls,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?R(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return ls(e)},t.flushControlled=function(e){var t=Xa;Xa|=1;var n=qa.transition,r=Lt;try{qa.transition=null,Lt=1,e()}finally{Lt=r,qa.transition=n,0===(Xa=t)&&(uo(),$t())}},t.flushPassiveEffects=Ho,t.flushSync=Po,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=Va(e=Fa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&le(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Lt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[Fa(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],u=t[s];if((5!==a.tag||!se(a))&&(Ua(a,u)&&(r.push(Ba(u)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ba(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?N(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:hs,findFiberByHostInstance:e.findFiberByHostInstance||ds,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ht=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=ja(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Lt;try{return Lt=e,t()}finally{Lt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=xo(),o=wo(i);return n=us(n),null===t.context?t.context=n:t.pendingContext=n,(t=mn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gn(i,t),null!==(e=So(i,o,a))&&yn(e,i,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},5783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(m=!1,_(e),!v)if(null!==r(l))v=!0,N(w);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=d;try{for(_(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),_(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&I(x,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,M=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function R(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?S():(k=!1,M=null)}}else k=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,S=function(){L.postMessage(null)}}else S=function(){g(R,0)};function N(e){M=e,k||(k=!0,S())}function I(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(y(E),E=-1):m=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,N(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},3100:function(e,t,n){"use strict";e.exports=n(5783)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=b.prototype=new y;_.constructor=b,v(_,g.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!k.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",x(e))for(var l=0;l<e.length;l++){var c=a+C(s=e[l],l);u+=A(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=A(s=s.value,t,i,c=a+C(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},N={transition:null},I={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(m=!1,_(e),!v)if(null!==r(l))v=!0,N(w);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=d;try{for(_(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),_(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&I(x,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,M=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function R(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?S():(k=!1,M=null)}}else k=!1}if("function"===typeof b)S=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,L=P.port2;P.port1.onmessage=R,S=function(){L.postMessage(null)}}else S=function(){g(R,0)};function N(e){M=e,k||(k=!0,S())}function I(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(m?(y(E),E=-1):m=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),v||p||(v=!0,N(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var l=a[u];if(!s(l))return!1;var c=e[l],f=t[l];if(!1===(i=n?n.call(r,c,f,l):void 0)||void 0===i&&c!==f)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return Kl},Encoder:function(){return Jl},PacketType:function(){return Zl},protocol:function(){return $l}});var t={};n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return wf},AddEquation:function(){return Wc},AddOperation:function(){return gf},AdditiveAnimationBlendMode:function(){return Yh},AdditiveBlending:function(){return Bc},AlphaFormat:function(){return eh},AlwaysDepth:function(){return uf},AlwaysStencilFunc:function(){return wd},AmbientLight:function(){return pS},AmbientLightProbe:function(){return RS},AnimationClip:function(){return zw},AnimationLoader:function(){return Xw},AnimationMixer:function(){return sk},AnimationObjectGroup:function(){return ik},AnimationUtils:function(){return kw},ArcCurve:function(){return B_},ArrayCamera:function(){return gb},ArrowHelper:function(){return Kk},Audio:function(){return jS},AudioAnalyser:function(){return YS},AudioContext:function(){return TS},AudioListener:function(){return VS},AudioLoader:function(){return CS},AxesHelper:function(){return Qk},BackSide:function(){return Ic},BasicDepthPacking:function(){return ed},BasicShadowMap:function(){return Ac},Bone:function(){return a_},BooleanKeyframeTrack:function(){return Rw},Box2:function(){return bk},Box3:function(){return Cp},Box3Helper:function(){return Zk},BoxBufferGeometry:function(){return Cm},BoxGeometry:function(){return Cm},BoxHelper:function(){return Yk},BufferAttribute:function(){return Wv},BufferGeometry:function(){return um},BufferGeometryLoader:function(){return xS},ByteType:function(){return Wf},Cache:function(){return Bw},Camera:function(){return Nm},CameraHelper:function(){return Hk},CanvasTexture:function(){return z_},CapsuleBufferGeometry:function(){return sx},CapsuleGeometry:function(){return sx},CatmullRomCurve3:function(){return q_},CineonToneMapping:function(){return xf},CircleBufferGeometry:function(){return ux},CircleGeometry:function(){return ux},ClampToEdgeWrapping:function(){return Pf},Clock:function(){return DS},Color:function(){return fp},ColorKeyframeTrack:function(){return Pw},ColorManagement:function(){return rp},CompressedTexture:function(){return O_},CompressedTextureLoader:function(){return Yw},ConeBufferGeometry:function(){return cx},ConeGeometry:function(){return cx},CubeCamera:function(){return Om},CubeReflectionMapping:function(){return Mf},CubeRefractionMapping:function(){return Ef},CubeTexture:function(){return zm},CubeTextureLoader:function(){return $w},CubeUVReflectionMapping:function(){return Af},CubicBezierCurve:function(){return $_},CubicBezierCurve3:function(){return J_},CubicInterpolant:function(){return Ew},CullFaceBack:function(){return Ec},CullFaceFront:function(){return Tc},CullFaceFrontBack:function(){return Cc},CullFaceNone:function(){return Mc},Curve:function(){return F_},CurvePath:function(){return ix},CustomBlending:function(){return Hc},CustomToneMapping:function(){return Sf},CylinderBufferGeometry:function(){return lx},CylinderGeometry:function(){return lx},Cylindrical:function(){return gk},Data3DTexture:function(){return xp},DataArrayTexture:function(){return bp},DataTexture:function(){return o_},DataTexture2DArray:function(){return cM},DataTexture3D:function(){return fM},DataTextureLoader:function(){return Jw},DataUtils:function(){return rM},DecrementStencilOp:function(){return fd},DecrementWrapStencilOp:function(){return dd},DefaultLoadingManager:function(){return jw},DepthFormat:function(){return ah},DepthStencilFormat:function(){return oh},DepthTexture:function(){return xb},DirectionalLight:function(){return dS},DirectionalLightHelper:function(){return Bk},DiscreteInterpolant:function(){return Cw},DodecahedronBufferGeometry:function(){return hx},DodecahedronGeometry:function(){return hx},DoubleSide:function(){return Dc},DstAlphaFactor:function(){return tf},DstColorFactor:function(){return rf},DynamicCopyUsage:function(){return Rd},DynamicDrawUsage:function(){return kd},DynamicReadUsage:function(){return Td},EdgesGeometry:function(){return gx},EllipseCurve:function(){return U_},EqualDepth:function(){return ff},EqualStencilFunc:function(){return gd},EquirectangularReflectionMapping:function(){return Tf},EquirectangularRefractionMapping:function(){return Cf},Euler:function(){return hv},EventDispatcher:function(){return Dd},ExtrudeBufferGeometry:function(){return Yx},ExtrudeGeometry:function(){return Yx},FileLoader:function(){return qw},FlatShading:function(){return Oc},Float16BufferAttribute:function(){return Kv},Float32BufferAttribute:function(){return Qv},Float64BufferAttribute:function(){return em},FloatType:function(){return Zf},Fog:function(){return Rb},FogExp2:function(){return Ab},Font:function(){return sM},FontLoader:function(){return oM},FramebufferTexture:function(){return D_},FrontSide:function(){return Nc},Frustum:function(){return Gm},GLBufferAttribute:function(){return hk},GLSL1:function(){return Ld},GLSL3:function(){return Nd},GreaterDepth:function(){return df},GreaterEqualDepth:function(){return hf},GreaterEqualStencilFunc:function(){return xd},GreaterStencilFunc:function(){return bd},GridHelper:function(){return Dk},Group:function(){return yb},HalfFloatType:function(){return $f},HemisphereLight:function(){return eS},HemisphereLightHelper:function(){return Ik},HemisphereLightProbe:function(){return AS},IcosahedronBufferGeometry:function(){return $x},IcosahedronGeometry:function(){return $x},ImageBitmapLoader:function(){return ES},ImageLoader:function(){return Zw},ImageUtils:function(){return hp},ImmediateRenderObject:function(){return uM},IncrementStencilOp:function(){return cd},IncrementWrapStencilOp:function(){return hd},InstancedBufferAttribute:function(){return c_},InstancedBufferGeometry:function(){return _S},InstancedInterleavedBuffer:function(){return fk},InstancedMesh:function(){return v_},Int16BufferAttribute:function(){return Yv},Int32BufferAttribute:function(){return $v},Int8BufferAttribute:function(){return Gv},IntType:function(){return Xf},InterleavedBuffer:function(){return Lb},InterleavedBufferAttribute:function(){return Ib},Interpolant:function(){return Mw},InterpolateDiscrete:function(){return Vh},InterpolateLinear:function(){return jh},InterpolateSmooth:function(){return Hh},InvertStencilOp:function(){return pd},KeepStencilOp:function(){return ud},KeyframeTrack:function(){return Aw},LOD:function(){return Kb},LatheBufferGeometry:function(){return ox},LatheGeometry:function(){return ox},Layers:function(){return dv},LessDepth:function(){return lf},LessEqualDepth:function(){return cf},LessEqualStencilFunc:function(){return yd},LessStencilFunc:function(){return md},Light:function(){return Qw},LightProbe:function(){return gS},Line:function(){return w_},Line3:function(){return wk},LineBasicMaterial:function(){return m_},LineCurve:function(){return K_},LineCurve3:function(){return Q_},LineDashedMaterial:function(){return gw},LineLoop:function(){return E_},LineSegments:function(){return M_},LinearEncoding:function(){return Kh},LinearFilter:function(){return Ff},LinearInterpolant:function(){return Tw},LinearMipMapLinearFilter:function(){return jf},LinearMipMapNearestFilter:function(){return Bf},LinearMipmapLinearFilter:function(){return Vf},LinearMipmapNearestFilter:function(){return Uf},LinearSRGBColorSpace:function(){return od},LinearToneMapping:function(){return bf},Loader:function(){return Hw},LoaderUtils:function(){return bS},LoadingManager:function(){return Vw},LoopOnce:function(){return Fh},LoopPingPong:function(){return Bh},LoopRepeat:function(){return Uh},LuminanceAlphaFormat:function(){return ih},LuminanceFormat:function(){return rh},MOUSE:function(){return Sc},Material:function(){return Bv},MaterialLoader:function(){return yS},MathUtils:function(){return Xd},Matrix3:function(){return Zd},Matrix4:function(){return nv},MaxEquation:function(){return Yc},Mesh:function(){return Em},MeshBasicMaterial:function(){return Vv},MeshDepthMaterial:function(){return fb},MeshDistanceMaterial:function(){return hb},MeshLambertMaterial:function(){return vw},MeshMatcapMaterial:function(){return mw},MeshNormalMaterial:function(){return pw},MeshPhongMaterial:function(){return hw},MeshPhysicalMaterial:function(){return fw},MeshStandardMaterial:function(){return cw},MeshToonMaterial:function(){return dw},MinEquation:function(){return Xc},MirroredRepeatWrapping:function(){return Lf},MixOperation:function(){return mf},MultiplyBlending:function(){return jc},MultiplyOperation:function(){return vf},NearestFilter:function(){return Nf},NearestMipMapLinearFilter:function(){return zf},NearestMipMapNearestFilter:function(){return Df},NearestMipmapLinearFilter:function(){return Of},NearestMipmapNearestFilter:function(){return If},NeverDepth:function(){return sf},NeverStencilFunc:function(){return vd},NoBlending:function(){return Fc},NoColorSpace:function(){return id},NoToneMapping:function(){return yf},NormalAnimationBlendMode:function(){return Xh},NormalBlending:function(){return Uc},NotEqualDepth:function(){return pf},NotEqualStencilFunc:function(){return _d},NumberKeyframeTrack:function(){return Lw},Object3D:function(){return Tv},ObjectLoader:function(){return wS},ObjectSpaceNormalMap:function(){return rd},OctahedronBufferGeometry:function(){return Jx},OctahedronGeometry:function(){return Jx},OneFactor:function(){return $c},OneMinusDstAlphaFactor:function(){return nf},OneMinusDstColorFactor:function(){return af},OneMinusSrcAlphaFactor:function(){return ef},OneMinusSrcColorFactor:function(){return Kc},OrthographicCamera:function(){return ig},PCFShadowMap:function(){return Rc},PCFSoftShadowMap:function(){return Pc},PMREMGenerator:function(){return dg},ParametricGeometry:function(){return iM},Path:function(){return ax},PerspectiveCamera:function(){return Im},Plane:function(){return jm},PlaneBufferGeometry:function(){return Ym},PlaneGeometry:function(){return Ym},PlaneHelper:function(){return $k},PointLight:function(){return fS},PointLightHelper:function(){return Rk},Points:function(){return L_},PointsMaterial:function(){return T_},PolarGridHelper:function(){return Ok},PolyhedronBufferGeometry:function(){return fx},PolyhedronGeometry:function(){return fx},PositionalAudio:function(){return XS},PropertyBinding:function(){return rk},PropertyMixer:function(){return ZS},QuadraticBezierCurve:function(){return ex},QuadraticBezierCurve3:function(){return tx},Quaternion:function(){return kp},QuaternionKeyframeTrack:function(){return Iw},QuaternionLinearInterpolant:function(){return Nw},REVISION:function(){return wc},RGBADepthPacking:function(){return td},RGBAFormat:function(){return nh},RGBAIntegerFormat:function(){return fh},RGBA_ASTC_10x10_Format:function(){return Ih},RGBA_ASTC_10x5_Format:function(){return Ph},RGBA_ASTC_10x6_Format:function(){return Lh},RGBA_ASTC_10x8_Format:function(){return Nh},RGBA_ASTC_12x10_Format:function(){return Dh},RGBA_ASTC_12x12_Format:function(){return Oh},RGBA_ASTC_4x4_Format:function(){return Sh},RGBA_ASTC_5x4_Format:function(){return kh},RGBA_ASTC_5x5_Format:function(){return Mh},RGBA_ASTC_6x5_Format:function(){return Eh},RGBA_ASTC_6x6_Format:function(){return Th},RGBA_ASTC_8x5_Format:function(){return Ch},RGBA_ASTC_8x6_Format:function(){return Ah},RGBA_ASTC_8x8_Format:function(){return Rh},RGBA_BPTC_Format:function(){return zh},RGBA_ETC2_EAC_Format:function(){return wh},RGBA_PVRTC_2BPPV1_Format:function(){return bh},RGBA_PVRTC_4BPPV1_Format:function(){return yh},RGBA_S3TC_DXT1_Format:function(){return dh},RGBA_S3TC_DXT3_Format:function(){return ph},RGBA_S3TC_DXT5_Format:function(){return vh},RGBFormat:function(){return th},RGB_ETC1_Format:function(){return _h},RGB_ETC2_Format:function(){return xh},RGB_PVRTC_2BPPV1_Format:function(){return gh},RGB_PVRTC_4BPPV1_Format:function(){return mh},RGB_S3TC_DXT1_Format:function(){return hh},RGFormat:function(){return lh},RGIntegerFormat:function(){return ch},RawShaderMaterial:function(){return lw},Ray:function(){return tv},Raycaster:function(){return dk},RectAreaLight:function(){return vS},RedFormat:function(){return sh},RedIntegerFormat:function(){return uh},ReinhardToneMapping:function(){return _f},RepeatWrapping:function(){return Rf},ReplaceStencilOp:function(){return ld},ReverseSubtractEquation:function(){return qc},RingBufferGeometry:function(){return Kx},RingGeometry:function(){return Kx},SRGBColorSpace:function(){return ad},Scene:function(){return Pb},ShaderChunk:function(){return Zm},ShaderLib:function(){return Jm},ShaderMaterial:function(){return Lm},ShadowMaterial:function(){return uw},Shape:function(){return yx},ShapeBufferGeometry:function(){return Qx},ShapeGeometry:function(){return Qx},ShapePath:function(){return eM},ShapeUtils:function(){return Gx},ShortType:function(){return Gf},Skeleton:function(){return l_},SkeletonHelper:function(){return Ck},SkinnedMesh:function(){return i_},SmoothShading:function(){return zc},Source:function(){return dp},Sphere:function(){return Xp},SphereBufferGeometry:function(){return ew},SphereGeometry:function(){return ew},Spherical:function(){return mk},SphericalHarmonics3:function(){return mS},SplineCurve:function(){return nx},SpotLight:function(){return oS},SpotLightHelper:function(){return kk},Sprite:function(){return Yb},SpriteMaterial:function(){return Db},SrcAlphaFactor:function(){return Qc},SrcAlphaSaturateFactor:function(){return of},SrcColorFactor:function(){return Jc},StaticCopyUsage:function(){return Ad},StaticDrawUsage:function(){return Sd},StaticReadUsage:function(){return Ed},StereoCamera:function(){return IS},StreamCopyUsage:function(){return Pd},StreamDrawUsage:function(){return Md},StreamReadUsage:function(){return Cd},StringKeyframeTrack:function(){return Dw},SubtractEquation:function(){return Gc},SubtractiveBlending:function(){return Vc},TOUCH:function(){return kc},TangentSpaceNormalMap:function(){return nd},TetrahedronBufferGeometry:function(){return tw},TetrahedronGeometry:function(){return tw},TextGeometry:function(){return aM},Texture:function(){return mp},TextureLoader:function(){return Kw},TorusBufferGeometry:function(){return nw},TorusGeometry:function(){return nw},TorusKnotBufferGeometry:function(){return rw},TorusKnotGeometry:function(){return rw},Triangle:function(){return Fv},TriangleFanDrawMode:function(){return Jh},TriangleStripDrawMode:function(){return $h},TrianglesDrawMode:function(){return Zh},TubeBufferGeometry:function(){return iw},TubeGeometry:function(){return iw},UVMapping:function(){return kf},Uint16BufferAttribute:function(){return Zv},Uint32BufferAttribute:function(){return Jv},Uint8BufferAttribute:function(){return qv},Uint8ClampedBufferAttribute:function(){return Xv},Uniform:function(){return uk},UniformsGroup:function(){return ck},UniformsLib:function(){return $m},UniformsUtils:function(){return Pm},UnsignedByteType:function(){return Hf},UnsignedInt248Type:function(){return Qf},UnsignedIntType:function(){return Yf},UnsignedShort4444Type:function(){return Jf},UnsignedShort5551Type:function(){return Kf},UnsignedShortType:function(){return qf},VSMShadowMap:function(){return Lc},Vector2:function(){return Yd},Vector3:function(){return Mp},Vector4:function(){return gp},VectorKeyframeTrack:function(){return Ow},VideoTexture:function(){return I_},WebGL1Renderer:function(){return Tb},WebGL3DRenderTarget:function(){return wp},WebGLArrayRenderTarget:function(){return _p},WebGLCubeRenderTarget:function(){return Fm},WebGLMultipleRenderTargets:function(){return Sp},WebGLMultisampleRenderTarget:function(){return lM},WebGLRenderTarget:function(){return yp},WebGLRenderer:function(){return Eb},WebGLUtils:function(){return mb},WireframeGeometry:function(){return aw},WrapAroundEnding:function(){return qh},ZeroCurvatureEnding:function(){return Wh},ZeroFactor:function(){return Zc},ZeroSlopeEnding:function(){return Gh},ZeroStencilOp:function(){return sd},_SRGBAFormat:function(){return Id},sRGBEncoding:function(){return Qh}});var r,i=n(2791),a=n(1250);function o(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||u(e,t)||l()}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var h=function(e){return e};var d="beforeunload",p="popstate";function v(e){e.preventDefault(),e.returnValue=""}function m(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function g(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function b(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var _=(0,i.createContext)(null);var x=(0,i.createContext)(null);var w=(0,i.createContext)({outlet:null,matches:[]});function S(e,t){if(!e)throw new Error(t)}function k(e,t,n){void 0===n&&(n="/");var r=L(("string"===typeof t?b(t):t).pathname||"/",n);if(null==r)return null;var i=M(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=A(i[o],r);return a}function M(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||S(!1),a.relativePath=a.relativePath.slice(r.length));var o=N([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&S(!1),M(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:s})})),t}var E=/^:\w+$/,T=function(e){return"*"===e};function C(e,t){var n=e.split("/"),r=n.length;return n.some(T)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!T(e)})).reduce((function(e,t){return e+(E.test(t)?3:""===t?1:10)}),r)}function A(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=R({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);var f=s.route;a.push({params:r,pathname:N([i,c.pathname]),pathnameBase:I(N([i,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(i=N([i,c.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{});return{params:f,pathname:s,pathnameBase:u,pattern:e}}function P(e,t,n){var r,i="string"===typeof e?b(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?b(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:D(a),hash:O(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var N=function(e){return e.join("/").replace(/\/\/+/g,"/")},I=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},D=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},O=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function z(e){F()||S(!1);var t=(0,i.useContext)(_),n=t.basename,r=t.navigator,a=V(e),o=a.hash,s=a.pathname,u=a.search,l=s;if("/"!==n){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?b(e).pathname:e.pathname}(e),f=null!=c&&c.endsWith("/");l="/"===s?n+(f?"/":""):N([n,s])}return r.createHref({pathname:l,search:u,hash:o})}function F(){return null!=(0,i.useContext)(x)}function U(){return F()||S(!1),(0,i.useContext)(x).location}function B(){F()||S(!1);var e=(0,i.useContext)(_),t=e.basename,n=e.navigator,r=(0,i.useContext)(w).matches,a=U().pathname,o=JSON.stringify(r.map((function(e){return e.pathnameBase}))),s=(0,i.useRef)(!1);return(0,i.useEffect)((function(){s.current=!0})),(0,i.useCallback)((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=P(e,JSON.parse(o),a);"/"!==t&&(i.pathname=N([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a])}function V(e){var t=(0,i.useContext)(w).matches,n=U().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,i.useMemo)((function(){return P(e,JSON.parse(r),n)}),[e,r,n])}function j(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,i.createElement)(w.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function H(e){S(!1)}function W(e){var t=e.basename,n=void 0===t?"/":t,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,l=void 0===u?r.Pop:u,c=e.navigator,f=e.static,h=void 0!==f&&f;F()&&S(!1);var d=I(n),p=(0,i.useMemo)((function(){return{basename:d,navigator:c,static:h}}),[d,c,h]);"string"===typeof s&&(s=b(s));var v=s,m=v.pathname,g=void 0===m?"/":m,y=v.search,w=void 0===y?"":y,k=v.hash,M=void 0===k?"":k,E=v.state,T=void 0===E?null:E,C=v.key,A=void 0===C?"default":C,R=(0,i.useMemo)((function(){var e=L(g,d);return null==e?null:{pathname:e,search:w,hash:M,state:T,key:A}}),[d,g,w,M,T,A]);return null==R?null:(0,i.createElement)(_.Provider,{value:p},(0,i.createElement)(x.Provider,{children:o,value:{location:R,navigationType:l}}))}function G(e){var t=e.children,n=e.location;return function(e,t){F()||S(!1);var n,r=(0,i.useContext)(w).matches,a=r[r.length-1],o=a?a.params:{},s=(a&&a.pathname,a?a.pathnameBase:"/"),u=(a&&a.route,U());if(t){var l,c="string"===typeof t?b(t):t;"/"===s||(null==(l=c.pathname)?void 0:l.startsWith(s))||S(!1),n=c}else n=u;var f=n.pathname||"/",h=k(e,{pathname:"/"===s?f:f.slice(s.length)||"/"});return j(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:N([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:N([s,e.pathnameBase])})})),r)}(q(t),n)}function q(e){var t=[];return i.Children.forEach(e,(function(e){if((0,i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==H&&S(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=q(e.props.children)),t.push(n)}else t.push.apply(t,q(e.props.children))})),t}function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Z=["onClick","reloadDocument","replace","state","target","to"];function $(e){var t=e.basename,n=e.children,a=e.window,o=(0,i.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,i=n.history;function a(){var e=n.location,t=e.pathname,r=e.search,a=e.hash,o=i.state||{};return[o.idx,h({pathname:t,search:r,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;n.addEventListener(p,(function(){if(o)x.call(o),o=null;else{var e=r.Pop,t=a(),n=t[0],i=t[1];if(x.length){if(null!=n){var s=l-n;s&&(o={action:e,location:i,retry:function(){T(-1*s)}},T(s))}}else E(e)}}));var s=r.Pop,u=a(),l=u[0],c=u[1],_=m(),x=m();function w(e){return"string"===typeof e?e:y(e)}function S(e,t){return void 0===t&&(t=null),h(f({pathname:c.pathname,hash:"",search:""},"string"===typeof e?b(e):e,{state:t,key:g()}))}function k(e,t){return[{usr:e.state,key:e.key,idx:t},w(e)]}function M(e,t,n){return!x.length||(x.call({action:e,location:t,retry:n}),!1)}function E(e){s=e;var t=a();l=t[0],c=t[1],_.call({action:s,location:c})}function T(e){i.go(e)}null==l&&(l=0,i.replaceState(f({},i.state,{idx:l}),""));var C={get action(){return s},get location(){return c},createHref:w,push:function e(t,a){var o=r.Push,s=S(t,a);if(M(o,s,(function(){e(t,a)}))){var u=k(s,l+1),c=u[0],f=u[1];try{i.pushState(c,"",f)}catch(h){n.location.assign(f)}E(o)}},replace:function e(t,n){var a=r.Replace,o=S(t,n);if(M(a,o,(function(){e(t,n)}))){var s=k(o,l),u=s[0],c=s[1];i.replaceState(u,"",c),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return _.push(e)},block:function(e){var t=x.push(e);return 1===x.length&&n.addEventListener(d,v),function(){t(),x.length||n.removeEventListener(d,v)}}};return C}({window:a}));var s=o.current,u=c((0,i.useState)({action:s.action,location:s.location}),2),l=u[0],_=u[1];return(0,i.useLayoutEffect)((function(){return s.listen(_)}),[s]),(0,i.createElement)(W,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s})}var J=(0,i.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,l=e.to,c=Y(e,Z),f=z(l),h=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,o=n.state,s=B(),u=U(),l=V(e);return(0,i.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||y(u)===y(l);s(e,{replace:n,state:o})}}),[u,s,l,a,o,r,e])}(l,{replace:o,state:s,target:u});return(0,i.createElement)("a",X({},c,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||r||h(e)},ref:t,target:u}))}));function K(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Q(e){return function(e){if(Array.isArray(e))return s(e)}(e)||K(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function te(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){te(a,r,i,o,s,"next",e)}function s(e){te(a,r,i,o,s,"throw",e)}o(void 0)}))}}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function oe(e,t,n){return oe=ae()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},oe.apply(null,arguments)}function se(e){var t="function"===typeof Map?new Map:void 0;return se=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return oe(e,arguments,re(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ie(r,e)},se(e)}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function le(){le=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return M()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=_(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var c={};function f(){}function h(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(k([])));m&&m!==t&&n.call(m,i)&&(p=m);var g=d.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==ue(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function _(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=d,s(g,"constructor",d),s(d,"constructor",h),h.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function ce(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}function me(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function ge(e){var t=ae();return function(){var n,r=re(e);if(t){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var xe=n(4164),we=["override"],Se=["cachePolicyForParams_UNSTABLE"],ke=le().mark(tn),Me=le().mark(dr);var Ee=function(e){var t=new Error(e);if(void 0===t.stack)try{throw t}catch(ET){}return t};var Te=function(e){return!!e&&"function"===typeof e.then};var Ce=function(e,t){if(null!=e)return e;throw Ee(null!==t&&void 0!==t?t:"Got unexpected null or undefined")};function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=function(){function e(){ye(this,e)}return _e(e,[{key:"getValue",value:function(){throw Ee("BaseLoadable")}},{key:"toPromise",value:function(){throw Ee("BaseLoadable")}},{key:"valueMaybe",value:function(){throw Ee("BaseLoadable")}},{key:"valueOrThrow",value:function(){throw Ee('Loadable expected value, but in "'.concat(this.state,'" state'))}},{key:"promiseMaybe",value:function(){throw Ee("BaseLoadable")}},{key:"promiseOrThrow",value:function(){throw Ee('Loadable expected promise, but in "'.concat(this.state,'" state'))}},{key:"errorMaybe",value:function(){throw Ee("BaseLoadable")}},{key:"errorOrThrow",value:function(){throw Ee('Loadable expected error, but in "'.concat(this.state,'" state'))}},{key:"is",value:function(e){return e.state===this.state&&e.contents===this.contents}},{key:"map",value:function(e){throw Ee("BaseLoadable")}}]),e}(),Pe=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),Ae(pe(r=t.call(this)),"state","hasValue"),Ae(pe(r),"contents",void 0),r.contents=e,r}return _e(n,[{key:"getValue",value:function(){return this.contents}},{key:"toPromise",value:function(){return Promise.resolve(this.contents)}},{key:"valueMaybe",value:function(){return this.contents}},{key:"valueOrThrow",value:function(){return this.contents}},{key:"promiseMaybe",value:function(){}},{key:"errorMaybe",value:function(){}},{key:"map",value:function(e){var t=this;try{var n=e(this.contents);return Te(n)?Oe(n):Ue(n)?n:Ie(n)}catch(r){return Te(r)?Oe(r.next((function(){return t.map(e)}))):De(r)}}}]),n}(Re),Le=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),Ae(pe(r=t.call(this)),"state","hasError"),Ae(pe(r),"contents",void 0),r.contents=e,r}return _e(n,[{key:"getValue",value:function(){throw this.contents}},{key:"toPromise",value:function(){return Promise.reject(this.contents)}},{key:"valueMaybe",value:function(){}},{key:"promiseMaybe",value:function(){}},{key:"errorMaybe",value:function(){return this.contents}},{key:"errorOrThrow",value:function(){return this.contents}},{key:"map",value:function(e){return this}}]),n}(Re),Ne=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),Ae(pe(r=t.call(this)),"state","loading"),Ae(pe(r),"contents",void 0),r.contents=e,r}return _e(n,[{key:"getValue",value:function(){throw this.contents}},{key:"toPromise",value:function(){return this.contents}},{key:"valueMaybe",value:function(){}},{key:"promiseMaybe",value:function(){return this.contents}},{key:"promiseOrThrow",value:function(){return this.contents}},{key:"errorMaybe",value:function(){}},{key:"map",value:function(e){var t=this;return Oe(this.contents.then((function(t){var n=e(t);if(Ue(n)){var r=n;switch(r.state){case"hasValue":case"loading":return r.contents;case"hasError":throw r.contents}}return n})).catch((function(n){if(Te(n))return n.then((function(){return t.map(e).contents}));throw n})))}}]),n}(Re);function Ie(e){return Object.freeze(new Pe(e))}function De(e){return Object.freeze(new Le(e))}function Oe(e){return Object.freeze(new Ne(e))}function ze(){return Object.freeze(new Ne(new Promise((function(){}))))}function Fe(e){var t=(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((function(t){return e[t]}))).map((function(e){return Ue(e)?e:Te(e)?Oe(e):Ie(e)})),n=function(e){return e.every((function(e){return"hasValue"===e.state}))?Ie(e.map((function(e){return e.contents}))):e.some((function(e){return"hasError"===e.state}))?De(Ce(e.find((function(e){return"hasError"===e.state})),"Invalid loadable passed to loadableAll").contents):Oe(Promise.all(e.map((function(e){return e.contents}))))}(t);return Array.isArray(e)?n:n.map((function(t){return Object.getOwnPropertyNames(e).reduce((function(e,n,r){return de(de({},e),{},fe({},n,t[r]))}),{})}))}function Ue(e){return e instanceof Re}var Be={of:function(e){return Te(e)?Oe(e):Ue(e)?e:Ie(e)},error:function(e){return De(e)},loading:function(){return ze()},all:Fe,isLoadable:Ue},Ve={loadableWithValue:Ie,loadableWithError:De,loadableWithPromise:Oe,loadableLoading:ze,loadableAll:Fe,isLoadable:Ue,RecoilLoadable:Be},je=Ve.loadableWithValue,He=Ve.loadableWithError,We=Ve.loadableWithPromise,Ge=Ve.loadableLoading,qe=Ve.loadableAll,Xe=Ve.isLoadable,Ye=Ve.RecoilLoadable,Ze=Object.freeze({__proto__:null,loadableWithValue:je,loadableWithError:He,loadableWithPromise:We,loadableLoading:Ge,loadableAll:qe,isLoadable:Xe,RecoilLoadable:Ye}),$e=(new Map).set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function Je(e){var t;return null!==(t=$e.get(e))&&void 0!==t&&t}Je.setPass=function(e){$e.set(e,!0)},Je.setFail=function(e){$e.set(e,!1)},Je.clear=function(){$e.clear()};var Ke,Qe,et,tt=Je,nt=null!==(Ke=i.createMutableSource)&&void 0!==Ke?Ke:i.unstable_createMutableSource,rt=null!==(Qe=i.useMutableSource)&&void 0!==Qe?Qe:i.unstable_useMutableSource,it=null!==(et=i.useSyncExternalStore)&&void 0!==et?et:i.unstable_useSyncExternalStore;var at={createMutableSource:nt,useMutableSource:rt,useSyncExternalStore:it,reactMode:function(){return tt("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:tt("recoil_sync_external_store")&&null!=it?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:tt("recoil_mutable_source")&&null!=rt&&"undefined"!==typeof window&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?tt("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:tt("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}},isFastRefreshEnabled:function(){return!1}},ot=function(){function e(t){ye(this,e),Ae(this,"key",void 0),this.key=t}return _e(e,[{key:"toJSON",value:function(){return{key:this.key}}}]),e}(),st=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(ot),ut=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(ot);var lt={AbstractRecoilValue:ot,RecoilState:st,RecoilValueReadOnly:ut,isRecoilValue:function(e){return e instanceof st||e instanceof ut}},ct=lt.AbstractRecoilValue,ft=lt.RecoilState,ht=lt.RecoilValueReadOnly,dt=lt.isRecoilValue,pt=Object.freeze({__proto__:null,AbstractRecoilValue:ct,RecoilState:ft,RecoilValueReadOnly:ht,isRecoilValue:dt});var vt=function(e){};var mt=function(e,t){return le().mark((function n(){var r,i,a,o;return le().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0,i=ce(e),n.prev=2,i.s();case 4:if((a=i.n()).done){n.next=10;break}return o=a.value,n.next=8,t(o,r++);case 8:n.next=4;break;case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),i.e(n.t0);case 15:return n.prev=15,i.f(),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[2,12,15,18]])}))()};var gt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.error,null},yt=gt,bt=_e((function e(){ye(this,e)})),_t=new bt,xt=new Map,wt=new Map;var St=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(se(Error));var kt=new Map;function Mt(e){return kt.get(e)}var Et={nodes:xt,recoilValues:wt,registerNode:function(e){if(xt.has(e.key)){var t='Duplicate atom key "'.concat(e.key,'". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.');console.warn(t)}xt.set(e.key,e);var n=null==e.set?new pt.RecoilValueReadOnly(e.key):new pt.RecoilState(e.key);return wt.set(e.key,n),n},getNode:function(e){var t=xt.get(e);if(null==t)throw new St('Missing definition for RecoilValue: "'.concat(e,'""'));return t},getNodeMaybe:function(e){return xt.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(tt("recoil_memory_managament_2020")){var n,r=xt.get(e);if(null!==r&&void 0!==r&&null!==(t=r.shouldDeleteConfigOnRelease)&&void 0!==t&&t.call(r))xt.delete(e),null===(n=Mt(e))||void 0===n||n(),kt.delete(e)}},setConfigDeletionHandler:function(e,t){tt("recoil_memory_managament_2020")&&(void 0===t?kt.delete(e):kt.set(e,t))},getConfigDeletionHandler:Mt,recoilValuesForKeys:function(e){return mt(e,(function(e){return Ce(wt.get(e))}))},NodeMissingError:St,DefaultValue:bt,DEFAULT_VALUE:_t};var Tt={enqueueExecution:function(e,t){t()}};var Ct,At,Rt=(Ct=function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),i=r-1,a=r/2,o=r/4,s={},u=function(e){return function(){return e}},l=n.hash=function(e){var n="undefined"===typeof e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,i=0,a=e.length;i<a;++i)r=(r<<5)-r+e.charCodeAt(i)|0;return r},c=function(e,t){return t>>>e&i},f=function(e){return 1<<e},h=function(e,t){return function(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}(e&t-1)},d=function(e,t,n,r){var i=r;if(!e){var a=r.length;i=new Array(a);for(var o=0;o<a;++o)i[o]=r[o]}return i[t]=n,i},p=function(e,t,n){var r=n.length-1,i=0,a=0,o=n;if(e)i=a=t;else for(o=new Array(r);i<t;)o[a++]=n[i++];for(++i;i<=r;)o[a++]=n[i++];return e&&(o.length=r),o},v={__hamt_isEmpty:!0},m=function(e){return e===v||e&&e.__hamt_isEmpty},g=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:S}},y=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:k}},b=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:M}},_=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:E}},x=function e(t,n,r,i,a,o){if(r===a)return y(t,r,[o,i]);var s=c(n,r),u=c(n,a);return b(t,f(s)|f(u),s===u?[e(t,n+5,r,i,a,o)]:s<u?[i,o]:[o,i])},w=function(e,t){return e===t.edit},S=function(e,t,n,r,i,a,o){if(t(a,this.key)){var u=r(this.value);return u===this.value?this:u===s?(--o.value,v):w(e,this)?(this.value=u,this):g(e,i,a,u)}var l=r();return l===s?this:(++o.value,x(e,n,this.hash,this,i,g(e,i,a,l)))},k=function(e,t,n,r,i,a,o){if(i===this.hash){var u=function(e,t,n,r,i,a,o,u){for(var l=i.length,c=0;c<l;++c){var f=i[c];if(n(o,f.key)){var h=f.value,v=a(h);return v===h?i:v===s?(--u.value,p(e,c,i)):d(e,c,g(t,r,o,v),i)}}var m=a();return m===s?i:(++u.value,d(e,l,g(t,r,o,m),i))}(w(e,this),e,t,this.hash,this.children,r,a,o);return u===this.children?this:u.length>1?y(e,this.hash,u):u[0]}var l=r();return l===s?this:(++o.value,x(e,n,this.hash,this,i,g(e,i,a,l)))},M=function(e,t,n,r,i,o,s){var u=this.mask,l=this.children,g=c(n,i),y=f(g),x=h(u,y),S=u&y,k=S?l[x]:v,M=k._modify(e,t,n+5,r,i,o,s);if(k===M)return this;var E,T=w(e,this),C=u,A=void 0;if(S&&m(M)){if(!(C&=~y))return v;if(l.length<=2&&((E=l[1^x])===v||1===E.type||2===E.type))return l[1^x];A=p(T,x,l)}else if(S||m(M))A=d(T,x,M,l);else{if(l.length>=a)return function(e,t,n,r,i){for(var a=[],o=r,s=0,u=0;o;++u)1&o&&(a[u]=i[s++]),o>>>=1;return a[t]=n,_(e,s+1,a)}(e,g,M,u,l);C|=y,A=function(e,t,n,r){var i=r.length;if(e){for(var a=i;a>=t;)r[a--]=r[a];return r[t]=n,r}for(var o=0,s=0,u=new Array(i+1);o<t;)u[s++]=r[o++];for(u[t]=n;o<i;)u[++s]=r[o++];return u}(T,x,M,l)}return T?(this.mask=C,this.children=A,this):b(e,C,A)},E=function(e,t,n,r,i,a,s){var u=this.size,l=this.children,f=c(n,i),h=l[f],p=(h||v)._modify(e,t,n+5,r,i,a,s);if(h===p)return this;var g=w(e,this),y=void 0;if(m(h)&&!m(p))++u,y=d(g,f,p,l);else if(!m(h)&&m(p)){if(--u<=o)return function(e,t,n,r){for(var i=new Array(t-1),a=0,o=0,s=0,u=r.length;s<u;++s)if(s!==n){var l=r[s];l&&!m(l)&&(i[a++]=l,o|=1<<s)}return b(e,o,i)}(e,u,f,l);y=d(g,f,v,l)}else y=d(g,f,p,l);return g?(this.size=u,this.children=y,this):_(e,u,y)};function T(e,t,n,r,i){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=i}v._modify=function(e,t,n,r,i,a,o){var u=r();return u===s?v:(++o.value,g(e,i,a,u))},T.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new T(this._editable,this._edit,this._config,e,t)};var C=n.tryGetHash=function(e,t,n,r){for(var i=r._root,a=0,o=r._config.keyEq;;)switch(i.type){case 1:return o(n,i.key)?i.value:e;case 2:if(t===i.hash)for(var s=i.children,u=0,l=s.length;u<l;++u){var d=s[u];if(o(n,d.key))return d.value}return e;case 3:var p=c(a,t),v=f(p);if(i.mask&v){i=i.children[h(i.mask,v)],a+=5;break}return e;case 4:if(i=i.children[c(a,t)]){a+=5;break}return e;default:return e}};T.prototype.tryGetHash=function(e,t,n){return C(e,t,n,this)};var A=n.tryGet=function(e,t,n){return C(e,n._config.hash(t),t,n)};T.prototype.tryGet=function(e,t){return A(e,t,this)};var R=n.getHash=function(e,t,n){return C(void 0,e,t,n)};T.prototype.getHash=function(e,t){return R(e,t,this)},n.get=function(e,t){return C(void 0,t._config.hash(e),e,t)},T.prototype.get=function(e,t){return A(t,e,this)};var P=n.has=function(e,t,n){return C(s,e,t,n)!==s};T.prototype.hasHash=function(e,t){return P(e,t,this)};var L=n.has=function(e,t){return P(t._config.hash(e),e,t)};T.prototype.has=function(e){return L(e,this)};var N=function(e,t){return e===t};n.make=function(e){return new T(0,0,{keyEq:e&&e.keyEq||N,hash:e&&e.hash||l},v,0)},n.empty=n.make();var I=n.isEmpty=function(e){return e&&!!m(e._root)};T.prototype.isEmpty=function(){return I(this)};var D=n.modifyHash=function(e,t,n,r){var i={value:r._size},a=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,i);return r.setTree(a,i.value)};T.prototype.modifyHash=function(e,t,n){return D(n,e,t,this)};var O=n.modify=function(e,t,n){return D(e,n._config.hash(t),t,n)};T.prototype.modify=function(e,t){return O(t,e,this)};var z=n.setHash=function(e,t,n,r){return D(u(n),e,t,r)};T.prototype.setHash=function(e,t,n){return z(e,t,n,this)};var F=n.set=function(e,t,n){return z(n._config.hash(e),e,t,n)};T.prototype.set=function(e,t){return F(e,t,this)};var U=u(s),B=n.removeHash=function(e,t,n){return D(U,e,t,n)};T.prototype.removeHash=T.prototype.deleteHash=function(e,t){return B(e,t,this)};var V=n.remove=function(e,t){return B(t._config.hash(e),e,t)};T.prototype.remove=T.prototype.delete=function(e){return V(e,this)};var j=n.beginMutation=function(e){return new T(e._editable+1,e._edit+1,e._config,e._root,e._size)};T.prototype.beginMutation=function(){return j(this)};var H=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};T.prototype.endMutation=function(){return H(this)};var W=n.mutate=function(e,t){var n=j(t);return e(n),H(n)};T.prototype.mutate=function(e){return W(e,this)};var G=function(e){return e&&q(e[0],e[1],e[2],e[3],e[4])},q=function(e,t,n,r,i){for(;n<e;){var a=t[n++];if(a&&!m(a))return X(a,r,[e,t,n,r,i])}return G(i)},X=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return q(r.length,r,0,t,n);default:return G(n)}},Y={done:!0};function Z(e){this.v=e}Z.prototype.next=function(){if(!this.v)return Y;var e=this.v;return this.v=G(e.rest),e},Z.prototype[Symbol.iterator]=function(){return this};var $=function(e,t){return new Z(X(e._root,t))},J=function(e){return[e.key,e.value]},K=n.entries=function(e){return $(e,J)};T.prototype.entries=T.prototype[Symbol.iterator]=function(){return K(this)};var Q=function(e){return e.key},ee=n.keys=function(e){return $(e,Q)};T.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=T.prototype.values=function(e){return $(e,te)};T.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var i=[r.children],a=void 0;a=i.pop();)for(var o=0,s=a.length;o<s;){var u=a[o++];u&&u.type&&(1===u.type?t=e(t,u.value,u.key):i.push(u.children))}return t};T.prototype.fold=function(e,t){return re(e,t,this)};var ie=n.forEach=function(e,t){return re((function(n,r,i){return e(r,i,t)}),null,t)};T.prototype.forEach=function(e){return ie(e,this)};var ae=n.count=function(e){return e._size};T.prototype.count=function(){return ae(this)},Object.defineProperty(T.prototype,"size",{get:T.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n},Ct(At={exports:{}},At.exports),At.exports),Pt=function(){function e(t){ye(this,e),Ae(this,"_map",void 0),this._map=new Map(null===t||void 0===t?void 0:t.entries())}return _e(e,[{key:"keys",value:function(){return this._map.keys()}},{key:"entries",value:function(){return this._map.entries()}},{key:"get",value:function(e){return this._map.get(e)}},{key:"has",value:function(e){return this._map.has(e)}},{key:"set",value:function(e,t){return this._map.set(e,t),this}},{key:"delete",value:function(e){return this._map.delete(e),this}},{key:"clone",value:function(){return Nt(this)}},{key:"toMap",value:function(){return new Map(this._map)}}]),e}(),Lt=function(){function e(t){if(ye(this,e),Ae(this,"_hamt",Rt.empty.beginMutation()),t instanceof e){var n=t._hamt.endMutation();t._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(t){var r,i=ce(t.entries());try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];this._hamt.set(o,s)}}catch(u){i.e(u)}finally{i.f()}}}return _e(e,[{key:"keys",value:function(){return this._hamt.keys()}},{key:"entries",value:function(){return this._hamt.entries()}},{key:"get",value:function(e){return this._hamt.get(e)}},{key:"has",value:function(e){return this._hamt.has(e)}},{key:"set",value:function(e,t){return this._hamt.set(e,t),this}},{key:"delete",value:function(e){return this._hamt.delete(e),this}},{key:"clone",value:function(){return Nt(this)}},{key:"toMap",value:function(){return new Map(this._hamt)}}]),e}();function Nt(e){return tt("recoil_hamt_2020")?new Lt(e):new Pt(e)}var It=Nt;var Dt=function(e){for(var t=new Set,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,o=ce(e);try{e:for(o.s();!(a=o.n()).done;){var s,u=a.value,l=ce(r);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(c.has(u))continue e}}catch(f){l.e(f)}finally{l.f()}t.add(u)}}catch(f){o.e(f)}finally{o.f()}return t};var Ot=function(e,t){var n=new Map;return e.forEach((function(e,r){n.set(r,t(e,r))})),n};function zt(e,t,n,r){var i=n.nodeDeps,a=n.nodeToNodeSubscriptions,o=i.get(e);if(!o||!r||o===r.nodeDeps.get(e)){i.set(e,t);var s,u=ce(null==o?t:Dt(t,o));try{for(u.s();!(s=u.n()).done;){var l=s.value;a.has(l)||a.set(l,new Set),Ce(a.get(l)).add(e)}}catch(p){u.e(p)}finally{u.f()}if(o){var c,f=ce(Dt(o,t));try{for(f.s();!(c=f.n()).done;){var h=c.value;if(!a.has(h))return;var d=Ce(a.get(h));d.delete(e),0===d.size&&a.delete(h)}}catch(p){f.e(p)}finally{f.f()}}}}var Ft=function(e){return{nodeDeps:Ot(e.nodeDeps,(function(e){return new Set(e)})),nodeToNodeSubscriptions:Ot(e.nodeToNodeSubscriptions,(function(e){return new Set(e)}))}},Ut=function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},Bt=function(e,t,n,r){var i,a,o,s,u=n.getState();r!==u.currentTree.version&&r!==(null===(i=u.nextTree)||void 0===i?void 0:i.version)&&r!==(null===(a=u.previousTree)||void 0===a?void 0:a.version)&&yt("Tried to save dependencies to a discarded tree");var l=n.getGraph(r);if(zt(e,t,l),r===(null===(o=u.previousTree)||void 0===o?void 0:o.version)&&zt(e,t,n.getGraph(u.currentTree.version),l),r===(null===(s=u.previousTree)||void 0===s?void 0:s.version)||r===u.currentTree.version){var c,f=null===(c=u.nextTree)||void 0===c?void 0:c.version;if(void 0!==f)zt(e,t,n.getGraph(f),l)}},Vt=0,jt=0,Ht=0,Wt=function(){return Vt++},Gt=function(){return jt++},qt=function(){return Ht++},Xt=Object.freeze({__proto__:null,persistentMap:It}).persistentMap,Yt=Ut,Zt=Wt;function $t(){var e=Zt();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Xt(),nonvalidatedAtoms:Xt()}}var Jt={makeEmptyTreeState:$t,makeEmptyStoreState:function(){var e=$t();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,Yt()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:Zt},Kt=_e((function e(){ye(this,e)}));var Qt={RetentionZone:Kt,retentionZone:function(){return new Kt}};var en=function(e,t){var n=new Set(e);return n.add(t),n};function tn(e,t){var n,r,i,a;return le().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=0,r=ce(e),o.prev=2,r.s();case 4:if((i=r.n()).done){o.next=11;break}if(a=i.value,!t(a,n++)){o.next=9;break}return o.next=9,a;case 9:o.next=4;break;case 11:o.next=16;break;case 13:o.prev=13,o.t0=o.catch(2),r.e(o.t0);case 16:return o.prev=16,r.f(),o.finish(16);case 19:case"end":return o.stop()}}),ke,null,[[2,13,16,19]])}var nn=tn;var rn=function(e,t){return new Proxy(e,{get:function(e,n){return!(n in e)&&n in t&&(e[n]=t[n]()),e[n]},ownKeys:function(e){return Object.keys(e)}})},an=Et.getNode,on=Et.getNodeMaybe,sn=Et.recoilValuesForKeys,un=Qt.RetentionZone,ln=en,cn=Object.freeze(new Set),fn=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(se(Error));function hn(e,t,n,r){var i=e.getState();if(!i.nodeCleanupFunctions.has(n)){var a=an(n),o=function(e,t,n){if(!tt("recoil_memory_managament_2020"))return function(){};var r=e.getState().retention.nodesRetainedByZone;function i(e){var n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof un)i(n);else if(Array.isArray(n)){var a,o=ce(n);try{for(o.s();!(a=o.n()).done;)i(a.value)}catch(s){o.e(s)}finally{o.f()}}return function(){if(tt("recoil_memory_managament_2020")){var r=e.getState().retention;if(n instanceof un)o(n);else if(Array.isArray(n)){var i,a=ce(n);try{for(a.s();!(i=a.n()).done;)o(i.value)}catch(s){a.e(s)}finally{a.f()}}}function o(e){var n=r.nodesRetainedByZone.get(e);null===n||void 0===n||n.delete(t),n&&0===n.size&&r.nodesRetainedByZone.delete(e)}}}(e,n,a.retainedBy),s=a.init(e,t,r);i.nodeCleanupFunctions.set(n,(function(){s(),o()}))}}function dn(e,t,n){return an(n).peek(e,t)}function pn(e,t,n){for(var r=new Set,i=Array.from(n),a=e.getGraph(t.version),o=i.pop();o;o=i.pop()){var s;r.add(o);var u,l=ce(null!==(s=a.nodeToNodeSubscriptions.get(o))&&void 0!==s?s:cn);try{for(l.s();!(u=l.n()).done;){var c=u.value;r.has(c)||i.push(c)}}catch(f){l.e(f)}finally{l.f()}}return r}var vn=function(e,t,n){return hn(e,t,n,"get"),an(n).get(e,t)},mn=dn,gn=function(e,t,n,r){var i=an(n);if(null==i.set)throw new fn("Attempt to set read-only RecoilValue: ".concat(n));var a=i.set;return hn(e,t,n,"set"),a(e,t,r)},yn=function(e,t,n){hn(e,e.getState().currentTree,t,n)},bn=function(e,t){var n,r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},_n=function(e,t,n){var r,i=on(t);return null===i||void 0===i||null===(r=i.invalidate)||void 0===r||r.call(i,e),de(de({},e),{},{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:ln(e.dirtyAtoms,t)})},xn=function(e,t,n){var r=e.getState(),i=e.getGraph(t.version),a=an(n).nodeType;return rn({type:a},{loadable:function(){return dn(e,t,n)},isActive:function(){return r.knownAtoms.has(n)||r.knownSelectors.has(n)},isSet:function(){return"selector"!==a&&t.atomValues.has(n)},isModified:function(){return t.dirtyAtoms.has(n)},deps:function(){var e;return sn(null!==(e=i.nodeDeps.get(n))&&void 0!==e?e:[])},subscribers:function(){var i,a;return{nodes:sn(nn(pn(e,t,new Set([n])),(function(e){return e!==n}))),components:mt(null!==(i=null===(a=r.nodeToComponentSubscriptions.get(n))||void 0===a?void 0:a.values())&&void 0!==i?i:[],(function(e){return{name:c(e,1)[0]}}))}}})},wn=pn,Sn=null;var kn=function(e){Sn=e},Mn=function(){var e;null===(e=Sn)||void 0===e||e()},En=wn,Tn=vn,Cn=gn,An=qt,Rn=Et.getNode,Pn=Et.getNodeMaybe,Ln=Et.DefaultValue,Nn=at.reactMode,In=pt.AbstractRecoilValue,Dn=pt.RecoilState,On=pt.RecoilValueReadOnly,zn=pt.isRecoilValue,Fn=Mn;function Un(e,t,n){if("set"===n.type){var r,i=n.recoilValue,a=function(e,t,n,r){var i=n.key;if("function"===typeof r){var a=Tn(e,t,i);if("loading"===a.state){var o='Tried to set atom or selector "'.concat(i,'" using an updater function while the current state is pending, this is not currently supported.');throw yt(o),Ee(o)}if("hasError"===a.state)throw a.contents;return r(a.contents)}return r}(e,t,i,n.valueOrUpdater),o=ce(Cn(e,t,i.key,a).entries());try{for(o.s();!(r=o.n()).done;){var s=c(r.value,2);Bn(t,s[0],s[1])}}catch(p){o.e(p)}finally{o.f()}}else if("setLoadable"===n.type){Bn(t,n.recoilValue.key,n.loadable)}else if("markModified"===n.type){var u=n.recoilValue.key;t.dirtyAtoms.add(u)}else if("setUnvalidated"===n.type){var l,f=n.recoilValue.key,h=n.unvalidatedValue,d=Pn(f);null===d||void 0===d||null===(l=d.invalidate)||void 0===l||l.call(d,t),t.atomValues.delete(f),t.nonvalidatedAtoms.set(f,h),t.dirtyAtoms.add(f)}else yt("Unknown action ".concat(n.type))}function Bn(e,t,n){"hasValue"===n.state&&n.contents instanceof Ln?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function Vn(e,t){e.replaceState((function(n){var r,i=Wn(n),a=ce(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;Un(e,i,o)}}catch(s){a.e(s)}finally{a.f()}return Gn(e,i),Fn(),i}))}function jn(e,t){if(Hn.length){var n=Hn[Hn.length-1],r=n.get(e);r||n.set(e,r=[]),r.push(t)}else Vn(e,[t])}var Hn=[];function Wn(e){return de(de({},e),{},{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function Gn(e,t){var n,r=ce(En(e,t,t.dirtyAtoms));try{for(r.s();!(n=r.n()).done;){var i,a,o=n.value;null===(i=Pn(o))||void 0===i||null===(a=i.invalidate)||void 0===a||a.call(i,t)}}catch(s){r.e(s)}finally{r.f()}}function qn(e,t,n){jn(e,{type:"set",recoilValue:t,valueOrUpdater:n})}var Xn={RecoilValueReadOnly:On,AbstractRecoilValue:In,RecoilState:Dn,getRecoilValueAsLoadable:function(e,t){var n,r,i=t.key,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getState().currentTree,o=e.getState();a.version!==o.currentTree.version&&a.version!==(null===(n=o.nextTree)||void 0===n?void 0:n.version)&&a.version!==(null===(r=o.previousTree)||void 0===r?void 0:r.version)&&yt("Tried to read from a discarded tree");var s=Tn(e,a,i);return"loading"===s.state&&s.contents.catch((function(){})),s},setRecoilValue:qn,setRecoilValueLoadable:function(e,t,n){if(n instanceof Ln)return qn(e,t,n);jn(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){jn(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){jn(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,t,n){var r=t.key,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=An(),o=e.getState();o.nodeToComponentSubscriptions.has(r)||o.nodeToComponentSubscriptions.set(r,new Map),Ce(o.nodeToComponentSubscriptions.get(r)).set(a,[null!==i&&void 0!==i?i:"<not captured>",n]);var s=Nn();if(s.early&&("LEGACY"===s.mode||"MUTABLE_SOURCE"===s.mode)){var u=e.getState().nextTree;u&&u.dirtyAtoms.has(r)&&n(u)}return{release:function(){var t=e.getState(),n=t.nodeToComponentSubscriptions.get(r);void 0!==n&&n.has(a)?(n.delete(a),0===n.size&&t.nodeToComponentSubscriptions.delete(r)):yt("Subscription missing at release time for atom ".concat(r,". This is a bug in Recoil."))}}},isRecoilValue:zn,applyAtomValueWrites:function(e,t){var n=e.clone();return t.forEach((function(e,t){"hasValue"===e.state&&e.contents instanceof Ln?n.delete(t):n.set(t,e)})),n},batchStart:function(){var e=new Map;return Hn.push(e),function(){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2);Vn(r[0],r[1])}}catch(i){n.e(i)}finally{n.f()}Hn.pop()!==e&&yt("Incorrect order of batch popping")}},writeLoadableToTreeState:Bn,invalidateDownstreams:Gn,copyTreeState:Wn,refreshRecoilValue:function(e,t){var n,r=e.getState().currentTree,i=Rn(t.key);null===(n=i.clearCache)||void 0===n||n.call(i,e,r)}};var Yn=function(e,t,n){for(var r=e.entries(),i=r.next();!i.done;){var a=i.value;if(t.call(n,a[1],a[0],e))return!0;i=r.next()}return!1},Zn=bn,$n=Et.deleteNodeConfigIfPossible,Jn=Et.getNode,Kn=Qt.RetentionZone,Qn=new Set;function er(e,t){var n=e.getState(),r=n.currentTree;if(n.nextTree)yt("releaseNodesNowOnCurrentTree should only be called at the end of a batch");else{var i,a=new Set,o=ce(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s instanceof Kn){var u,l=ce(nr(n,s));try{for(l.s();!(u=l.n()).done;){var c=u.value;a.add(c)}}catch(p){l.e(p)}finally{l.f()}}else a.add(s)}}catch(p){o.e(p)}finally{o.f()}var f,h=function(e,t){var n=e.getState(),r=n.currentTree,i=e.getGraph(r.version),a=new Set,o=new Set;return s(t),a;function s(t){var u,l=new Set,c=function(e,t,n,r,i){var a=e.getGraph(t.version),o=[],s=new Set;for(;n.size>0;)u(Ce(n.values().next().value));return o;function u(e){if(r.has(e)||i.has(e))n.delete(e);else if(!s.has(e)){var t=a.nodeToNodeSubscriptions.get(e);if(t){var l,c=ce(t);try{for(c.s();!(l=c.n()).done;){u(l.value)}}catch(p){c.e(p)}finally{c.f()}}s.add(e),n.delete(e),o.push(e)}}}(e,r,t,a,o),f=ce(c);try{for(f.s();!(u=f.n()).done;){var h,d=u.value;if("recoilRoot"!==Jn(d).retainedBy)if((null!==(h=n.retention.referenceCounts.get(d))&&void 0!==h?h:0)>0)o.add(d);else if(rr(d).some((function(e){return n.retention.referenceCounts.get(e)})))o.add(d);else{var v=i.nodeToNodeSubscriptions.get(d);v&&Yn(v,(function(e){return o.has(e)}))?o.add(d):(a.add(d),l.add(d))}else o.add(d)}}catch(p){f.e(p)}finally{f.f()}var m,g=new Set,y=ce(l);try{for(y.s();!(m=y.n()).done;){var b,_=m.value,x=ce(null!==(w=i.nodeDeps.get(_))&&void 0!==w?w:Qn);try{for(x.s();!(b=x.n()).done;){var w,S=b.value;a.has(S)||g.add(S)}}catch(p){x.e(p)}finally{x.f()}}}catch(p){y.e(p)}finally{y.f()}g.size&&s(g)}}(e,a),d=ce(h);try{for(d.s();!(f=d.n()).done;){tr(e,r,f.value)}}catch(p){d.e(p)}finally{d.f()}}}function tr(e,t,n){if(tt("recoil_memory_managament_2020")){Zn(e,n);var r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);var i,a=ce(rr(n));try{for(a.s();!(i=a.n()).done;){var o,s=i.value;null===(o=r.retention.nodesRetainedByZone.get(s))||void 0===o||o.delete(n)}}catch(p){a.e(p)}finally{a.f()}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);var u=r.graphsByVersion.get(t.version);if(u){var l=u.nodeDeps.get(n);if(void 0!==l){u.nodeDeps.delete(n);var c,f=ce(l);try{for(f.s();!(c=f.n()).done;){var h,d=c.value;null===(h=u.nodeToNodeSubscriptions.get(d))||void 0===h||h.delete(n)}}catch(p){f.e(p)}finally{f.f()}}u.nodeToNodeSubscriptions.delete(n)}$n(n)}}function nr(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:Qn}function rr(e){var t=Jn(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof Kn?[t]:t}function ir(e,t){tt("recoil_memory_managament_2020")&&(e.getState().retention.referenceCounts.delete(t),function(e,t){var n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):er(e,new Set([t]))}(e,t))}var ar=12e4,or=function(e,t,n){var r;if(tt("recoil_memory_managament_2020")){var i=e.getState().retention.referenceCounts,a=(null!==(r=i.get(t))&&void 0!==r?r:0)+n;0===a?ir(e,t):i.set(t,a)}},sr=function(e){if(tt("recoil_memory_managament_2020")){var t=e.getState();er(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}},ur=function(e){return void 0===e?"recoilRoot":e},lr=xe.unstable_batchedUpdates,cr=Xn.batchStart,fr={unstable_batchedUpdates:{unstable_batchedUpdates:lr}.unstable_batchedUpdates}.unstable_batchedUpdates,hr=function(e){fr((function(){var t=function(){};try{t=cr(),e()}finally{t()}}))};function dr(e){var t,n,r,i,a,o;return le().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=ce(e),s.prev=1,t.s();case 3:if((n=t.n()).done){s.next=24;break}r=n.value,i=ce(r),s.prev=6,i.s();case 8:if((a=i.n()).done){s.next=14;break}return o=a.value,s.next=12,o;case 12:s.next=8;break;case 14:s.next=19;break;case 16:s.prev=16,s.t0=s.catch(6),i.e(s.t0);case 19:return s.prev=19,i.f(),s.finish(19);case 22:s.next=3;break;case 24:s.next=29;break;case 26:s.prev=26,s.t1=s.catch(1),t.e(s.t1);case 29:return s.prev=29,t.f(),s.finish(29);case 32:case"end":return s.stop()}}),Me,null,[[1,26,29,32],[6,16,19,22]])}var pr=dr,vr="undefined"===typeof Window||"undefined"===typeof window,mr="undefined"!==typeof navigator&&"ReactNative"===navigator.product,gr={isSSR:vr,isReactNative:mr,isWindow:function(e){return!vr&&(e===window||e instanceof Window)}};var yr=function(e,t){var n,r;return[function(){var i=t.apply(void 0,arguments);return n===i?r:(n=i,r=e.apply(void 0,arguments))},function(){n=null}]},br=hr,_r=yn,xr=xn,wr=Ut,Sr=Gt,kr=Et.DEFAULT_VALUE,Mr=Et.recoilValues,Er=Et.recoilValuesForKeys,Tr=Xn.AbstractRecoilValue,Cr=Xn.getRecoilValueAsLoadable,Ar=Xn.setRecoilValue,Rr=Xn.setUnvalidatedRecoilValue,Pr=or,Lr=kn,Nr=Jt.getNextTreeStateVersion,Ir=Jt.makeEmptyStoreState,Dr=gr.isSSR,Or=yr,zr=function(){function e(t,n){var r=this;ye(this,e),Ae(this,"_store",void 0),Ae(this,"_refCount",1),Ae(this,"getLoadable",(function(e){return r.checkRefCount_INTERNAL(),Cr(r._store,e)})),Ae(this,"getPromise",(function(e){return r.checkRefCount_INTERNAL(),r.getLoadable(e).toPromise()})),Ae(this,"getNodes_UNSTABLE",(function(e){if(r.checkRefCount_INTERNAL(),!0===(null===e||void 0===e?void 0:e.isModified)){if(!1===(null===e||void 0===e?void 0:e.isInitialized))return[];var t=r._store.getState().currentTree;return Er(t.dirtyAtoms)}var n=r._store.getState().knownAtoms,i=r._store.getState().knownSelectors;return null==(null===e||void 0===e?void 0:e.isInitialized)?Mr.values():!0===e.isInitialized?Er(pr([n,i])):nn(Mr.values(),(function(e){var t=e.key;return!n.has(t)&&!i.has(t)}))})),Ae(this,"getInfo_UNSTABLE",(function(e){var t=e.key;return r.checkRefCount_INTERNAL(),xr(r._store,r._store.getState().currentTree,t)})),Ae(this,"map",(function(e){r.checkRefCount_INTERNAL();var t=new jr(r,br);return e(t),t})),Ae(this,"asyncMap",function(){var e=ne(le().mark((function e(t){var n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.checkRefCount_INTERNAL(),(n=new jr(r,br)).retain(),e.next=5,t(n);case 5:return n.autoRelease_INTERNAL(),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this._store={storeID:Sr(),parentStoreID:n,getState:function(){return t},replaceState:function(e){t.currentTree=e(t.currentTree)},getGraph:function(e){var n=t.graphsByVersion;if(n.has(e))return Ce(n.get(e));var r=wr();return n.set(e,r),r},subscribeToTransactions:function(){return{release:function(){}}},addTransactionMetadata:function(){throw Ee("Cannot subscribe to Snapshots")}};var i,a=ce(this._store.getState().knownAtoms);try{for(a.s();!(i=a.n()).done;){var o=i.value;_r(this._store,o,"get"),Pr(this._store,o,1)}}catch(s){a.e(s)}finally{a.f()}this.autoRelease_INTERNAL()}return _e(e,[{key:"retain",value:function(){var e=this;this._refCount<=0&&yt("Attempt to retain() Snapshot that was already released."),this._refCount++;var t=!1;return function(){t||(t=!0,e._release())}}},{key:"autoRelease_INTERNAL",value:function(){var e=this;Dr||window.setTimeout((function(){return e._release()}),0)}},{key:"_release",value:function(){if(this._refCount--,0===this._refCount){if(this._store.getState().nodeCleanupFunctions.forEach((function(e){return e()})),this._store.getState().nodeCleanupFunctions.clear(),!tt("recoil_memory_managament_2020"))return}else this._refCount}},{key:"isRetained",value:function(){return this._refCount>0}},{key:"checkRefCount_INTERNAL",value:function(){tt("recoil_memory_managament_2020")&&this._refCount}},{key:"getStore_INTERNAL",value:function(){return this.checkRefCount_INTERNAL(),this._store}},{key:"getID",value:function(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}},{key:"getStoreID",value:function(){return this.checkRefCount_INTERNAL(),this._store.storeID}}]),e}();function Fr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.getState(),i=n?Nr():t.version;return{currentTree:{version:n?i:t.version,stateID:n?i:t.stateID,transactionMetadata:de({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(i,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(mt(r.nodeCleanupFunctions.entries(),(function(e){return[c(e,1)[0],function(){}]})))}}var Ur=c(Or((function(e,t){var n,r=e.getState(),i="latest"===t?null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree:Ce(r.previousTree);return new zr(Fr(e,i),e.storeID)}),(function(e,t){var n,r;return String(t)+String(e.storeID)+String(null===(n=e.getState().nextTree)||void 0===n?void 0:n.version)+String(e.getState().currentTree.version)+String(null===(r=e.getState().previousTree)||void 0===r?void 0:r.version)})),2),Br=Ur[0],Vr=Ur[1];Lr(Vr);var jr=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),Ae(pe(i=t.call(this,Fr(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID())),"_batch",void 0),Ae(pe(i),"set",(function(e,t){i.checkRefCount_INTERNAL();var n=i.getStore_INTERNAL();i._batch((function(){Pr(n,e.key,1),Ar(i.getStore_INTERNAL(),e,t)}))})),Ae(pe(i),"reset",(function(e){i.checkRefCount_INTERNAL();var t=i.getStore_INTERNAL();i._batch((function(){Pr(t,e.key,1),Ar(i.getStore_INTERNAL(),e,kr)}))})),Ae(pe(i),"setUnvalidatedAtomValues_DEPRECATED",(function(e){i.checkRefCount_INTERNAL();var t=i.getStore_INTERNAL();br((function(){var n,r=ce(e.entries());try{for(r.s();!(n=r.n()).done;){var i=c(n.value,2),a=i[0],o=i[1];Pr(t,a,1),Rr(t,new Tr(a),o)}}catch(s){r.e(s)}finally{r.f()}}))})),i._batch=r,i}return _e(n)}(zr),Hr={Snapshot:zr,MutableSnapshot:jr,freshSnapshot:function(e){var t=new zr(Ir());return null!=e?t.map(e):t},cloneSnapshot:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest",n=Br(e,t);return n.isRetained()?n:(Vr(),Br(e,t))}},Wr=Hr.Snapshot,Gr=Hr.MutableSnapshot,qr=Hr.freshSnapshot,Xr=Hr.cloneSnapshot,Yr=Object.freeze({__proto__:null,Snapshot:Wr,MutableSnapshot:Gr,freshSnapshot:qr,cloneSnapshot:Xr});var Zr=function(){for(var e=new Set,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o,s=a[i],u=ce(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;e.add(l)}}catch(c){u.e(c)}finally{u.f()}}return e},$r=i.useRef;var Jr=function(e){var t=$r(e);return t.current===e&&"function"===typeof e&&(t.current=e()),t},Kr=Jt.getNextTreeStateVersion,Qr=Jt.makeEmptyStoreState,ei=bn,ti=wn,ni=yn,ri=gn,ii=_n,ai=Ut,oi=Ft,si=Gt,ui=at.createMutableSource,li=at.reactMode,ci=Xn.applyAtomValueWrites,fi=sr,hi=Yr.freshSnapshot,di=i.useCallback,pi=i.useContext,vi=i.useEffect,mi=i.useMemo,gi=i.useRef,yi=i.useState;function bi(){throw Ee("This component must be used inside a <RecoilRoot> component.")}var _i=Object.freeze({storeID:si(),getState:bi,replaceState:bi,getGraph:bi,subscribeToTransactions:bi,addTransactionMetadata:bi}),xi=!1;function wi(e){if(xi)throw Ee("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");var t=e.getState();if(null===t.nextTree){tt("recoil_memory_managament_2020")&&tt("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&fi(e);var n=t.currentTree.version,r=Kr();t.nextTree=de(de({},t.currentTree),{},{version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(r,oi(Ce(t.graphsByVersion.get(n))))}}var Si=i.createContext({current:_i}),ki=function(){return pi(Si)},Mi=i.createContext(null);function Ei(e,t,n){var r,i=ce(ti(e,n,n.dirtyAtoms));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t.nodeToComponentSubscriptions.get(a);if(o){var s,u=ce(o);try{for(u.s();!(s=u.n()).done;){var l=c(s.value,2),f=(l[0],c(l[1],2));f[0];(0,f[1])(n)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}}function Ti(e){var t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){var i,a=ce(t.nodeTransactionSubscriptions);try{for(a.s();!(i=a.n()).done;){var o=c(i.value,2),s=o[0],u=o[1];if(r.has(s)){var l,f=ce(u);try{for(f.s();!(l=f.n()).done;){var h=c(l.value,2);h[0];(0,h[1])(e)}}catch(m){f.e(m)}finally{f.f()}}}}catch(m){a.e(m)}finally{a.f()}var d,p=ce(t.transactionSubscriptions);try{for(p.s();!(d=p.n()).done;){var v=c(d.value,2);v[0];(0,v[1])(e)}}catch(m){p.e(m)}finally{p.f()}(!li().early||t.suspendedComponentResolvers.size>0)&&(Ei(e,t,n),t.suspendedComponentResolvers.forEach((function(e){return e()})),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((function(e){return e(n)})),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function Ci(e){var t=e.setNotifyBatcherOfChange,n=ki(),r=c(yi([]),2)[1];return t((function(){return r({})})),vi((function(){return t((function(){return r({})})),function(){t((function(){}))}}),[t]),vi((function(){Tt.enqueueExecution("Batcher",(function(){!function(e){var t=e.getState();t.commitDepth++;try{var n=t.nextTree;if(null==n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,Ti(e),null!=t.previousTree?t.graphsByVersion.delete(t.previousTree.version):yt("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,tt("recoil_memory_managament_2020")&&null==n&&fi(e)}finally{t.commitDepth--}}(n.current)}))})),null}var Ai=0;function Ri(e){var t,n=e.initializeState_DEPRECATED,r=e.initializeState,a=e.store_INTERNAL,o=e.children,s=function(e){var n=t.current.graphsByVersion;if(n.has(e))return Ce(n.get(e));var r=ai();return n.set(e,r),r},u=function(e,t){if(null==t){var n=d.current.getState().transactionSubscriptions,r=Ai++;return n.set(r,e),{release:function(){n.delete(r)}}}var i=d.current.getState().nodeTransactionSubscriptions;i.has(t)||i.set(t,new Map);var a=Ai++;return Ce(i.get(t)).set(a,e),{release:function(){var e=i.get(t);e&&(e.delete(a),0===e.size&&i.delete(t))}}},l=function(e){wi(d.current);for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Ce(d.current.getState().nextTree).transactionMetadata[r]=e[r]}},c=function(e){wi(d.current);var n,r=Ce(t.current.nextTree);try{xi=!0,n=e(r)}finally{xi=!1}n!==r&&(t.current.nextTree=n,li().early&&Ei(d.current,t.current,n),Ce(f.current)())},f=gi(null),h=di((function(e){f.current=e}),[f]),d=Jr((function(){return null!==a&&void 0!==a?a:{storeID:si(),getState:function(){return t.current},replaceState:c,getGraph:s,subscribeToTransactions:u,addTransactionMetadata:l}}));null!=a&&(d.current=a),t=Jr((function(){return null!=n?function(e,t){var n=Qr();return t({set:function(t,r){var i,a=n.currentTree,o=ri(e,a,t.key,r),s=new Set(o.keys()),u=a.nonvalidatedAtoms.clone(),l=ce(s);try{for(l.s();!(i=l.n()).done;){var c=i.value;u.delete(c)}}catch(f){l.e(f)}finally{l.f()}n.currentTree=de(de({},a),{},{dirtyAtoms:Zr(a.dirtyAtoms,s),atomValues:ci(a.atomValues,o),nonvalidatedAtoms:u})},setUnvalidatedAtomValues:function(e){e.forEach((function(e,t){n.currentTree=ii(n.currentTree,t,e)}))}}),n}(d.current,n):null!=r?function(e){var t=hi(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach((function(e){return e()})),n.nodeCleanupFunctions.clear(),n}(r):Qr()}));var p=mi((function(){return null===ui||void 0===ui?void 0:ui(t,(function(){return t.current.currentTree.version}))}),[t]);return vi((function(){var e,t=d.current,n=ce(new Set(t.getState().knownAtoms));try{for(n.s();!(e=n.n()).done;){var r=e.value;ni(t,r,"get")}}catch(i){n.e(i)}finally{n.f()}return function(){var e,n=ce(t.getState().knownAtoms);try{for(n.s();!(e=n.n()).done;){var r=e.value;ei(t,r)}}catch(i){n.e(i)}finally{n.f()}}}),[d]),i.createElement(Si.Provider,{value:d},i.createElement(Mi.Provider,{value:p},i.createElement(Ci,{setNotifyBatcherOfChange:h}),o))}var Pi=function(e){var t=e.override,n=ee(e,we),r=ki();return!1===t&&r.current!==_i?e.children:i.createElement(Ri,n)},Li=ki,Ni=function(){var e=pi(Mi);return null==e&&vt("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e},Ii=function(){return ki().current.storeID};var Di=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},Oi=i.useEffect,zi=i.useRef;var Fi=function(e){var t=zi();return Oi((function(){t.current=e})),t.current},Ui=Li,Bi=ar,Vi=or,ji=Qt.RetentionZone,Hi=i.useEffect,Wi=i.useRef,Gi=gr.isSSR;var qi=function(e){if(tt("recoil_memory_managament_2020"))return function(e){var t=(Array.isArray(e)?e:[e]).map((function(e){return e instanceof ji?e:e.key})),n=Ui();Hi((function(){if(tt("recoil_memory_managament_2020")){var e=n.current;if(r.current&&!Gi)window.clearTimeout(r.current),r.current=null;else{var i,a=ce(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;Vi(e,o,1)}}catch(s){a.e(s)}finally{a.f()}}return function(){var n,r=ce(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;Vi(e,i,-1)}}catch(s){r.e(s)}finally{r.f()}}}}),[n].concat(Q(t)));var r=Wi(),i=Fi(t);if(!Gi&&(void 0===i||!Di(i,t))){var a,o=n.current,s=ce(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;Vi(o,u,1)}}catch(h){s.e(h)}finally{s.f()}if(i){var l,c=ce(i);try{for(c.s();!(l=c.n()).done;){var f=l.value;Vi(o,f,-1)}}catch(h){c.e(h)}finally{c.f()}}r.current&&window.clearTimeout(r.current),r.current=window.setTimeout((function(){r.current=null;var e,n=ce(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;Vi(o,i,-1)}}catch(h){n.e(h)}finally{n.f()}}),Bi)}}(e)};var Xi=function(){return"<component name not available>"},Yi=Et.DEFAULT_VALUE,Zi=at.reactMode,$i=at.useMutableSource,Ji=at.useSyncExternalStore,Ki=Ni,Qi=Li,ea=(pt.isRecoilValue,Xn.getRecoilValueAsLoadable),ta=Xn.setRecoilValue,na=Xn.subscribeToRecoilValue,ra=i.useCallback,ia=i.useEffect,aa=i.useMemo,oa=i.useRef,sa=i.useState;function ua(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state){var r=new Promise((function(e){n.current.getState().suspendedComponentResolvers.add(e)}));throw r}throw"hasError"===e.state?e.contents:Ee('Invalid value of loadable atom "'.concat(t.key,'"'))}function la(e){var t=Qi(),n=Xi(),r=ra((function(){var n;var r=t.current,i=r.getState(),a=Zi().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return{loadable:ea(r,e,a),key:e.key}}),[t,e]),i=ra((function(e){var t;return function(){var n,r,i=e();return null!==(n=t)&&void 0!==n&&n.loadable.is(i.loadable)&&(null===(r=t)||void 0===r?void 0:r.key)===i.key?t:(t=i,i)}}),[]),a=aa((function(){return i(r)}),[r,i]),o=ra((function(r){var i=t.current;return na(i,e,r,n).release}),[t,e,n]);return Ji(o,a,a).loadable}function ca(e){var t=Qi(),n=ra((function(){var n,r=t.current,i=r.getState(),a=Zi().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return ea(r,e,a)}),[t,e]),r=ra((function(){return n()}),[n]),i=Xi(),a=ra((function(r,a){var o=t.current;return na(o,e,(function(){if(!tt("recoil_suppress_rerender_in_callback"))return a();var e=n();u.current.is(e)||a(),u.current=e}),i).release}),[t,e,i,n]),o=Ki();if(null==o)throw Ee("Recoil hooks must be used in components contained within a <RecoilRoot> component.");var s=$i(o,r,a),u=oa(s);return ia((function(){u.current=s})),s}function fa(e){var t=Qi(),n=Xi(),r=ra((function(){var n;var r=t.current,i=r.getState(),a=Zi().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return ea(r,e,a)}),[t,e]),i=ra((function(){return{loadable:r(),key:e.key}}),[r,e.key]),a=ra((function(e){var t=i();return e.loadable.is(t.loadable)&&e.key===t.key?e:t}),[i]);ia((function(){var r=na(t.current,e,(function(e){u(a)}),n);return u(a),r.release}),[n,e,t,a]);var o=c(sa(i),2),s=o[0],u=o[1];return s.key!==e.key?i().loadable:s.loadable}function ha(e){var t=Qi(),n=c(sa([]),2)[1],r=Xi(),i=ra((function(){var n;var r=t.current,i=r.getState(),a=Zi().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return ea(r,e,a)}),[t,e]),a=i(),o=oa(a);return ia((function(){o.current=a})),ia((function(){var a=t.current,s=a.getState(),u=na(a,e,(function(e){var t;if(!tt("recoil_suppress_rerender_in_callback"))return n([]);var r=i();null!==(t=o.current)&&void 0!==t&&t.is(r)||n(r),o.current=r}),r);if(s.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push((function(){o.current=null,n([])}));else{var l;if(!tt("recoil_suppress_rerender_in_callback"))return n([]);var c=i();null!==(l=o.current)&&void 0!==l&&l.is(c)||n(c),o.current=c}return u.release}),[r,i,e,t]),a}function da(e){return tt("recoil_memory_managament_2020")&&qi(e),{TRANSITION_SUPPORT:fa,SYNC_EXTERNAL_STORE:la,MUTABLE_SOURCE:ca,LEGACY:ha}[Zi().mode](e)}function pa(e){var t=Qi();return ua(da(e),e,t)}function va(e){var t=Qi();return ra((function(n){ta(t.current,e,n)}),[t,e])}function ma(e){return tt("recoil_memory_managament_2020")&&qi(e),fa(e)}function ga(e){var t=Qi();return ua(ma(e),e,t)}var ya=function(e){return[pa(e),va(e)]},ba=function(e){return[da(e),va(e)]},_a=pa,xa=da,wa=function(e){var t=Qi();return ra((function(){ta(t.current,e,Yi)}),[t,e])},Sa=va,ka=ma,Ma=ga,Ea=function(e){return[ga(e),va(e)]};var Ta=hr,Ca=Et.DEFAULT_VALUE,Aa=Et.getNode,Ra=Li,Pa=Xn.AbstractRecoilValue,La=Xn.setRecoilValueLoadable,Na=ar,Ia=Yr.cloneSnapshot,Da=i.useCallback,Oa=i.useEffect,za=i.useRef,Fa=i.useState,Ua=gr.isSSR;function Ba(e){var t=Ra();Oa((function(){return t.current.subscribeToTransactions(e).release}),[e,t])}function Va(e,t){var n,r=e.getState(),i=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,a=t.getStore_INTERNAL().getState().currentTree;Ta((function(){for(var n=new Set,r=0,o=[i.atomValues.keys(),a.atomValues.keys()];r<o.length;r++){var s,u=ce(o[r]);try{for(u.s();!(s=u.n()).done;){var l,c,f=s.value;(null===(l=i.atomValues.get(f))||void 0===l?void 0:l.contents)!==(null===(c=a.atomValues.get(f))||void 0===c?void 0:c.contents)&&Aa(f).shouldRestoreFromSnapshots&&n.add(f)}}catch(h){u.e(h)}finally{u.f()}}n.forEach((function(t){La(e,new Pa(t),a.atomValues.has(t)?Ce(a.atomValues.get(t)):Ca)})),e.replaceState((function(e){return de(de({},e),{},{stateID:t.getID()})}))}))}var ja=function(){var e=Ra(),t=c(Fa((function(){return Ia(e.current)})),2),n=t[0],r=t[1],i=Fi(n),a=za(),o=za();if(Ba(Da((function(e){return r(Ia(e))}),[])),Oa((function(){var e,t=n.retain();a.current&&!Ua&&(window.clearTimeout(a.current),a.current=null,null===(e=o.current)||void 0===e||e.call(o),o.current=null);return t}),[n]),i!==n&&!Ua){var s;if(a.current)window.clearTimeout(a.current),a.current=null,null===(s=o.current)||void 0===s||s.call(o),o.current=null;o.current=n.retain(),a.current=window.setTimeout((function(){var e;a.current=null,null===(e=o.current)||void 0===e||e.call(o),o.current=null}),Na)}return n},Ha=Va,Wa=function(){var e=Ra();return Da((function(t){return Va(e.current,t)}),[e])},Ga=function(e){Ba(Da((function(t){var n=Ia(t,"latest"),r=Ia(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},qa=xn,Xa=Li;var Ya=function(){var e=Xa();return function(t){var n=t.key;return qa(e.current,e.current.getState().currentTree,n)}},Za=at.reactMode,$a=Pi,Ja=Li,Ka=i.useMemo;var Qa=function(){"MUTABLE_SOURCE"===Za().mode&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");var e=Ja().current;return Ka((function(){return function(t){var n=t.children;return i.createElement($a,{store_INTERNAL:e},n)}}),[e])},eo=Ze.loadableWithValue,to=yn,no=Et.DEFAULT_VALUE,ro=Et.getNode,io=Xn.copyTreeState,ao=Xn.getRecoilValueAsLoadable,oo=Xn.invalidateDownstreams,so=Xn.writeLoadableToTreeState;function uo(e){return"atom"===ro(e.key).nodeType}var lo=function(){function e(t,n){var r=this;ye(this,e),Ae(this,"_store",void 0),Ae(this,"_treeState",void 0),Ae(this,"_changes",void 0),Ae(this,"get",(function(e){if(r._changes.has(e.key))return r._changes.get(e.key);if(!uo(e))throw Ee("Reading selectors within atomicUpdate is not supported");var t=ao(r._store,e,r._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:Ee("Expected Recoil atom ".concat(e.key," to have a value, but it is in a loading state."))})),Ae(this,"set",(function(e,t){if(!uo(e))throw Ee("Setting selectors within atomicUpdate is not supported");if("function"===typeof t){var n=r.get(e);r._changes.set(e.key,t(n))}else to(r._store,e.key,"set"),r._changes.set(e.key,t)})),Ae(this,"reset",(function(e){r.set(e,no)})),this._store=t,this._treeState=n,this._changes=new Map}return _e(e,[{key:"newTreeState_INTERNAL",value:function(){if(0===this._changes.size)return this._treeState;var e,t=io(this._treeState),n=ce(this._changes);try{for(n.s();!(e=n.n()).done;){var r=c(e.value,2),i=r[0],a=r[1];so(t,i,eo(a))}}catch(o){n.e(o)}finally{n.f()}return oo(this._store,t),t}}]),e}();var co=function(e){return function(t){e.replaceState((function(n){var r=new lo(e,n);return t(r),r.newTreeState_INTERNAL()}))}},fo=co,ho=Object.freeze({__proto__:null,atomicUpdater:fo});var po=function(e,t){if(!e)throw new Error(t)},vo=ho.atomicUpdater,mo=hr,go=Et.DEFAULT_VALUE,yo=Li,bo=Xn.refreshRecoilValue,_o=Xn.setRecoilValue,xo=Yr.cloneSnapshot,wo=Ha,So=i.useCallback,ko=_e((function e(){ye(this,e)})),Mo=new ko;function Eo(e,t,n,r){var i,a,o=Mo;(mo((function(){var a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!==typeof t)throw Ee(a);var s=rn(de(de({},null!==r&&void 0!==r?r:{}),{},{set:function(t,n){return _o(e,t,n)},reset:function(t){return _o(e,t,go)},refresh:function(t){return bo(e,t)},gotoSnapshot:function(t){return wo(e,t)},transact_UNSTABLE:function(t){return vo(e)(t)}}),{snapshot:function(){var t=xo(e);return i=t.retain(),t}}),u=t(s);if("function"!==typeof u)throw Ee(a);o=u.apply(void 0,Q(n))})),o instanceof ko&&po(!1),Te(o))?o.finally((function(){var e;null===(e=i)||void 0===e||e()})):null===(a=i)||void 0===a||a();return o}var To=Eo,Co=function(e,t){var n=yo();return So((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Eo(n.current,e,r)}),null!=t?[].concat(Q(t),[n]):void 0)},Ao=Li,Ro=Xn.refreshRecoilValue,Po=i.useCallback;var Lo=function(e){var t=Ao();return Po((function(){var n=t.current;Ro(n,e)}),[e,t])},No=ho.atomicUpdater,Io=Li,Do=i.useMemo;var Oo=function(e,t){var n=Io();return Do((function(){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=No(n.current);a((function(t){e(t).apply(void 0,r)}))}}),null!=t?[].concat(Q(t),[n]):void 0)},zo=_e((function e(t){ye(this,e),Ae(this,"value",void 0),this.value=t})),Fo={WrappedValue:zo}.WrappedValue,Uo=Object.freeze({__proto__:null,WrappedValue:Fo}),Bo=at.isFastRefreshEnabled,Vo=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(se(Error)),jo=function(){function e(t){var n,r,i;ye(this,e),Ae(this,"_name",void 0),Ae(this,"_numLeafs",void 0),Ae(this,"_root",void 0),Ae(this,"_onHit",void 0),Ae(this,"_onSet",void 0),Ae(this,"_mapNodeValue",void 0),this._name=null===t||void 0===t?void 0:t.name,this._numLeafs=0,this._root=null,this._onHit=null!==(n=null===t||void 0===t?void 0:t.onHit)&&void 0!==n?n:function(){},this._onSet=null!==(r=null===t||void 0===t?void 0:t.onSet)&&void 0!==r?r:function(){},this._mapNodeValue=null!==(i=null===t||void 0===t?void 0:t.mapNodeValue)&&void 0!==i?i:function(e){return e}}return _e(e,[{key:"size",value:function(){return this._numLeafs}},{key:"root",value:function(){return this._root}},{key:"get",value:function(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}},{key:"getLeafNode",value:function(e,t){if(null!=this._root)for(var n=this._root;n;){if(null===t||void 0===t||t.onNodeVisit(n),"leaf"===n.type)return this._onHit(n),n;var r=this._mapNodeValue(e(n.nodeKey));n=n.branches.get(r)}}},{key:"set",value:function(e,t,n){var r=this,i=function(){var i,a,o,s,u,l,f,h=ce(e);try{for(h.s();!(f=h.n()).done;){var d,p,v,m=c(f.value,2),g=m[0],y=m[1],b=r._root;if("leaf"===(null===b||void 0===b?void 0:b.type))throw r.invalidCacheError();var _=u;if("branch"!==(u=null!==(d=u=_?_.branches.get(l):b)&&void 0!==d?d:{type:"branch",nodeKey:g,parent:_,branches:new Map,branchKey:l}).type||u.nodeKey!==g)throw r.invalidCacheError();null===_||void 0===_||_.branches.set(l,u),null===n||void 0===n||null===(p=n.onNodeVisit)||void 0===p||p.call(n,u),l=r._mapNodeValue(y),r._root=null!==(v=r._root)&&void 0!==v?v:u}}catch(S){h.e(S)}finally{h.f()}var x=u?null===(i=u)||void 0===i?void 0:i.branches.get(l):r._root;if(null!=x&&("leaf"!==x.type||x.branchKey!==l))throw r.invalidCacheError();var w={type:"leaf",value:t,parent:u,branchKey:l};null===(a=u)||void 0===a||a.branches.set(l,w),r._root=null!==(o=r._root)&&void 0!==o?o:w,r._numLeafs++,r._onSet(w),null===n||void 0===n||null===(s=n.onNodeVisit)||void 0===s||s.call(n,w)};try{i()}catch(a){if(!(a instanceof Vo))throw a;this.clear(),i()}}},{key:"delete",value:function(e){var t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;for(var n=e.parent,r=e.branchKey;n;){var i;if(n.branches.delete(r),n===t)return 0===n.branches.size?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(n.branches.size>0)break;r=null===(i=n)||void 0===i?void 0:i.branchKey,n=n.parent}for(;n!==t;n=n.parent)if(null==n)return!1;return this._numLeafs--,!0}},{key:"clear",value:function(){this._numLeafs=0,this._root=null}},{key:"invalidCacheError",value:function(){var e=Bo()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw yt(e+(null!=this._name?" - ".concat(this._name):"")),new Vo}}]),e}(),Ho={TreeCache:jo}.TreeCache,Wo=Object.freeze({__proto__:null,TreeCache:Ho}),Go=function(){function e(t){var n;ye(this,e),Ae(this,"_maxSize",void 0),Ae(this,"_size",void 0),Ae(this,"_head",void 0),Ae(this,"_tail",void 0),Ae(this,"_map",void 0),Ae(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(n=t.mapKey)&&void 0!==n?n:function(e){return e}}return _e(e,[{key:"head",value:function(){return this._head}},{key:"tail",value:function(){return this._tail}},{key:"size",value:function(){return this._size}},{key:"maxSize",value:function(){return this._maxSize}},{key:"has",value:function(e){return this._map.has(this._keyMapper(e))}},{key:"get",value:function(e){var t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}},{key:"set",value:function(e,t){var n=this._keyMapper(e);this._map.get(n)&&this.delete(e);var r=this.head(),i={key:e,right:r,left:null,value:t};r?r.left=i:this._tail=i,this._map.set(n,i),this._head=i,this._size++,this._maybeDeleteLRU()}},{key:"_maybeDeleteLRU",value:function(){this.size()>this.maxSize()&&this.deleteLru()}},{key:"deleteLru",value:function(){var e=this.tail();e&&this.delete(e.key)}},{key:"delete",value:function(e){var t=this._keyMapper(e);if(this._size&&this._map.has(t)){var n=Ce(this._map.get(t)),r=n.right,i=n.left;r&&(r.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=i),this._map.delete(t),this._size--}}},{key:"clear",value:function(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}]),e}(),qo={LRUCache:Go}.LRUCache,Xo=Object.freeze({__proto__:null,LRUCache:qo}),Yo=Xo.LRUCache,Zo=Wo.TreeCache;var $o=function(e){var t=e.name,n=e.maxSize,r=e.mapNodeValue,i=void 0===r?function(e){return e}:r,a=new Yo({maxSize:n}),o=new Zo({name:t,mapNodeValue:i,onHit:function(e){a.set(e,!0)},onSet:function(e){var t=a.tail();a.set(e,!0),t&&o.size()>n&&o.delete(t.key)}});return o};function Jo(e,t,n){if("string"===typeof e&&!e.includes('"')&&!e.includes("\\"))return'"'.concat(e,'"');switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null===t||void 0===t?void 0:t.allowFunctions))throw Ee("Attempt to serialize function in a Recoil cache key");return"__FUNCTION(".concat(e.name,")__")}if(null===e)return"null";var r;if("object"!==typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(Te(e))return"__PROMISE__";if(Array.isArray(e))return"[".concat(e.map((function(e,n){return Jo(e,t,n.toString())})),"]");if("function"===typeof e.toJSON)return Jo(e.toJSON(n),t,n);if(e instanceof Map){var i,a={},o=ce(e);try{for(o.s();!(i=o.n()).done;){var s=c(i.value,2),u=s[0],l=s[1];a["string"===typeof u?u:Jo(u,t)]=l}}catch(f){o.e(f)}finally{o.f()}return Jo(a,t,n)}return e instanceof Set?Jo(Array.from(e).sort((function(e,n){return Jo(e,t).localeCompare(Jo(n,t))})),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"===typeof e[Symbol.iterator]?Jo(Array.from(e),t,n):"{".concat(Object.keys(e).filter((function(t){return void 0!==e[t]})).sort().map((function(n){return"".concat(Jo(n,t),":").concat(Jo(e[n],t,n))})).join(","),"}")}var Ko=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowFunctions:!1};return Jo(e,t)},Qo=Wo.TreeCache,es={equality:"reference",eviction:"keep-all",maxSize:1/0};function ts(e){switch(e){case"reference":return function(e){return e};case"value":return function(e){return Ko(e)}}throw Ee("Unrecognized equality policy ".concat(e))}function ns(e,t,n,r){switch(e){case"keep-all":return new Qo({name:r,mapNodeValue:n});case"lru":return $o({name:r,maxSize:Ce(t),mapNodeValue:n});case"most-recent":return $o({name:r,maxSize:1,mapNodeValue:n})}throw Ee("Unrecognized eviction policy ".concat(e))}var rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es,t=e.equality,n=void 0===t?es.equality:t,r=e.eviction,i=void 0===r?es.eviction:r,a=e.maxSize,o=void 0===a?es.maxSize:a,s=arguments.length>1?arguments[1]:void 0,u=ts(n);return ns(i,o,u,s)};var is=function(e){return function(){return null}},as=Ze.isLoadable,os=Ze.loadableWithError,ss=Ze.loadableWithPromise,us=Ze.loadableWithValue,ls=Uo.WrappedValue,cs=vn,fs=mn,hs=gn,ds=Bt,ps=Et.DEFAULT_VALUE,vs=Et.getConfigDeletionHandler,ms=Et.getNode,gs=Et.registerNode,ys=pt.isRecoilValue,bs=Xn.markRecoilValueModified,_s=ur,xs=To,ws=is,Ss=_e((function e(){ye(this,e)})),ks=new Ss,Ms=[],Es=new Map,Ts=function(){var e=0;return function(){return e++}}();function Cs(e){var t=null,n=e.key,r=e.get,i=e.cachePolicy_UNSTABLE,a=null!=e.set?e.set:void 0;var o=new Set,s=rs(null!==i&&void 0!==i?i:{equality:"reference",eviction:"keep-all"},n),u=_s(e.retainedBy_UNSTABLE),l=new Map,f=0;function h(){return!tt("recoil_memory_managament_2020")||f>0}function d(e){return e.getState().knownSelectors.add(n),f++,function(){f--}}function p(){return void 0!==vs(n)&&!h()}function v(e,t,n,r,i){C(t,r,i),m(e,n)}function m(e,t){T(e,t)&&E(e),g(t,!0)}function g(e,n){var r=Es.get(e);if(null!=r){var i,a=ce(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;bs(o,Ce(t))}}catch(s){a.e(s)}finally{a.f()}n&&Es.delete(e)}}function y(e,t){var n=Es.get(t);null==n&&Es.set(t,n=new Set),n.add(e)}function b(e,t,n,r,i,a){return t.then((function(r){if(!h())throw E(e),ks;null!=a.loadingDepKey&&a.loadingDepPromise===t?n.atomValues.set(a.loadingDepKey,us(r)):e.getState().knownSelectors.forEach((function(e){n.atomValues.delete(e)}));var o=w(e,n);if(o&&"loading"!==o.state){if((T(e,i)||null==M(e))&&m(e,i),"hasValue"===o.state)return o.contents;throw o.contents}if(!T(e,i)){var s=k(e,n);if(null!=s)return s.loadingLoadable.contents}var u=c(x(e,n,i),2),l=u[0],f=u[1];if("loading"!==l.state&&v(e,n,i,l,f),"hasError"===l.state)throw l.contents;return l.contents})).catch((function(t){if(t instanceof Ss)throw ks;if(!h())throw E(e),ks;var a=os(t);throw v(e,n,i,a,r),t}))}function _(e,t,r,i){var a,s,u,l,c,f,h;(T(e,i)||t.version===(null===(a=e.getState())||void 0===a||null===(s=a.currentTree)||void 0===s?void 0:s.version)||t.version===(null===(u=e.getState())||void 0===u||null===(l=u.nextTree)||void 0===l?void 0:l.version))&&ds(n,r,e,null!==(c=null===(f=e.getState())||void 0===f||null===(h=f.nextTree)||void 0===h?void 0:h.version)&&void 0!==c?c:e.getState().currentTree.version);var d,p=ce(r);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.add(v)}}catch(m){p.e(m)}finally{p.f()}}function x(e,i,a){var o,s,u=ws(n),l=!0,c=!0,f=function(){u(),c=!1},d=!1,p={loadingDepKey:null,loadingDepPromise:null},m=new Map;function y(t){var n=t.key,r=cs(e,i,n);switch(m.set(n,r),l||(_(e,i,new Set(m.keys()),a),function(e,t){T(e,t)&&(Ce(M(e)).stateVersions.clear(),g(t,!1))}(e,a)),r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":throw p.loadingDepKey=n,p.loadingDepPromise=r.contents,r.contents}throw Ee("Invalid Loadable state")}try{o=r({get:y,getCallback:function(n){return function(){if(c)throw Ee("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");null==t&&po(!1);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return xs(e,n,i,{node:t})}}}),o=ys(o)?y(o):o,as(o)&&("hasError"===o.state&&(d=!0),o=o.contents),Te(o)?o=function(e,t,n,r,i,a){return t.then((function(t){if(!h())throw E(e),ks;var a=us(t);return v(e,n,i,a,r),t})).catch((function(t){if(!h())throw E(e),ks;if(Te(t))return b(e,t,n,r,i,a);var o=os(t);throw v(e,n,i,o,r),t}))}(e,o,i,m,a,p).finally(f):f(),o=o instanceof ls?o.value:o}catch(x){Te(o=x)?o=b(e,o,i,m,a,p).finally(f):(d=!0,f())}return s=d?os(o):Te(o)?ss(o):us(o),l=!1,function(e,t,n){if(T(e,t)){var r=M(e);null!=r&&(r.depValuesDiscoveredSoFarDuringAsyncWork=n)}}(e,a,m),_(e,i,new Set(m.keys()),a),[s,m]}function w(e,t){var r=t.atomValues.get(n);if(null!=r)return r;var i,a=new Set;try{r=s.get((function(n){return"string"!==typeof n&&po(!1),cs(e,t,n).contents}),{onNodeVisit:function(e){"branch"===e.type&&e.nodeKey!==n&&a.add(e.nodeKey)}})}catch(o){throw Ee('Problem with cache lookup for selector "'.concat(n,'": ').concat(o.message))}r&&(t.atomValues.set(n,r),_(e,t,a,null===(i=M(e))||void 0===i?void 0:i.executionID));return r}function S(e,t){var n=w(e,t);if(null!=n)return E(e),n;var r,i=k(e,t);if(null!=i)return"loading"===(null===(r=i.loadingLoadable)||void 0===r?void 0:r.state)&&y(e,i.executionID),i.loadingLoadable;var a=Ts(),o=c(x(e,t,a),2),s=o[0],u=o[1];return"loading"===s.state?(!function(e,t,n,r,i){l.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:r,executionID:t,loadingLoadable:n,stateVersions:new Map([[i.version,!0]])})}(e,a,s,u,t),y(e,a)):(E(e),C(t,s,u)),s}function k(e,t){function n(n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],s=a[1];if(!cs(e,t,o).is(s))return!0}}catch(u){i.e(u)}finally{i.f()}return!1}var r,i=ce(pr([l.has(e)?[Ce(l.get(e))]:[],mt(nn(l,(function(t){return c(t,1)[0]!==e})),(function(e){return c(e,2)[1]}))]));try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.stateVersions.get(t.version)||!n(a.depValuesDiscoveredSoFarDuringAsyncWork))return a.stateVersions.set(t.version,!0),a;a.stateVersions.set(t.version,!1)}}catch(o){i.e(o)}finally{i.f()}}function M(e){return l.get(e)}function E(e){l.delete(e)}function T(e,t){var n;return t===(null===(n=M(e))||void 0===n?void 0:n.executionID)}function C(e,t,r){e.atomValues.set(n,t);try{s.set(function(e){return Array.from(e.entries()).map((function(e){var t=c(e,2);return[t[0],t[1].contents]}))}(r),t)}catch(i){throw Ee('Problem with setting cache for selector "'.concat(n,'": ').concat(i.message))}}function A(e,t){var r=t.atomValues.get(n);return null!=r?r:s.get((function(n){var r;return"string"!==typeof n&&po(!1),null===(r=fs(e,t,n))||void 0===r?void 0:r.contents}))}function R(e,t){return function(e){if(Ms.includes(n)){var t="Recoil selector has circular dependencies: ".concat(Ms.slice(Ms.indexOf(n)).join(" \u2192 "));return os(Ee(t))}Ms.push(n);try{return e()}finally{Ms.pop()}}((function(){return S(e,t)}))}function P(e){e.atomValues.delete(n)}function L(e,n){null==t&&po(!1);var r,i=ce(o);try{for(i.s();!(r=i.n()).done;){var a,u=r.value,l=ms(u);null===(a=l.clearCache)||void 0===a||a.call(l,e,n)}}catch(c){i.e(c)}finally{i.f()}o.clear(),P(n),s.clear(),bs(e,t)}if(null!=a){return t=gs({key:n,nodeType:"selector",peek:A,get:R,set:function(e,t,r){var i=!1,o=new Map;function s(r){var a=r.key;if(i)throw Ee("Recoil: Async selector sets are not currently supported.");var o=cs(e,t,a);if("hasValue"===o.state)return o.contents;if("loading"===o.state){var s='Getting value of asynchronous atom or selector "'.concat(a,'" in a pending state while setting selector "').concat(n,'" is not yet supported.');throw yt(s),Ee(s)}throw o.contents}function u(n,r){if(i){var a="Recoil: Async selector sets are not currently supported.";throw yt(a),Ee(a)}var u="function"===typeof r?r(s(n)):r;hs(e,t,n.key,u).forEach((function(e,t){return o.set(t,e)}))}var l=a({set:u,get:s,reset:function(e){u(e,ps)}},r);if(void 0!==l)throw Te(l)?Ee("Recoil: Async selector sets are not currently supported."):Ee("Recoil: selector set should be a void function.");return i=!0,o},init:d,invalidate:P,clearCache:L,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}return t=gs({key:n,nodeType:"selector",peek:A,get:R,init:d,invalidate:P,clearCache:L,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}Cs.value=function(e){return new ls(e)};var As=Cs,Rs=Ze.isLoadable,Ps=Ze.loadableWithError,Ls=Ze.loadableWithPromise,Ns=Ze.loadableWithValue,Is=Uo.WrappedValue,Ds=xn,Os=Et.DEFAULT_VALUE,zs=Et.DefaultValue,Fs=Et.getConfigDeletionHandler,Us=Et.registerNode,Bs=Et.setConfigDeletionHandler,Vs=pt.isRecoilValue,js=Xn.getRecoilValueAsLoadable,Hs=Xn.markRecoilValueModified,Ws=Xn.setRecoilValue,Gs=Xn.setRecoilValueLoadable,qs=ur,Xs=function(e){return e instanceof Is?e.value:e};function Ys(e){var t=e.key,n=e.persistence_UNSTABLE,r=qs(e.retainedBy_UNSTABLE),i=0;function a(e){return Ls(e.then((function(e){return o=Ns(e),e})).catch((function(e){throw o=Ps(e),e})))}var o=Te(e.default)?a(e.default):Rs(e.default)?"loading"===e.default.state?a(e.default.contents):e.default:Ns(Xs(e.default));l(o.contents);var s=void 0,u=new Map;function l(e){return e}function c(e,n){var r,i;return null!==(r=null!==(i=n.atomValues.get(t))&&void 0!==i?i:s)&&void 0!==r?r:o}var f=Us({key:t,nodeType:"atom",peek:c,get:function(e,r){if(r.atomValues.has(t))return Ce(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=s)return s;if(null==n)return vt("Tried to restore a persisted value for atom ".concat(t," but it has no persistence settings.")),o;var i=r.nonvalidatedAtoms.get(t),a=n.validator(i,Os),u=a instanceof zs?o:Ns(a);return s=u}return o},set:function(e,n,r){if(n.atomValues.has(t)){var i=Ce(n.atomValues.get(t));if("hasValue"===i.state&&r===i.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof zs)return new Map;return s=void 0,(new Map).set(t,Ns(r))},init:function(n,r,a){var s;if(i++,n.getState().knownAtoms.add(t),"loading"===o.state){o.contents.finally((function(){var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||Hs(n,f)}))}var l=null!==(s=e.effects)&&void 0!==s?s:e.effects_UNSTABLE;if(null!=l){var h,d=function(e){if(g&&e.key===t){var i=m;return i instanceof zs?c(n,r):Te(i)?Ls(i.then((function(e){return e instanceof zs?o.toPromise():e}))):Ns(i)}return js(n,e)},p=function(e){return d(e).toPromise()},v=function(e){var r,i=Ds(n,null!==(r=n.getState().nextTree)&&void 0!==r?r:n.getState().currentTree,e.key);return!g||e.key!==t||m instanceof zs?i:de(de({},i),{},{isSet:!0,loadable:d(e)})},m=Os,g=!0,y=!1,b=null,_=function(e){return function(t){if(g){var r=d(f),i="hasValue"===r.state?r.contents:Os;m="function"===typeof t?t(i):t,Te(m)&&(m=m.then((function(t){return b={effect:e,value:t},t})))}else{if(Te(t))throw Ee("Setting atoms to async values is not implemented.");"function"!==typeof t&&(b={effect:e,value:Xs(t)}),Ws(n,f,"function"===typeof t?function(n){var r=Xs(t(n));return b={effect:e,value:r},r}:Xs(t))}}},x=function(e){return function(){return _(e)(Os)}},w=function(e){return function(r){var i,a=n.subscribeToTransactions((function(n){var i,a=n.getState(),s=a.currentTree,u=a.previousTree;u||(yt("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),u=s);var l=null!==(i=s.atomValues.get(t))&&void 0!==i?i:o;if("hasValue"===l.state){var c,f,h,d,p=l.contents,v=null!==(c=u.atomValues.get(t))&&void 0!==c?c:o,m="hasValue"===v.state?v.contents:Os;(null===(f=b)||void 0===f?void 0:f.effect)!==e||(null===(h=b)||void 0===h?void 0:h.value)!==p?r(p,m,!s.atomValues.has(t)):(null===(d=b)||void 0===d?void 0:d.effect)===e&&(b=null)}}),t).release;u.set(n,[].concat(Q(null!==(i=u.get(n))&&void 0!==i?i:[]),[a]))}},S=ce(l);try{for(S.s();!(h=S.n()).done;){var k=h.value;try{var M,E=k({node:f,storeID:n.storeID,parentStoreID_UNSTABLE:n.parentStoreID,trigger:a,setSelf:_(k),resetSelf:x(k),onSet:w(k),getPromise:p,getLoadable:d,getInfo_UNSTABLE:v});if(null!=E)u.set(n,[].concat(Q(null!==(M=u.get(n))&&void 0!==M?M:[]),[E]))}catch(A){m=A,y=!0}}}catch(R){S.e(R)}finally{S.f()}if(g=!1,!(m instanceof zs)){var T,C=y?Ps(m):Te(m)?Ls(function(e,n){var r=n.then((function(n){var i,a;return(null===(a=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===r&&Ws(e,f,n),n})).catch((function(n){var i,a;throw(null===(a=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===r&&Gs(e,f,Ps(n)),n}));return r}(n,m)):Ns(Xs(m));C.contents,r.atomValues.set(t,C),null===(T=n.getState().nextTree)||void 0===T||T.atomValues.set(t,C)}}return function(){var e;i--,null===(e=u.get(n))||void 0===e||e.forEach((function(e){return e()})),u.delete(n)}},invalidate:function(){s=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==Fs(t)&&i<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return f}function Zs(e){var t=Object.assign({},e),n="default"in e?e.default:new Promise((function(){}));return Vs(n)?function(e){var t=Zs(de(de({},e),{},{default:Os,persistence_UNSTABLE:void 0===e.persistence_UNSTABLE?void 0:de(de({},e.persistence_UNSTABLE),{},{validator:function(t){return t instanceof zs?t:Ce(e.persistence_UNSTABLE).validator(t,Os)}}),effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE})),n=As({key:"".concat(e.key,"__withFallback"),get:function(n){var r=(0,n.get)(t);return r instanceof zs?e.default:r},set:function(e,n){return(0,e.set)(t,n)},cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return Bs(n.key,Fs(e.key)),n}(de(de({},t),{},{default:n})):Ys(de(de({},t),{},{default:n}))}Zs.value=function(e){return new Is(e)};var $s=Zs,Js=function(){function e(t){var n;ye(this,e),Ae(this,"_map",void 0),Ae(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(n=null===t||void 0===t?void 0:t.mapKey)&&void 0!==n?n:function(e){return e}}return _e(e,[{key:"size",value:function(){return this._map.size}},{key:"has",value:function(e){return this._map.has(this._keyMapper(e))}},{key:"get",value:function(e){return this._map.get(this._keyMapper(e))}},{key:"set",value:function(e,t){this._map.set(this._keyMapper(e),t)}},{key:"delete",value:function(e){this._map.delete(this._keyMapper(e))}},{key:"clear",value:function(){this._map.clear()}}]),e}(),Ks={MapCache:Js}.MapCache,Qs=Object.freeze({__proto__:null,MapCache:Ks}),eu=Xo.LRUCache,tu=Qs.MapCache,nu={equality:"reference",eviction:"none",maxSize:1/0};function ru(e){switch(e){case"reference":return function(e){return e};case"value":return function(e){return Ko(e)}}throw Ee("Unrecognized equality policy ".concat(e))}function iu(e,t,n){switch(e){case"keep-all":return new tu({mapKey:n});case"lru":return new eu({mapKey:n,maxSize:Ce(t)});case"most-recent":return new eu({mapKey:n,maxSize:1})}throw Ee("Unrecognized eviction policy ".concat(e))}var au=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nu,t=e.equality,n=void 0===t?nu.equality:t,r=e.eviction,i=void 0===r?nu.eviction:r,a=e.maxSize,o=void 0===a?nu.maxSize:a,s=ru(n),u=iu(i,o,s);return u},ou=Et.setConfigDeletionHandler;var su=function(e){var t,n,r=au({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return function(t){var n,i,a=r.get(t);if(null!=a)return a;e.cachePolicyForParams_UNSTABLE;var o=ee(e,Se),s="default"in e?e.default:new Promise((function(){})),u=$s(de(de({},o),{},{key:"".concat(e.key,"__").concat(null!==(n=Ko(t))&&void 0!==n?n:"void"),default:"function"===typeof s?s(t):s,retainedBy_UNSTABLE:"function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects:"function"===typeof e.effects?e.effects(t):"function"===typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):null!==(i=e.effects)&&void 0!==i?i:e.effects_UNSTABLE}));return r.set(t,u),ou(u.key,(function(){r.delete(t)})),u}},uu=Et.setConfigDeletionHandler,lu=0;var cu=function(e){var t,n,r=au({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return function(t){var n,i;try{i=r.get(t)}catch(f){throw Ee("Problem with cache lookup for selector ".concat(e.key,": ").concat(f.message))}if(null!=i)return i;var a,o="".concat(e.key,"__selectorFamily/").concat(null!==(n=Ko(t,{allowFunctions:!0}))&&void 0!==n?n:"void","/").concat(lu++),s=function(n){return e.get(t)(n)},u=e.cachePolicy_UNSTABLE,l="function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;if(null!=e.set){var c=e.set;a=As({key:o,get:s,set:function(e,n){return c(t)(e,n)},cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:l})}else a=As({key:o,get:s,cachePolicy_UNSTABLE:u,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:l});return r.set(t,a),uu(a.key,(function(){r.delete(t)})),a}},fu=cu({key:"__constant",get:function(e){return function(){return e}},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var hu=function(e){return fu(e)},du=cu({key:"__error",get:function(e){return function(){throw Ee(e)}},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var pu=function(e){return du(e)};var vu=function(e){return e},mu=Ze.loadableWithError,gu=Ze.loadableWithPromise,yu=Ze.loadableWithValue;function bu(e,t){var n,r=Array(t.length).fill(void 0),i=Array(t.length).fill(void 0),a=ce(t.entries());try{for(a.s();!(n=a.n()).done;){var o=c(n.value,2),s=o[0],u=o[1];try{r[s]=e(u)}catch(l){i[s]=l}}}catch(f){a.e(f)}finally{a.f()}return[r,i]}function _u(e){return null!=e&&!Te(e)}function xu(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((function(t){return e[t]}))}function wu(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((function(e,n,r){return de(de({},e),{},fe({},n,t[r]))}),{})}function Su(e,t,n){return wu(e,n.map((function(e,n){return null==e?yu(t[n]):Te(e)?gu(e):mu(e)})))}var ku=cu({key:"__waitForNone",get:function(e){return function(t){var n=c(bu(t.get,xu(e)),2),r=n[0],i=n[1];return Su(e,r,i)}},dangerouslyAllowMutability:!0}),Mu=cu({key:"__waitForAny",get:function(e){return function(t){var n=c(bu(t.get,xu(e)),2),r=n[0],i=n[1];return i.some((function(e){return!Te(e)}))?Su(e,r,i):new Promise((function(t){var n,a=ce(i.entries());try{var o=function(){var a=c(n.value,2),o=a[0],s=a[1];Te(s)&&s.then((function(n){r[o]=n,i[o]=void 0,t(Su(e,r,i))})).catch((function(n){i[o]=n,t(Su(e,r,i))}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}}))}},dangerouslyAllowMutability:!0}),Eu={waitForNone:ku,waitForAny:Mu,waitForAll:cu({key:"__waitForAll",get:function(e){return function(t){var n=c(bu(t.get,xu(e)),2),r=n[0],i=n[1];if(i.every((function(e){return null==e})))return wu(e,r);var a=i.find(_u);if(null!=a)throw a;return Promise.all(i).then((function(t){return wu(e,(n=r,t.map((function(e,t){return void 0===e?n[t]:e}))));var n}))}},dangerouslyAllowMutability:!0}),waitForAllSettled:cu({key:"__waitForAllSettled",get:function(e){return function(t){var n=c(bu(t.get,xu(e)),2),r=n[0],i=n[1];return i.every((function(e){return!Te(e)}))?Su(e,r,i):Promise.all(i.map((function(e,t){return Te(e)?e.then((function(e){r[t]=e,i[t]=void 0})).catch((function(e){r[t]=void 0,i[t]=e})):null}))).then((function(){return Su(e,r,i)}))}},dangerouslyAllowMutability:!0}),noWait:cu({key:"__noWait",get:function(e){return function(t){var n=t.get;try{return As.value(yu(n(e)))}catch(r){return As.value(Te(r)?gu(r):mu(r))}}},dangerouslyAllowMutability:!0})},Tu=Ze.RecoilLoadable,Cu=Et.DefaultValue,Au=Pi,Ru=Ii,Pu=pt.isRecoilValue,Lu=Qt.retentionZone,Nu=Yr.freshSnapshot,Iu={DefaultValue:Cu,isRecoilValue:Pu,RecoilLoadable:Tu,RecoilRoot:Au,useRecoilStoreID:Ru,useRecoilBridgeAcrossReactRoots_UNSTABLE:Qa,atom:$s,selector:As,atomFamily:su,selectorFamily:cu,constSelector:hu,errorSelector:pu,readOnlySelector:vu,noWait:Eu.noWait,waitForNone:Eu.waitForNone,waitForAny:Eu.waitForAny,waitForAll:Eu.waitForAll,waitForAllSettled:Eu.waitForAllSettled,useRecoilValue:_a,useRecoilValueLoadable:xa,useRecoilState:ya,useRecoilStateLoadable:ba,useSetRecoilState:Sa,useResetRecoilState:wa,useGetRecoilValueInfo_UNSTABLE:Ya,useRecoilRefresher_UNSTABLE:Lo,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:ka,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Ma,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Ea,useRecoilCallback:Co,useRecoilTransaction_UNSTABLE:Oo,useGotoRecoilSnapshot:Wa,useRecoilSnapshot:ja,useRecoilTransactionObserver_UNSTABLE:Ga,snapshot_UNSTABLE:Nu,useRetain:qi,retentionZone:Lu},Du=Iu.RecoilRoot,Ou=Iu.useRecoilBridgeAcrossReactRoots_UNSTABLE,zu=Iu.atom,Fu=Iu.useRecoilValue,Uu=Iu.useRecoilState,Bu=Iu.useSetRecoilState,Vu=n(763);function ju(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}function Hu(){return Hu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ju(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Hu.apply(this,arguments)}var Wu=Object.create(null);Wu.open="0",Wu.close="1",Wu.ping="2",Wu.pong="3",Wu.message="4",Wu.upgrade="5",Wu.noop="6";var Gu=Object.create(null);Object.keys(Wu).forEach((function(e){Gu[Wu[e]]=e}));for(var qu={type:"error",data:"parser error"},Xu="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Yu="function"===typeof ArrayBuffer,Zu=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},$u=function(e,t,n){var r,i=e.type,a=e.data;return Xu&&a instanceof Blob?t?n(a):Zu(a,n):Yu&&(a instanceof ArrayBuffer||(r=a,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(a):Zu(new Blob([a]),n):n(Wu[i]+(a||""))},Ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ku="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Qu=0;Qu<Ju.length;Qu++)Ku[Ju.charCodeAt(Qu)]=Qu;var el="function"===typeof ArrayBuffer,tl=function(e,t){if(el){var n=function(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l=new ArrayBuffer(o),c=new Uint8Array(l);for(t=0;t<s;t+=4)n=Ku[e.charCodeAt(t)],r=Ku[e.charCodeAt(t+1)],i=Ku[e.charCodeAt(t+2)],a=Ku[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&a;return l}(e);return nl(n,t)}return{base64:!0,data:e}},nl=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},rl=function(e,t){if("string"!==typeof e)return{type:"message",data:nl(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:tl(e.substring(1),t)}:Gu[n]?e.length>1?{type:Gu[n],data:e.substring(1)}:{type:Gu[n]}:qu},il=String.fromCharCode(30);function al(e){if(e)return function(e){for(var t in al.prototype)e[t]=al.prototype[t];return e}(e)}al.prototype.on=al.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},al.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},al.prototype.off=al.prototype.removeListener=al.prototype.removeAllListeners=al.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},al.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},al.prototype.emitReserved=al.prototype.emit,al.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},al.prototype.hasListeners=function(e){return!!this.listeners(e).length};var ol="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function sl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var ul=setTimeout,ll=clearTimeout;function cl(e,t){t.useNativeTimers?(e.setTimeoutFn=ul.bind(ol),e.clearTimeoutFn=ll.bind(ol)):(e.setTimeoutFn=setTimeout.bind(ol),e.clearTimeoutFn=clearTimeout.bind(ol))}var fl,hl=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,e)).description=r,a.context=i,a.type="TransportError",a}return _e(n)}(se(Error)),dl=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).writable=!1,cl(pe(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return _e(n,[{key:"onError",value:function(e,t,r){return Hu(re(n.prototype),"emitReserved",this).call(this,"error",new hl(e,t,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,Hu(re(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=rl(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){Hu(re(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",Hu(re(n.prototype),"emitReserved",this).call(this,"close",e)}}]),n}(al),pl="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vl={},ml=0,gl=0;function yl(e){var t="";do{t=pl[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function bl(){var e=yl(+new Date);return e!==fl?(ml=0,fl=e):e+"."+yl(ml++)}for(;gl<64;gl++)vl[pl[gl]]=gl;function _l(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function xl(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}var wl=!1;try{wl="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ZR){}var Sl=wl;function kl(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Sl))return new XMLHttpRequest}catch(n){}if(!t)try{return new(ol[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function Ml(){}var El=null!=new kl({xdomain:!1}).responseType,Tl=function(e){ve(n,e);var t=ge(n);function n(e){var r;if(ye(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var i="https:"===location.protocol,a=location.port;a||(a=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||a!==e.port,r.xs=e.secure!==i}var o=e&&e.forceBase64;return r.supportsBinary=El&&!o,r}return _e(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(il),r=[],i=0;i<n.length;i++){var a=rl(n[i],t);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,a){$u(e,!1,(function(e){r[a]=e,++i===n&&t(r.join(il))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=bl()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=_l(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Cl(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(dl),Cl=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),cl(pe(i=t.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return _e(n,[{key:"create",value:function(){var e=this,t=sl(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new kl(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(a){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{r.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(a){return void this.setTimeoutFn((function(){e.onError(a)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Ml,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(al);if(Cl.requestsCount=0,Cl.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Al);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ol?"pagehide":"unload",Al,!1)}function Al(){for(var e in Cl.requests)Cl.requests.hasOwnProperty(e)&&Cl.requests[e].abort()}var Rl="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},Pl=ol.WebSocket||ol.MozWebSocket,Ll="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Nl=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return _e(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=Ll?{}:sl(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Ll?new Pl(e,t,n):t?new Pl(e,t):new Pl(e)}catch(ZR){return this.emitReserved("error",ZR)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],i=n===e.length-1;$u(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(n){}i&&Rl((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=bl()),this.supportsBinary||(e.b64=1);var r=_l(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Pl}}]),n}(dl),Il={websocket:Nl,polling:Tl},Dl=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ol=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function zl(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=Dl.exec(e||""),a={},o=14;o--;)a[Ol[o]]=i[o]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}var Fl=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ye(this,n),r=t.call(this),e&&"object"===typeof e&&(i=e,e=null),e?(e=zl(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=zl(i.host).host),cl(pe(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=xl(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return _e(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Il[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var a=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(f(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var a=new Error("probe error");a.transport=r.name,t.emitReserved("upgradeError",a)}})))};function o(){i||(i=!0,f(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function l(){s("socket closed")}function c(e){r&&e.name!==r.name&&o()}var f=function(){r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",u),t.off("close",l),t.off("upgrading",c)};r.once("open",a),r.once("error",s),r.once("close",u),this.once("close",l),this.once("upgrading",c),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(al);Fl.protocol=4;Fl.protocol;var Ul="function"===typeof ArrayBuffer,Bl=Object.prototype.toString,Vl="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Bl.call(Blob),jl="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Bl.call(File);function Hl(e){return Ul&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||Vl&&e instanceof Blob||jl&&e instanceof File}function Wl(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Wl(e[n]))return!0;return!1}if(Hl(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Wl(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Wl(e[i]))return!0;return!1}function Gl(e){var t=[],n=e.data,r=e;return r.data=ql(n,t),r.attachments=t.length,{packet:r,buffers:t}}function ql(e,t){if(!e)return e;if(Hl(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=ql(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=ql(e[o],t));return a}return e}function Xl(e,t){return e.data=Yl(e.data,t),e.attachments=void 0,e}function Yl(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Yl(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Yl(e[r],t));return e}var Zl,$l=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Zl||(Zl={}));var Jl=function(){function e(t){ye(this,e),this.replacer=t}return _e(e,[{key:"encode",value:function(e){return e.type!==Zl.EVENT&&e.type!==Zl.ACK||!Wl(e)?[this.encodeAsString(e)]:(e.type=e.type===Zl.EVENT?Zl.BINARY_EVENT:Zl.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Zl.BINARY_EVENT&&e.type!==Zl.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Gl(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Kl=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).reviver=e,r}return _e(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===Zl.BINARY_EVENT||t.type===Zl.BINARY_ACK?(this.reconstructor=new Ql(t),0===t.attachments&&Hu(re(n.prototype),"emitReserved",this).call(this,"decoded",t)):Hu(re(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!Hl(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,Hu(re(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Zl[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Zl.BINARY_EVENT||r.type===Zl.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(i,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var c=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Zl.CONNECT:return"object"===typeof t;case Zl.DISCONNECT:return void 0===t;case Zl.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Zl.EVENT:case Zl.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Zl.ACK:case Zl.BINARY_ACK:return Array.isArray(t)}}}]),n}(al),Ql=function(){function e(t){ye(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return _e(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Xl(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function ec(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var tc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),nc=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this)).connected=!1,a.receiveBuffer=[],a.sendBuffer=[],a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=r,i&&i.auth&&(a.auth=i.auth),a.io._autoConnect&&a.open(),a}return _e(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[ec(e,"open",this.onopen.bind(this)),ec(e,"packet",this.onpacket.bind(this)),ec(e,"error",this.onerror.bind(this)),ec(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(tc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var i={type:Zl.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),i.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!s||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var i=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(i);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:Zl.CONNECT,data:t})})):this.packet({type:Zl.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Zl.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Zl.EVENT:case Zl.BINARY_EVENT:this.onevent(e);break;case Zl.ACK:case Zl.BINARY_ACK:this.onack(e);break;case Zl.DISCONNECT:this.ondisconnect();break;case Zl.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=ce(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(ZR){r.e(ZR)}finally{r.f()}}Hu(re(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:Zl.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Zl.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=ce(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(ZR){n.e(ZR)}finally{n.f()}}}}]),n}(al);function rc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}rc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},rc.prototype.reset=function(){this.attempts=0},rc.prototype.setMin=function(e){this.ms=e},rc.prototype.setMax=function(e){this.max=e},rc.prototype.setJitter=function(e){this.jitter=e};var ic=function(t){ve(r,t);var n=ge(r);function r(t,i){var a,o;ye(this,r),(a=n.call(this)).nsps={},a.subs=[],t&&"object"===typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",a.opts=i,cl(pe(a),i),a.reconnection(!1!==i.reconnection),a.reconnectionAttempts(i.reconnectionAttempts||1/0),a.reconnectionDelay(i.reconnectionDelay||1e3),a.reconnectionDelayMax(i.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(o=i.randomizationFactor)&&void 0!==o?o:.5),a.backoff=new rc({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==i.timeout?2e4:i.timeout),a._readyState="closed",a.uri=t;var s=i.parser||e;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==i.autoConnect,a._autoConnect&&a.open(),a}return _e(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Fl(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=ec(n,"open",(function(){r.onopen(),e&&e()})),a=ec(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&i();var s=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(ec(e,"ping",this.onping.bind(this)),ec(e,"data",this.ondata.bind(this)),ec(e,"error",this.onerror.bind(this)),ec(e,"close",this.onclose.bind(this)),ec(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;Rl((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new nc(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(al),ac={};function oc(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=zl(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,a=r.id,o=r.path,s=ac[a]&&o in ac[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new ic(i,t):(ac[a]||(ac[a]=new ic(i,t)),n=ac[a]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(oc,{Manager:ic,Socket:nc,io:oc,connect:oc});var sc,uc="https://".concat("peliback.kimmolepola.com"),lc=zu({key:"turnCredentials",default:void 0}),cc=zu({key:"score",default:0}),fc=zu({key:"windowHeight",default:window.innerHeight}),hc=(zu({key:"overlayInfotext",default:void 0,dangerouslyAllowMutability:!0}),zu({key:"chatMessages",default:[]})),dc=zu({key:"objectIds",default:[]}),pc=zu({key:"connectedIds",default:[]}),vc=zu({key:"ownId",default:void 0}),mc=zu({key:"main",default:!1}),gc=zu({key:"channelsOrdered",default:[]}),yc=zu({key:"channelsUnordered",default:[]}),bc=zu({key:"connectionMessage",default:void 0}),_c=zu({key:"user",default:void 0}),xc=zu({key:"socket",default:void 0}),wc="143",Sc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Mc=0,Ec=1,Tc=2,Cc=3,Ac=0,Rc=1,Pc=2,Lc=3,Nc=0,Ic=1,Dc=2,Oc=1,zc=2,Fc=0,Uc=1,Bc=2,Vc=3,jc=4,Hc=5,Wc=100,Gc=101,qc=102,Xc=103,Yc=104,Zc=200,$c=201,Jc=202,Kc=203,Qc=204,ef=205,tf=206,nf=207,rf=208,af=209,of=210,sf=0,uf=1,lf=2,cf=3,ff=4,hf=5,df=6,pf=7,vf=0,mf=1,gf=2,yf=0,bf=1,_f=2,xf=3,wf=4,Sf=5,kf=300,Mf=301,Ef=302,Tf=303,Cf=304,Af=306,Rf=1e3,Pf=1001,Lf=1002,Nf=1003,If=1004,Df=1004,Of=1005,zf=1005,Ff=1006,Uf=1007,Bf=1007,Vf=1008,jf=1008,Hf=1009,Wf=1010,Gf=1011,qf=1012,Xf=1013,Yf=1014,Zf=1015,$f=1016,Jf=1017,Kf=1018,Qf=1020,eh=1021,th=1022,nh=1023,rh=1024,ih=1025,ah=1026,oh=1027,sh=1028,uh=1029,lh=1030,ch=1031,fh=1033,hh=33776,dh=33777,ph=33778,vh=33779,mh=35840,gh=35841,yh=35842,bh=35843,_h=36196,xh=37492,wh=37496,Sh=37808,kh=37809,Mh=37810,Eh=37811,Th=37812,Ch=37813,Ah=37814,Rh=37815,Ph=37816,Lh=37817,Nh=37818,Ih=37819,Dh=37820,Oh=37821,zh=36492,Fh=2200,Uh=2201,Bh=2202,Vh=2300,jh=2301,Hh=2302,Wh=2400,Gh=2401,qh=2402,Xh=2500,Yh=2501,Zh=0,$h=1,Jh=2,Kh=3e3,Qh=3001,ed=3200,td=3201,nd=0,rd=1,id="",ad="srgb",od="srgb-linear",sd=0,ud=7680,ld=7681,cd=7682,fd=7683,hd=34055,dd=34056,pd=5386,vd=512,md=513,gd=514,yd=515,bd=516,_d=517,xd=518,wd=519,Sd=35044,kd=35048,Md=35040,Ed=35045,Td=35049,Cd=35041,Ad=35046,Rd=35050,Pd=35042,Ld="100",Nd="300 es",Id=1035,Dd=function(){function e(){ye(this,e)}return _e(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Od=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],zd=1234567,Fd=Math.PI/180,Ud=180/Math.PI;function Bd(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Od[255&e]+Od[e>>8&255]+Od[e>>16&255]+Od[e>>24&255]+"-"+Od[255&t]+Od[t>>8&255]+"-"+Od[t>>16&15|64]+Od[t>>24&255]+"-"+Od[63&n|128]+Od[n>>8&255]+"-"+Od[n>>16&255]+Od[n>>24&255]+Od[255&r]+Od[r>>8&255]+Od[r>>16&255]+Od[r>>24&255]).toLowerCase()}function Vd(e,t,n){return Math.max(t,Math.min(n,e))}function jd(e,t){return(e%t+t)%t}function Hd(e,t,n){return(1-n)*e+n*t}function Wd(e){return 0===(e&e-1)&&0!==e}function Gd(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function qd(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Xd=Object.freeze({__proto__:null,DEG2RAD:Fd,RAD2DEG:Ud,generateUUID:Bd,clamp:Vd,euclideanModulo:jd,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Hd,damp:function(e,t,n,r){return Hd(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(jd(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(zd=e);var t=zd+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Fd},radToDeg:function(e){return e*Ud},isPowerOfTwo:Wd,ceilPowerOfTwo:Gd,floorPowerOfTwo:qd,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),f=a((t-r)/2),h=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*f,u*h,s*l);break;case"YZY":e.set(u*h,s*c,u*f,s*l);break;case"ZXZ":e.set(u*f,u*h,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}}),Yd=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return _e(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),Zd=function(){function e(){ye(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return _e(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=a*p+o*g+s*_,i[3]=a*v+o*y+s*x,i[6]=a*m+o*b+s*w,i[1]=u*p+l*g+c*_,i[4]=u*v+l*y+c*x,i[7]=u*m+l*b+c*w,i[2]=f*p+h*g+d*_,i[5]=f*v+h*y+d*x,i[8]=f*m+h*b+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,f=o*s-l*i,h=u*i-a*s,d=t*c+n*f+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=f*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function $d(e){for(var t=e.length-1;t>=0;--t)if(e[t]>65535)return!0;return!1}var Jd={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Kd(e,t){return new Jd[e](t)}function Qd(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ep(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function tp(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var np=(fe(sc={},ad,fe({},od,ep)),fe(sc,od,fe({},ad,tp)),sc),rp={legacyMode:!0,get workingColorSpace(){return od},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(np[t]&&void 0!==np[t][n]){var r=np[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},ip={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ap={r:0,g:0,b:0},op={h:0,s:0,l:0},sp={h:0,s:0,l:0};function up(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function lp(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var cp,fp=function(e){function t(e,n,r){return ye(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}return _e(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ad;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,rp.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:od;return this.r=e,this.g=t,this.b=n,rp.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:od;if(e=jd(e,1),t=Vd(t,0,1),n=Vd(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=up(a,i,e+1/3),this.g=up(a,i,e),this.b=up(a,i,e-1/3)}return rp.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ad;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,rp.toWorkingColorSpace(this,n),r(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,rp.toWorkingColorSpace(this,n),r(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,u=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return r(i[4]),this.setHSL(s,u,l,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],f=c.length;if(3===f)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,rp.toWorkingColorSpace(this,n),this;if(6===f)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,rp.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ad,n=ip[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=ep(e.r),this.g=ep(e.g),this.b=ep(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=tp(e.r),this.g=tp(e.g),this.b=tp(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad;return rp.fromWorkingColorSpace(lp(this,ap),e),Vd(255*ap.r,0,255)<<16^Vd(255*ap.g,0,255)<<8^Vd(255*ap.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:od;rp.fromWorkingColorSpace(lp(this,ap),t);var n,r,i=ap.r,a=ap.g,o=ap.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:od;return rp.fromWorkingColorSpace(lp(this,ap),t),e.r=ap.r,e.g=ap.g,e.b=ap.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad;return rp.fromWorkingColorSpace(lp(this,ap),e),e!==ad?"color(".concat(e," ").concat(ap.r," ").concat(ap.g," ").concat(ap.b,")"):"rgb(".concat(255*ap.r|0,",").concat(255*ap.g|0,",").concat(255*ap.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(op),op.h+=e,op.s+=t,op.l+=n,this.setHSL(op.h,op.s,op.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(op),e.getHSL(sp);var n=Hd(op.h,sp.h,t),r=Hd(op.s,sp.s,t),i=Hd(op.l,sp.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();fp.NAMES=ip;var hp=function(){function e(){ye(this,e)}return _e(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===cp&&(cp=Qd("canvas")),cp.width=e.width,cp.height=e.height;var n=cp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=cp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=Qd("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*ep(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*ep(o[s]/255)):o[s]=ep(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),dp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;ye(this,e),this.isSource=!0,this.uuid=Bd(),this.data=t,this.version=0}return _e(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(pp(r[a].image)):i.push(pp(r[a]))}else i=pp(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function pp(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?hp.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var vp=0,mp=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pf,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pf,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ff,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vf,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nh,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Hf,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Kh;return ye(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(pe(e),"id",{value:vp++}),e.uuid=Bd(),e.name="",e.source=new dp(r),e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=f,e.format=l,e.internalFormat=null,e.type=c,e.offset=new Yd(0,0),e.repeat=new Yd(1,1),e.center=new Yd(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Zd,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=h,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return _e(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==kf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rf:e.x=e.x-Math.floor(e.x);break;case Pf:e.x=e.x<0?0:1;break;case Lf:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Rf:e.y=e.y-Math.floor(e.y);break;case Pf:e.y=e.y<0?0:1;break;case Lf:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Dd);mp.DEFAULT_IMAGE=null,mp.DEFAULT_MAPPING=kf;var gp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ye(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return _e(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],f=s[1],h=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-f)<a&&Math.abs(c-p)<a&&Math.abs(d-v)<a){if(Math.abs(l+f)<o&&Math.abs(c+p)<o&&Math.abs(d+v)<o&&Math.abs(u+h+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(h+1)/2,b=(m+1)/2,_=(l+f)/4,x=(c+p)/4,w=(d+v)/4;return g>y&&g>b?g<a?(n=0,r=.707106781,i=.707106781):(r=_/(n=Math.sqrt(g)),i=x/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=_/(r=Math.sqrt(y)),i=w/r):b<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(b)),r=w/i),this.set(n,r,i,t),this}var S=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(f-l)*(f-l));return Math.abs(S)<.001&&(S=1),this.x=(v-d)/S,this.y=(c-p)/S,this.z=(f-l)/S,this.w=Math.acos((u+h+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),yp=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ye(this,n),(i=t.call(this)).isWebGLRenderTarget=!0,i.width=e,i.height=r,i.depth=1,i.scissor=new gp(0,0,e,r),i.scissorTest=!1,i.viewport=new gp(0,0,e,r);var o={width:e,height:r,depth:1};return i.texture=new mp(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.flipY=!1,i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:Ff,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i.samples=void 0!==a.samples?a.samples:0,i}return _e(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new dp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Dd),bp=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ye(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Nf,e.minFilter=Nf,e.wrapR=Pf,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _e(n)}(mp),_p=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,e,r)).isWebGLArrayRenderTarget=!0,a.depth=i,a.texture=new bp(null,e,r,i),a.texture.isRenderTargetTexture=!0,a}return _e(n)}(yp),xp=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ye(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=Nf,e.minFilter=Nf,e.wrapR=Pf,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _e(n)}(mp),wp=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,e,r)).isWebGL3DRenderTarget=!0,a.depth=i,a.texture=new xp(null,e,r,i),a.texture.isRenderTargetTexture=!0,a}return _e(n)}(yp),Sp=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ye(this,n),(a=t.call(this,e,r,o)).isWebGLMultipleRenderTargets=!0;var s=a.texture;a.texture=[];for(var u=0;u<i;u++)a.texture[u]=s.clone(),a.texture[u].isRenderTargetTexture=!0;return a}return _e(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(yp),kp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ye(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return _e(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),f=s(n/2),h=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"YXZ":this._x=f*l*c+u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"ZXY":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c-f*h*d;break;case"ZYX":this._x=f*l*c-u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c+f*h*d;break;case"YZX":this._x=f*l*c+u*h*d,this._y=u*h*c+f*l*d,this._z=u*l*d-f*h*c,this._w=u*l*c-f*h*d;break;case"XZY":this._x=f*l*c-u*h*d,this._y=u*h*c-f*l*d,this._z=u*l*d+f*h*c,this._w=u*l*c+f*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],f=n+o+c;if(f>0){var h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(l-s)*h,this._y=(i-u)*h,this._z=(a-r)*h}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Vd(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),f=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=f,e[t+1]=h,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==f||u!==h||l!==d){var v=1-o,m=s*f+u*h+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,o=Math.sin(o*_)/b}var x=o*g;if(s=s*v+f*x,u=u*v+h*x,l=l*v+d*x,c=c*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],f=i[a+1],h=i[a+2],d=i[a+3];return e[t]=o*d+l*c+s*h-u*f,e[t+1]=s*d+l*f+u*c-o*h,e[t+2]=u*d+l*h+o*f-s*c,e[t+3]=l*d-o*c-s*f-u*h,e}}]),t}(),Mp=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;ye(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return _e(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(Tp.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(Tp.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Ep.copy(this).projectOnVector(e),this.sub(Ep)}},{key:"reflect",value:function(e){return this.sub(Ep.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Vd(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Ep=new Mp,Tp=new kp,Cp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp(-1/0,-1/0,-1/0);ye(this,e),this.isBox3=!0,this.min=t,this.max=n}return _e(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<n&&(n=c),f<r&&(r=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=Rp.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var r=n.attributes.position,i=0,a=r.count;i<a;i++)Rp.fromBufferAttribute(r,i).applyMatrix4(e.matrixWorld),this.expandByPoint(Rp);else null===n.boundingBox&&n.computeBoundingBox(),Pp.copy(n.boundingBox),Pp.applyMatrix4(e.matrixWorld),this.union(Pp);for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,Rp),Rp.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Fp),Up.subVectors(this.max,Fp),Lp.subVectors(e.a,Fp),Np.subVectors(e.b,Fp),Ip.subVectors(e.c,Fp),Dp.subVectors(Np,Lp),Op.subVectors(Ip,Np),zp.subVectors(Lp,Ip);var t=[0,-Dp.z,Dp.y,0,-Op.z,Op.y,0,-zp.z,zp.y,Dp.z,0,-Dp.x,Op.z,0,-Op.x,zp.z,0,-zp.x,-Dp.y,Dp.x,0,-Op.y,Op.x,0,-zp.y,zp.x,0];return!!jp(t,Lp,Np,Ip,Up)&&(!!jp(t=[1,0,0,0,1,0,0,0,1],Lp,Np,Ip,Up)&&(Bp.crossVectors(Dp,Op),jp(t=[Bp.x,Bp.y,Bp.z],Lp,Np,Ip,Up)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return Rp.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Rp).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Ap[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ap[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ap[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ap[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ap[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ap[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ap[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ap[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ap)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Ap=[new Mp,new Mp,new Mp,new Mp,new Mp,new Mp,new Mp,new Mp],Rp=new Mp,Pp=new Cp,Lp=new Mp,Np=new Mp,Ip=new Mp,Dp=new Mp,Op=new Mp,zp=new Mp,Fp=new Mp,Up=new Mp,Bp=new Mp,Vp=new Mp;function jp(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){Vp.fromArray(e,a);var s=i.x*Math.abs(Vp.x)+i.y*Math.abs(Vp.y)+i.z*Math.abs(Vp.z),u=t.dot(Vp),l=n.dot(Vp),c=r.dot(Vp);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var Hp=new Cp,Wp=new Mp,Gp=new Mp,qp=new Mp,Xp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;ye(this,e),this.center=t,this.radius=n}return _e(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Hp.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){qp.subVectors(e,this.center);var t=qp.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(qp.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?Gp.set(0,0,1).multiplyScalar(e.radius):Gp.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Wp.copy(e.center).add(Gp)),this.expandByPoint(Wp.copy(e.center).sub(Gp)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Yp=new Mp,Zp=new Mp,$p=new Mp,Jp=new Mp,Kp=new Mp,Qp=new Mp,ev=new Mp,tv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp(0,0,-1);ye(this,e),this.origin=t,this.direction=n}return _e(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Yp)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Yp.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Yp.copy(this.direction).multiplyScalar(t).add(this.origin),Yp.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Zp.copy(e).add(t).multiplyScalar(.5),$p.copy(t).sub(e).normalize(),Jp.copy(this.origin).sub(Zp);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot($p),c=Jp.dot(this.direction),f=-Jp.dot($p),h=Jp.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-f,s=u*d,(i=l*f-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*f)+h}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-f),u))*(a+2*f)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-f),u))*(a+2*f)+h):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-f),u))*(a+2*f)+h;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*f)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy($p).multiplyScalar(a).add(Zp),o}},{key:"intersectSphere",value:function(e,t){Yp.subVectors(e.center,this.origin);var n=Yp.dot(this.direction),r=Yp.dot(Yp)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,a=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,a=(e.min.y-f.y)*l),n>a||i>r?null:((i>n||n!==n)&&(n=i),(a<r||r!==r)&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Yp)}},{key:"intersectTriangle",value:function(e,t,n,r,i){Kp.subVectors(t,e),Qp.subVectors(n,e),ev.crossVectors(Kp,Qp);var a,o=this.direction.dot(ev);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Jp.subVectors(this.origin,e);var s=a*this.direction.dot(Qp.crossVectors(Jp,Qp));if(s<0)return null;var u=a*this.direction.dot(Kp.cross(Jp));if(u<0)return null;if(s+u>o)return null;var l=-a*Jp.dot(ev);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),nv=function(){function e(){ye(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return _e(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,f,h,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=f,m[3]=h,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/rv.setFromMatrixColumn(e,0).length(),i=1/rv.setFromMatrixColumn(e,1).length(),a=1/rv.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*l,h=a*c,d=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+d*u,t[5]=f-p*u,t[9]=-o*s,t[2]=p-f*u,t[6]=d+h*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,_=s*c,x=u*l,w=u*c;t[0]=b-w*o,t[4]=-a*c,t[8]=x+_*o,t[1]=_+x*o,t[5]=a*l,t[9]=w-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var S=a*l,k=a*c,M=o*l,E=o*c;t[0]=s*l,t[4]=M*u-k,t[8]=S*u+E,t[1]=s*c,t[5]=E*u+S,t[9]=k*u-M,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,C=a*u,A=o*s,R=o*u;t[0]=s*l,t[4]=R-T*c,t[8]=A*c+C,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=C*c+A,t[10]=T-R*c}else if("XZY"===e.order){var P=a*s,L=a*u,N=o*s,I=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=P*c+I,t[5]=a*l,t[9]=L*c-N,t[2]=N*c-L,t[6]=o*l,t[10]=I*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(av,e,ov)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return lv.subVectors(e,t),0===lv.lengthSq()&&(lv.z=1),lv.normalize(),sv.crossVectors(n,lv),0===sv.lengthSq()&&(1===Math.abs(n.z)?lv.x+=1e-4:lv.z+=1e-4,lv.normalize(),sv.crossVectors(n,lv)),sv.normalize(),uv.crossVectors(lv,sv),r[0]=sv.x,r[4]=uv.x,r[8]=lv.x,r[1]=sv.y,r[5]=uv.y,r[9]=lv.y,r[2]=sv.z,r[6]=uv.z,r[10]=lv.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],k=r[12],M=r[1],E=r[5],T=r[9],C=r[13],A=r[2],R=r[6],P=r[10],L=r[14],N=r[3],I=r[7],D=r[11],O=r[15];return i[0]=a*x+o*M+s*A+u*N,i[4]=a*w+o*E+s*R+u*I,i[8]=a*S+o*T+s*P+u*D,i[12]=a*k+o*C+s*L+u*O,i[1]=l*x+c*M+f*A+h*N,i[5]=l*w+c*E+f*R+h*I,i[9]=l*S+c*T+f*P+h*D,i[13]=l*k+c*C+f*L+h*O,i[2]=d*x+p*M+v*A+m*N,i[6]=d*w+p*E+v*R+m*I,i[10]=d*S+p*T+v*P+m*D,i[14]=d*k+p*C+v*L+m*O,i[3]=g*x+y*M+b*A+_*N,i[7]=g*w+y*E+b*R+_*I,i[11]=g*S+y*T+b*P+_*D,i[15]=g*k+y*C+b*L+_*O,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],h=e[14];return e[3]*(+i*s*c-r*u*c-i*o*f+n*u*f+r*o*h-n*s*h)+e[7]*(+t*s*h-t*u*f+i*a*f-r*a*h+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*h-i*a*c+n*a*h+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*f+r*a*c-n*a*f+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*f*u+p*s*h-o*v*h-c*s*m+o*f*m,y=d*f*u-l*v*u-d*s*h+a*v*h+l*s*m-a*f*m,b=l*p*u-d*c*u+d*o*h-a*p*h-l*o*m+a*c*m,_=d*c*s-l*p*s-d*o*f+a*p*f+l*o*v-a*c*v,x=t*g+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*f*i-c*v*i-p*r*h+n*v*h+c*r*m-n*f*m)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,e[3]=(c*s*i-o*f*i-c*r*u+n*f*u+o*r*h-n*s*h)*w,e[4]=y*w,e[5]=(l*v*i-d*f*i+d*r*h-t*v*h-l*r*m+t*f*m)*w,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*w,e[7]=(a*f*i-l*s*i+l*r*u-t*f*u-a*r*h+t*s*h)*w,e[8]=b*w,e[9]=(d*c*i-l*p*i-d*n*h+t*p*h+l*n*m-t*c*m)*w,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*h-t*o*h)*w,e[12]=_*w,e[13]=(l*p*r-d*c*r+d*n*f-t*p*f-l*n*v+t*c*v)*w,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*f+t*o*f)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,f=i*u,h=i*l,d=i*c,p=a*l,v=a*c,m=o*c,g=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+m))*_,r[1]=(h+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(h-b)*x,r[5]=(1-(f+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(f+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=rv.set(r[0],r[1],r[2]).length(),a=rv.set(r[4],r[5],r[6]).length(),o=rv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],iv.copy(this);var s=1/i,u=1/a,l=1/o;return iv.elements[0]*=s,iv.elements[1]*=s,iv.elements[2]*=s,iv.elements[4]*=u,iv.elements[5]*=u,iv.elements[6]*=u,iv.elements[8]*=l,iv.elements[9]*=l,iv.elements[10]*=l,t.setFromRotationMatrix(iv),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),f=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,f=(n+r)*u,h=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),rv=new Mp,iv=new nv,av=new Mp(0,0,0),ov=new Mp(1,1,1),sv=new Mp,uv=new Mp,lv=new Mp,cv=new nv,fv=new kp,hv=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;ye(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return _e(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Vd(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Vd(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Vd(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Vd(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Vd(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Vd(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return cv.makeRotationFromQuaternion(e),this.setFromRotationMatrix(cv,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return fv.setFromEuler(this),this.setFromQuaternion(fv,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();hv.DefaultOrder="XYZ",hv.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var dv=function(){function e(){ye(this,e),this.mask=1}return _e(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),pv=0,vv=new Mp,mv=new kp,gv=new nv,yv=new Mp,bv=new Mp,_v=new Mp,xv=new kp,wv=new Mp(1,0,0),Sv=new Mp(0,1,0),kv=new Mp(0,0,1),Mv={type:"added"},Ev={type:"removed"},Tv=function(e){ve(n,e);var t=ge(n);function n(){var e;ye(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(pe(e),"id",{value:pv++}),e.uuid=Bd(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new Mp,i=new hv,a=new kp,o=new Mp(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(pe(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new nv},normalMatrix:{value:new Zd}}),e.matrix=new nv,e.matrixWorld=new nv,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new dv,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return _e(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return mv.setFromAxisAngle(e,t),this.quaternion.multiply(mv),this}},{key:"rotateOnWorldAxis",value:function(e,t){return mv.setFromAxisAngle(e,t),this.quaternion.premultiply(mv),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(wv,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Sv,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(kv,e)}},{key:"translateOnAxis",value:function(e,t){return vv.copy(e).applyQuaternion(this.quaternion),this.position.add(vv.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(wv,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Sv,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(kv,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(gv.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?yv.copy(e):yv.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),bv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gv.lookAt(bv,yv,this.up):gv.lookAt(yv,bv,this.up),this.quaternion.setFromRotationMatrix(gv),r&&(gv.extractRotation(r.matrixWorld),mv.setFromRotationMatrix(gv),this.quaternion.premultiply(mv.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Mv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Ev)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(Ev)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),gv.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),gv.multiply(e.parent.matrixWorld)),e.applyMatrix4(gv),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bv,e,_v),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bv,xv,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],f=0,h=this.material.length;f<h;f++)c.push(i(e.materials,this.material[f]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var d=0;d<this.children.length;d++)r.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var v=this.animations[p];r.animations.push(i(e.animations,v))}}if(t){var m=k(e.geometries),g=k(e.materials),y=k(e.textures),b=k(e.images),_=k(e.shapes),x=k(e.skeletons),w=k(e.animations),S=k(e.nodes);m.length>0&&(n.geometries=m),g.length>0&&(n.materials=g),y.length>0&&(n.textures=y),b.length>0&&(n.images=b),_.length>0&&(n.shapes=_),x.length>0&&(n.skeletons=x),w.length>0&&(n.animations=w),S.length>0&&(n.nodes=S)}return n.object=r,n;function k(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(Dd);Tv.DefaultUp=new Mp(0,1,0),Tv.DefaultMatrixAutoUpdate=!0;var Cv=new Mp,Av=new Mp,Rv=new Mp,Pv=new Mp,Lv=new Mp,Nv=new Mp,Iv=new Mp,Dv=new Mp,Ov=new Mp,zv=new Mp,Fv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp;ye(this,e),this.a=t,this.b=n,this.c=r}return _e(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Cv.subVectors(this.c,this.b),Av.subVectors(this.a,this.b),.5*Cv.cross(Av).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Lv.subVectors(a,i),Nv.subVectors(o,i),Dv.subVectors(e,i);var s=Lv.dot(Dv),u=Nv.dot(Dv);if(s<=0&&u<=0)return t.copy(i);Ov.subVectors(e,a);var l=Lv.dot(Ov),c=Nv.dot(Ov);if(l>=0&&c<=l)return t.copy(a);var f=s*c-l*u;if(f<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(Lv,n);zv.subVectors(e,o);var h=Lv.dot(zv),d=Nv.dot(zv);if(d>=0&&h<=d)return t.copy(o);var p=h*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(Nv,r);var v=l*d-h*c;if(v<=0&&c-l>=0&&h-d>=0)return Iv.subVectors(o,a),r=(c-l)/(c-l+(h-d)),t.copy(a).addScaledVector(Iv,r);var m=1/(v+p+f);return n=p*m,r=f*m,t.copy(i).addScaledVector(Lv,n).addScaledVector(Nv,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Cv.subVectors(e,t),r.cross(Cv);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Cv.subVectors(r,t),Av.subVectors(n,t),Rv.subVectors(e,t);var a=Cv.dot(Cv),o=Cv.dot(Av),s=Cv.dot(Rv),u=Av.dot(Av),l=Av.dot(Rv),c=a*u-o*o;if(0===c)return i.set(-2,-1,-1);var f=1/c,h=(u*s-o*l)*f,d=(a*l-o*s)*f;return i.set(1-h-d,d,h)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,Pv),Pv.x>=0&&Pv.y>=0&&Pv.x+Pv.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,Pv),s.set(0,0),s.addScaledVector(i,Pv.x),s.addScaledVector(a,Pv.y),s.addScaledVector(o,Pv.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return Cv.subVectors(n,t),Av.subVectors(e,t),Cv.cross(Av).dot(r)<0}}]),e}(),Uv=0,Bv=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(pe(e),"id",{value:Uv++}),e.uuid=Bd(),e.name="",e.type="Material",e.blending=Uc,e.side=Nc,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=Qc,e.blendDst=ef,e.blendEquation=Wc,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=cf,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=wd,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=ud,e.stencilZFail=ud,e.stencilZPass=ud,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return _e(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Oc;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Uc&&(n.blending=this.blending),this.side!==Nc&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Dd),Vv=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.type="MeshBasicMaterial",r.color=new fp(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=vf,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Bv),jv=new Mp,Hv=new Yd,Wv=function(){function e(t,n,r){if(ye(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Sd,this.updateRange={offset:0,count:-1},this.version=0}return _e(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new fp),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Yd),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new Mp),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new gp),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Hv.fromBufferAttribute(this,t),Hv.applyMatrix3(e),this.setXY(t,Hv.x,Hv.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)jv.fromBufferAttribute(this,r),jv.applyMatrix3(e),this.setXYZ(r,jv.x,jv.y,jv.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)jv.fromBufferAttribute(this,t),jv.applyMatrix4(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)jv.fromBufferAttribute(this,t),jv.applyNormalMatrix(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)jv.fromBufferAttribute(this,t),jv.transformDirection(e),this.setXYZ(t,jv.x,jv.y,jv.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Sd&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}(),Gv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Int8Array(e),r,i)}return _e(n)}(Wv),qv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Uint8Array(e),r,i)}return _e(n)}(Wv),Xv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return _e(n)}(Wv),Yv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Int16Array(e),r,i)}return _e(n)}(Wv),Zv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Uint16Array(e),r,i)}return _e(n)}(Wv),$v=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Int32Array(e),r,i)}return _e(n)}(Wv),Jv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Uint32Array(e),r,i)}return _e(n)}(Wv),Kv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,new Uint16Array(e),r,i)).isFloat16BufferAttribute=!0,a}return _e(n)}(Wv),Qv=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Float32Array(e),r,i)}return _e(n)}(Wv),em=function(e){ve(n,e);var t=ge(n);function n(e,r,i){return ye(this,n),t.call(this,new Float64Array(e),r,i)}return _e(n)}(Wv),tm=0,nm=new nv,rm=new Tv,im=new Mp,am=new Cp,om=new Cp,sm=new Mp,um=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(pe(e),"id",{value:tm++}),e.uuid=Bd(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return _e(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new($d(e)?Jv:Zv)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Zd).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return nm.makeRotationFromQuaternion(e),this.applyMatrix4(nm),this}},{key:"rotateX",value:function(e){return nm.makeRotationX(e),this.applyMatrix4(nm),this}},{key:"rotateY",value:function(e){return nm.makeRotationY(e),this.applyMatrix4(nm),this}},{key:"rotateZ",value:function(e){return nm.makeRotationZ(e),this.applyMatrix4(nm),this}},{key:"translate",value:function(e,t,n){return nm.makeTranslation(e,t,n),this.applyMatrix4(nm),this}},{key:"scale",value:function(e,t,n){return nm.makeScale(e,t,n),this.applyMatrix4(nm),this}},{key:"lookAt",value:function(e){return rm.lookAt(e),rm.updateMatrix(),this.applyMatrix4(rm.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(im).negate(),this.translate(im.x,im.y,im.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Qv(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Cp);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Mp(-1/0,-1/0,-1/0),new Mp(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];am.setFromBufferAttribute(i),this.morphTargetsRelative?(sm.addVectors(this.boundingBox.min,am.min),this.boundingBox.expandByPoint(sm),sm.addVectors(this.boundingBox.max,am.max),this.boundingBox.expandByPoint(sm)):(this.boundingBox.expandByPoint(am.min),this.boundingBox.expandByPoint(am.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Xp);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Mp,1/0);if(e){var n=this.boundingSphere.center;if(am.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];om.setFromBufferAttribute(a),this.morphTargetsRelative?(sm.addVectors(am.min,om.min),am.expandByPoint(sm),sm.addVectors(am.max,om.max),am.expandByPoint(sm)):(am.expandByPoint(om.min),am.expandByPoint(om.max))}am.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)sm.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(sm));if(t)for(var l=0,c=t.length;l<c;l++)for(var f=t[l],h=this.morphTargetsRelative,d=0,p=f.count;d<p;d++)sm.fromBufferAttribute(f,d),h&&(im.fromBufferAttribute(e,d),sm.add(im)),o=Math.max(o,n.distanceToSquared(sm));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Wv(new Float32Array(4*o),4));for(var s=this.getAttribute("tangent").array,u=[],l=[],c=0;c<o;c++)u[c]=new Mp,l[c]=new Mp;var f=new Mp,h=new Mp,d=new Mp,p=new Yd,v=new Yd,m=new Yd,g=new Mp,y=new Mp,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var _=0,x=b.length;_<x;++_)for(var w=b[_],S=w.start,k=S,M=S+w.count;k<M;k+=3)O(n[k+0],n[k+1],n[k+2]);for(var E=new Mp,T=new Mp,C=new Mp,A=new Mp,R=0,P=b.length;R<P;++R)for(var L=b[R],N=L.start,I=N,D=N+L.count;I<D;I+=3)z(n[I+0]),z(n[I+1]),z(n[I+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function O(e,t,n){f.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),h.sub(f),d.sub(f),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function z(e){C.fromArray(i,3*e),A.copy(C);var t=u[e];E.copy(t),E.sub(C.multiplyScalar(C.dot(t))).normalize(),T.crossVectors(A,t);var n=T.dot(l[e])<0?-1:1;s[4*e]=E.x,s[4*e+1]=E.y,s[4*e+2]=E.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Wv(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new Mp,o=new Mp,s=new Mp,u=new Mp,l=new Mp,c=new Mp,f=new Mp,h=new Mp;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),f.subVectors(s,o),h.subVectors(a,o),f.cross(h),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(f),l.add(f),c.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),f.subVectors(s,o),h.subVectors(a,o),f.cross(h),n.setXYZ(y+0,f.x,f.y,f.z),n.setXYZ(y+1,f.x,f.y,f.z),n.setXYZ(y+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)sm.fromBufferAttribute(e,t),sm.normalize(),e.setXYZ(t,sm.x,sm.y,sm.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new Wv(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],f=0,h=c.length;f<h;f++){var d=e(c[f],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],f=[],h=0,d=c.length;h<d;h++){var p=c[h];f.push(p.toJSON(e.data))}f.length>0&&(s[l]=f,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var v=this.groups;v.length>0&&(e.data.groups=JSON.parse(JSON.stringify(v)));var m=this.boundingSphere;return null!==m&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,f=l.length;c<f;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,d=0,p=h.length;d<p;d++){var v=h[d];this.addGroup(v.start,v.count,v.materialIndex)}var m=e.boundingBox;null!==m&&(this.boundingBox=m.clone());var g=e.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Dd),lm=new nv,cm=new tv,fm=new Xp,hm=new Mp,dm=new Mp,pm=new Mp,vm=new Mp,mm=new Mp,gm=new Mp,ym=new Mp,bm=new Mp,_m=new Mp,xm=new Yd,wm=new Yd,Sm=new Yd,km=new Mp,Mm=new Mp,Em=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new um,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Vv;return ye(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),fm.copy(n.boundingSphere),fm.applyMatrix4(i),!1!==e.ray.intersectsSphere(fm)&&(lm.copy(i).invert(),cm.copy(e.ray).applyMatrix4(lm),null===n.boundingBox||!1!==cm.intersectsBox(n.boundingBox)))){var a,o=n.index,s=n.attributes.position,u=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,f=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(r))for(var p=0,v=h.length;p<v;p++)for(var m=h[p],g=r[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(o.count,Math.min(m.start+m.count,d.start+d.count));y<b;y+=3){var _=o.getX(y),x=o.getX(y+1),w=o.getX(y+2);(a=Tm(this,g,e,cm,s,u,l,c,f,_,x,w))&&(a.faceIndex=Math.floor(y/3),a.face.materialIndex=m.materialIndex,t.push(a))}else for(var S=Math.max(0,d.start),k=Math.min(o.count,d.start+d.count);S<k;S+=3){var M=o.getX(S),E=o.getX(S+1),T=o.getX(S+2);(a=Tm(this,r,e,cm,s,u,l,c,f,M,E,T))&&(a.faceIndex=Math.floor(S/3),t.push(a))}else if(void 0!==s)if(Array.isArray(r))for(var C=0,A=h.length;C<A;C++)for(var R=h[C],P=r[R.materialIndex],L=Math.max(R.start,d.start),N=Math.min(s.count,Math.min(R.start+R.count,d.start+d.count));L<N;L+=3){(a=Tm(this,P,e,cm,s,u,l,c,f,L,L+1,L+2))&&(a.faceIndex=Math.floor(L/3),a.face.materialIndex=R.materialIndex,t.push(a))}else for(var I=Math.max(0,d.start),D=Math.min(s.count,d.start+d.count);I<D;I+=3){(a=Tm(this,r,e,cm,s,u,l,c,f,I,I+1,I+2))&&(a.faceIndex=Math.floor(I/3),t.push(a))}}}}]),n}(Tv);function Tm(e,t,n,r,i,a,o,s,u,l,c,f){hm.fromBufferAttribute(i,l),dm.fromBufferAttribute(i,c),pm.fromBufferAttribute(i,f);var h=e.morphTargetInfluences;if(a&&h){ym.set(0,0,0),bm.set(0,0,0),_m.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=h[d],m=a[d];0!==v&&(vm.fromBufferAttribute(m,l),mm.fromBufferAttribute(m,c),gm.fromBufferAttribute(m,f),o?(ym.addScaledVector(vm,v),bm.addScaledVector(mm,v),_m.addScaledVector(gm,v)):(ym.addScaledVector(vm.sub(hm),v),bm.addScaledVector(mm.sub(dm),v),_m.addScaledVector(gm.sub(pm),v)))}hm.add(ym),dm.add(bm),pm.add(_m)}e.isSkinnedMesh&&(e.boneTransform(l,hm),e.boneTransform(c,dm),e.boneTransform(f,pm));var g=function(e,t,n,r,i,a,o,s){if(null===(t.side===Ic?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==Dc,s)))return null;Mm.copy(s),Mm.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Mm);return u<n.near||u>n.far?null:{distance:u,point:Mm.clone(),object:e}}(e,t,n,r,hm,dm,pm,km);if(g){s&&(xm.fromBufferAttribute(s,l),wm.fromBufferAttribute(s,c),Sm.fromBufferAttribute(s,f),g.uv=Fv.getUV(km,hm,dm,pm,xm,wm,Sm,new Yd)),u&&(xm.fromBufferAttribute(u,l),wm.fromBufferAttribute(u,c),Sm.fromBufferAttribute(u,f),g.uv2=Fv.getUV(km,hm,dm,pm,xm,wm,Sm,new Yd));var y={a:l,b:c,c:f,normal:new Mp,materialIndex:0};Fv.getNormal(hm,dm,pm,y.normal),g.face=y}return g}var Cm=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;ye(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=pe(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],f=[],h=[],d=[],p=0,v=0;function m(e,t,n,r,i,a,o,s,u,m,g){for(var y=a/u,b=o/m,_=a/2,x=o/2,w=s/2,S=u+1,k=m+1,M=0,E=0,T=new Mp,C=0;C<k;C++)for(var A=C*b-x,R=0;R<S;R++){var P=R*y-_;T[e]=P*r,T[t]=A*i,T[n]=w,f.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,h.push(T.x,T.y,T.z),d.push(R/u),d.push(1-C/m),M+=1}for(var L=0;L<m;L++)for(var N=0;N<u;N++){var I=p+N+S*L,D=p+N+S*(L+1),O=p+(N+1)+S*(L+1),z=p+(N+1)+S*L;c.push(I,D,z),c.push(D,O,z),E+=6}l.addGroup(v,E,g),v+=E,p+=M}return m("z","y","x",-1,-1,a,i,r,u,s,0),m("z","y","x",1,-1,a,i,-r,u,s,1),m("x","z","y",1,1,r,a,i,o,u,2),m("x","z","y",1,-1,r,a,-i,o,u,3),m("x","y","z",1,-1,r,i,a,o,s,4),m("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new Qv(f,3)),e.setAttribute("normal",new Qv(h,3)),e.setAttribute("uv",new Qv(d,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(um);function Am(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function Rm(e){for(var t={},n=0;n<e.length;n++){var r=Am(e[n]);for(var i in r)t[i]=r[i]}return t}var Pm={clone:Am,merge:Rm},Lm=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isShaderMaterial=!0,r.type="ShaderMaterial",r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Am(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(Bv),Nm=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new nv,e.projectionMatrix=new nv,e.projectionMatrixInverse=new nv,e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Hu(re(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Tv),Im=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return ye(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ud*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Fd*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Ud*Math.atan(Math.tan(.5*Fd*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Fd*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(Nm),Dm=90,Om=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;if(ye(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),me(a);a.renderTarget=i;var o=new Im(Dm,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new Mp(1,0,0)),a.add(o);var s=new Im(Dm,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new Mp(-1,0,0)),a.add(s);var u=new Im(Dm,1,e,r);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new Mp(0,1,0)),a.add(u);var l=new Im(Dm,1,e,r);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(new Mp(0,-1,0)),a.add(l);var c=new Im(Dm,1,e,r);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new Mp(0,0,1)),a.add(c);var f=new Im(Dm,1,e,r);return f.layers=a.layers,f.up.set(0,-1,0),f.lookAt(new Mp(0,0,-1)),a.add(f),a}return _e(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=c(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],f=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=yf,e.xr.enabled=!1;var p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=p,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(f),e.toneMapping=h,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}]),n}(Tv),zm=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s,u,l,c,f){var h;return ye(this,n),e=void 0!==e?e:[],r=void 0!==r?r:Mf,(h=t.call(this,e,r,i,a,o,s,u,l,c,f)).isCubeTexture=!0,h.flipY=!1,h}return _e(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(mp),Fm=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ye(this,n),(r=t.call(this,e,e,i)).isWebGLCubeRenderTarget=!0;var a={width:e,height:e,depth:1},o=[a,a,a,a,a,a];return r.texture=new zm(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,r.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ff,r}return _e(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Cm(5,5,5),o=new Lm({name:"CubemapFromEquirect",uniforms:Am(n),vertexShader:r,fragmentShader:i,side:Ic,blending:Fc});o.uniforms.tEquirect.value=t;var s=new Em(a,o),u=t.minFilter;return t.minFilter===Vf&&(t.minFilter=Ff),new Om(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(yp),Um=new Mp,Bm=new Mp,Vm=new Zd,jm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return _e(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=Um.subVectors(n,t).cross(Bm.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(Um),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Vm.getNormalMatrix(e),r=this.coplanarPoint(Um).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Hm=new Xp,Wm=new Mp,Gm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new jm,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jm,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new jm,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new jm,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new jm,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new jm;ye(this,e),this.planes=[t,n,r,i,a,o]}return _e(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],f=n[8],h=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-f,y-v).normalize(),t[1].setComponents(o+r,c+s,p+f,y+v).normalize(),t[2].setComponents(o+i,c+u,p+h,y+m).normalize(),t[3].setComponents(o-i,c-u,p-h,y-m).normalize(),t[4].setComponents(o-a,c-l,p-d,y-g).normalize(),t[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Hm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Hm)}},{key:"intersectsSprite",value:function(e){return Hm.center.set(0,0,0),Hm.radius=.7071067811865476,Hm.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hm)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(Wm.x=r.normal.x>0?e.max.x:e.min.x,Wm.y=r.normal.y>0?e.max.y:e.min.y,Wm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Wm)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function qm(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Xm(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i,a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");i=5131}else i=5123;else if(a instanceof Int16Array)i=5122;else if(a instanceof Uint32Array)i=5125;else if(a instanceof Int32Array)i=5124;else if(a instanceof Int8Array)i=5120;else if(a instanceof Uint8Array)i=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);i=5121}return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var Ym=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;ye(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),f=l+1,h=c+1,d=r/l,p=i/c,v=[],m=[],g=[],y=[],b=0;b<h;b++)for(var _=b*p-u,x=0;x<f;x++){var w=x*d-s;m.push(w,-_,0),g.push(0,0,1),y.push(x/l),y.push(1-b/c)}for(var S=0;S<c;S++)for(var k=0;k<l;k++){var M=k+f*S,E=k+f*(S+1),T=k+1+f*(S+1),C=k+1+f*S;v.push(M,E,C),v.push(E,T,C)}return e.setIndex(v),e.setAttribute("position",new Qv(m,3)),e.setAttribute("normal",new Qv(g,3)),e.setAttribute("uv",new Qv(y,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(um),Zm={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},$m={common:{diffuse:{value:new fp(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zd},uv2Transform:{value:new Zd},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yd(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fp(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fp(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zd}},sprite:{diffuse:{value:new fp(16777215)},opacity:{value:1},center:{value:new Yd(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zd}}},Jm={basic:{uniforms:Rm([$m.common,$m.specularmap,$m.envmap,$m.aomap,$m.lightmap,$m.fog]),vertexShader:Zm.meshbasic_vert,fragmentShader:Zm.meshbasic_frag},lambert:{uniforms:Rm([$m.common,$m.specularmap,$m.envmap,$m.aomap,$m.lightmap,$m.emissivemap,$m.fog,$m.lights,{emissive:{value:new fp(0)}}]),vertexShader:Zm.meshlambert_vert,fragmentShader:Zm.meshlambert_frag},phong:{uniforms:Rm([$m.common,$m.specularmap,$m.envmap,$m.aomap,$m.lightmap,$m.emissivemap,$m.bumpmap,$m.normalmap,$m.displacementmap,$m.fog,$m.lights,{emissive:{value:new fp(0)},specular:{value:new fp(1118481)},shininess:{value:30}}]),vertexShader:Zm.meshphong_vert,fragmentShader:Zm.meshphong_frag},standard:{uniforms:Rm([$m.common,$m.envmap,$m.aomap,$m.lightmap,$m.emissivemap,$m.bumpmap,$m.normalmap,$m.displacementmap,$m.roughnessmap,$m.metalnessmap,$m.fog,$m.lights,{emissive:{value:new fp(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zm.meshphysical_vert,fragmentShader:Zm.meshphysical_frag},toon:{uniforms:Rm([$m.common,$m.aomap,$m.lightmap,$m.emissivemap,$m.bumpmap,$m.normalmap,$m.displacementmap,$m.gradientmap,$m.fog,$m.lights,{emissive:{value:new fp(0)}}]),vertexShader:Zm.meshtoon_vert,fragmentShader:Zm.meshtoon_frag},matcap:{uniforms:Rm([$m.common,$m.bumpmap,$m.normalmap,$m.displacementmap,$m.fog,{matcap:{value:null}}]),vertexShader:Zm.meshmatcap_vert,fragmentShader:Zm.meshmatcap_frag},points:{uniforms:Rm([$m.points,$m.fog]),vertexShader:Zm.points_vert,fragmentShader:Zm.points_frag},dashed:{uniforms:Rm([$m.common,$m.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zm.linedashed_vert,fragmentShader:Zm.linedashed_frag},depth:{uniforms:Rm([$m.common,$m.displacementmap]),vertexShader:Zm.depth_vert,fragmentShader:Zm.depth_frag},normal:{uniforms:Rm([$m.common,$m.bumpmap,$m.normalmap,$m.displacementmap,{opacity:{value:1}}]),vertexShader:Zm.meshnormal_vert,fragmentShader:Zm.meshnormal_frag},sprite:{uniforms:Rm([$m.sprite,$m.fog]),vertexShader:Zm.sprite_vert,fragmentShader:Zm.sprite_frag},background:{uniforms:{uvTransform:{value:new Zd},t2D:{value:null}},vertexShader:Zm.background_vert,fragmentShader:Zm.background_frag},cube:{uniforms:Rm([$m.envmap,{opacity:{value:1}}]),vertexShader:Zm.cube_vert,fragmentShader:Zm.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zm.equirect_vert,fragmentShader:Zm.equirect_frag},distanceRGBA:{uniforms:Rm([$m.common,$m.displacementmap,{referencePosition:{value:new Mp},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zm.distanceRGBA_vert,fragmentShader:Zm.distanceRGBA_frag},shadow:{uniforms:Rm([$m.lights,$m.fog,{color:{value:new fp(0)},opacity:{value:1}}]),vertexShader:Zm.shadow_vert,fragmentShader:Zm.shadow_frag}};function Km(e,t,n,r,i,a){var o,s,u=new fp(0),l=!0===i?0:1,c=null,f=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return u},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u.set(e),d(u,l=t)},getClearAlpha:function(){return l},setClearAlpha:function(e){d(u,l=e)},render:function(n,i){var a=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?d(u,l):p&&p.isColor&&(d(p,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Af)?(void 0===s&&((s=new Em(new Cm(1,1,1),new Lm({name:"BackgroundCubeMaterial",uniforms:Am(Jm.cube.uniforms),vertexShader:Jm.cube.vertexShader,fragmentShader:Jm.cube.fragmentShader,side:Ic,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,c===p&&f===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=p,f=p.version,h=e.toneMapping),s.layers.enableAll(),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===o&&((o=new Em(new Ym(2,2),new Lm({name:"BackgroundMaterial",uniforms:Am(Jm.background.uniforms),vertexShader:Jm.background.vertexShader,fragmentShader:Jm.background.fragmentShader,side:Nc,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&f===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=p,f=p.version,h=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Qm(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=d(null),l=u,c=!1;function f(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function v(e){m(e,0)}function m(n,i){var a=l.newAttributes,o=l.enabledAttributes,s=l.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function b(){_(),c=!0,l!==u&&f((l=u).object)}function _(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,b,_){var x=!1;if(o){var w=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(u={},s[t.id]=u);var l=u[n.id];void 0===l&&(l={},u[n.id]=l);var c=l[o];void 0===c&&(c=d(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c);return c}(b,h,u);l!==w&&f((l=w).object),x=function(e,t,n,r){var i=l.attributes,a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=i[u],f=a[u];if(void 0===f&&("instanceMatrix"===u&&e.instanceMatrix&&(f=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(f=e.instanceColor)),void 0===c)return!0;if(c.attribute!==f)return!0;if(f&&c.data!==f.data)return!0;o++}}return l.attributesNum!==o||l.index!==r}(i,b,h,_),x&&function(e,t,n,r){var i={},a=t.attributes,o=0,s=n.getAttributes();for(var u in s){if(s[u].location>=0){var c=a[u];void 0===c&&("instanceMatrix"===u&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===u&&e.instanceColor&&(c=e.instanceColor));var f={};f.attribute=c,c&&c.data&&(f.data=c.data),i[u]=f,o++}}l.attributes=i,l.attributesNum=o,l.index=r}(i,b,h,_)}else{var S=!0===u.wireframe;l.geometry===b.id&&l.program===h.id&&l.wireframe===S||(l.geometry=b.id,l.program=h.id,l.wireframe=S,x=!0)}null!==_&&n.update(_,34963),(x||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var f in l){var h=l[f];if(h.location>=0){var d=u[f];if(void 0===d&&("instanceMatrix"===f&&i.instanceMatrix&&(d=i.instanceMatrix),"instanceColor"===f&&i.instanceColor&&(d=i.instanceColor)),void 0!==d){var b=d.normalized,_=d.itemSize,x=n.get(d);if(void 0===x)continue;var w=x.buffer,S=x.type,k=x.bytesPerElement;if(d.isInterleavedBufferAttribute){var M=d.data,E=M.stride,T=d.offset;if(M.isInstancedInterleavedBuffer){for(var C=0;C<h.locationSize;C++)m(h.location+C,M.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var A=0;A<h.locationSize;A++)v(h.location+A);e.bindBuffer(34962,w);for(var R=0;R<h.locationSize;R++)y(h.location+R,_/h.locationSize,S,b,E*k,(T+_/h.locationSize*R)*k)}else{if(d.isInstancedBufferAttribute){for(var P=0;P<h.locationSize;P++)m(h.location+P,d.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var L=0;L<h.locationSize;L++)v(h.location+L);e.bindBuffer(34962,w);for(var N=0;N<h.locationSize;N++)y(h.location+N,_/h.locationSize,S,b,_*k,_/h.locationSize*N*k)}}else if(void 0!==c){var I=c[f];if(void 0!==I)switch(I.length){case 2:e.vertexAttrib2fv(h.location,I);break;case 3:e.vertexAttrib3fv(h.location,I);break;case 4:e.vertexAttrib4fv(h.location,I);break;default:e.vertexAttrib1fv(h.location,I)}}}}g()}(i,u,h,b),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){for(var e in b(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:p,enableAttribute:v,disableUnusedAttributes:g}}function eg(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function tg(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),f=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=f>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function ng(e){var t=this,n=null,r=0,i=!1,a=!1,o=new jm,s=new Zd,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,f=n.matrixWorldInverse;s.getNormalMatrix(f),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,d=r;h!==a;++h,d+=4)o.copy(e[h]).applyMatrix4(f,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){var f=t.clippingPlanes,h=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===f||0===f.length||a&&!d)a?c(null):l();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(f,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=v}}}function rg(e){var t=new WeakMap;function n(e,t){return t===Tf?e.mapping=Mf:t===Cf&&(e.mapping=Ef),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(a===Tf||a===Cf){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new Fm(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}Jm.physical={uniforms:Rm([Jm.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Yd(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new fp(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Yd},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new fp(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new fp(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Zm.meshphysical_vert,fragmentShader:Zm.meshphysical_frag};var ig=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return ye(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(Nm),ag=[.125,.215,.35,.446,.526,.582],og=20,sg=new ig,ug=new fp,lg=null,cg=(1+Math.sqrt(5))/2,fg=1/cg,hg=[new Mp(1,1,1),new Mp(-1,1,1),new Mp(1,1,-1),new Mp(-1,1,-1),new Mp(0,cg,fg),new Mp(0,cg,-fg),new Mp(fg,0,cg),new Mp(-fg,0,cg),new Mp(cg,fg,0),new Mp(-cg,fg,0)],dg=function(){function e(t){ye(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return _e(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;lg=this._renderer.getRenderTarget(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=gg(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=mg(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(lg),e.scissorTest=!1,vg(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Mf||e.mapping===Ef?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),lg=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ff,minFilter:Ff,generateMipmaps:!1,type:$f,format:nh,encoding:Kh,depthBuffer:!1},r=pg(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=pg(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+ag.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-4?u=ag[o-e+4-1]:0===o&&(u=0),r.push(u);for(var l=1/(s-2),c=-l,f=1+l,h=[c,c,f,c,f,f,c,c,f,f,c,f],d=6,p=6,v=3,m=2,g=1,y=new Float32Array(v*p*d),b=new Float32Array(m*p*d),_=new Float32Array(g*p*d),x=0;x<d;x++){var w=x%3*2/3-1,S=x>2?0:-1,k=[w,S,0,w+2/3,S,0,w+2/3,S+1,0,w,S,0,w+2/3,S+1,0,w,S+1,0];y.set(k,v*p*x),b.set(h,m*p*x);var M=[x,x,x,x,x,x];_.set(M,g*p*x)}var E=new um;E.setAttribute("position",new Wv(y,v)),E.setAttribute("uv",new Wv(b,m)),E.setAttribute("faceIndex",new Wv(_,g)),t.push(E),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(og),i=new Mp(0,1,0);return new Lm({name:"SphericalGaussianBlur",defines:{n:og,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Fc,depthTest:!1,depthWrite:!1})}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new Em(this._lodPlanes[0],e);this._renderer.compile(t,sg)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new Im(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(ug),s.toneMapping=yf,s.autoClear=!1;var c=new Vv({name:"PMREM.Background",side:Ic,depthWrite:!1,depthTest:!1}),f=new Em(new Cm,c),h=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,h=!0):(c.color.copy(ug),h=!0);for(var p=0;p<6;p++){var v=p%3;0===v?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===v?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var m=this._cubeSize;vg(r,v*m,p>2?m:0,m,m),s.setRenderTarget(r),h&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===Mf||e.mapping===Ef;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=gg()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=mg());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new Em(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;vg(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,sg)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var i=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=hg[(r-1)%hg.length];this._blur(e,r-1,r,i,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Em(this._lodPlanes[r],u),c=u.uniforms,f=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/39,d=i/h,p=isFinite(i)?1+Math.floor(3*d):og;p>og&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(og));for(var v=[],m=0,g=0;g<og;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0===g?m+=b:g<p&&(m+=2*b)}for(var _=0;_<v.length;_++)v[_]=v[_]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=h,c.mipInt.value=x-n;var w=this._sizeLods[r];vg(t,3*w*(r>x-4?r-x+4:0),4*(this._cubeSize-w),3*w,2*w),s.setRenderTarget(t),s.render(l,sg)}}]),e}();function pg(e,t,n){var r=new yp(e,t,n);return r.texture.mapping=Af,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vg(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function mg(){return new Lm({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Fc,depthTest:!1,depthWrite:!1})}function gg(){return new Lm({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Fc,depthTest:!1,depthWrite:!1})}function yg(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===Tf||a===Cf,s=a===Mf||a===Ef;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;var u=t.get(i);return null===n&&(n=new dg(e)),u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u),t.set(i,u),u.texture}if(t.has(i))return t.get(i).texture;var l=i.image;if(o&&l&&l.height>0||s&&l&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)){null===n&&(n=new dg(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function bg(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function _g(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],f=s[u+1],h=s[u+2];n.push(c,f,f,h,h,c)}}else{var d=i.array;o=i.version;for(var p=0,v=d.length/3-1;p<v;p+=3){var m=p+0,g=p+1,y=p+2;n.push(m,g,g,y,y,m)}}var b=new($d(n)?Jv:Zv)(n,1);b.version=o;var _=a.get(e);_&&t.remove(_),a.set(e,b)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function xg(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,f;if(s)c=e,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[f](i,u,a,r*o,l),n.update(u,i,l)}}}function wg(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Sg(e,t){return e[0]-t[0]}function kg(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Mg(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Uint8Array?n=255:r instanceof Uint16Array?n=65535:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Eg(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new gp,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,f){var h=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,p=void 0!==d?d.length:0,v=a.get(l);if(void 0===v||v.count!==p){void 0!==v&&v.texture.dispose();var m=void 0!==l.morphAttributes.position,g=void 0!==l.morphAttributes.normal,y=void 0!==l.morphAttributes.color,b=l.morphAttributes.position||[],_=l.morphAttributes.normal||[],x=l.morphAttributes.color||[],w=0;!0===m&&(w=1),!0===g&&(w=2),!0===y&&(w=3);var S=l.attributes.position.count*w,k=1;S>t.maxTextureSize&&(k=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);var M=new Float32Array(S*k*4*p),E=new bp(M,S,k,p);E.type=Zf,E.needsUpdate=!0;for(var T=4*w,C=0;C<p;C++)for(var A=b[C],R=_[C],P=x[C],L=S*k*4*C,N=0;N<A.count;N++){var I=N*T;!0===m&&(o.fromBufferAttribute(A,N),!0===A.normalized&&Mg(o,A),M[L+I+0]=o.x,M[L+I+1]=o.y,M[L+I+2]=o.z,M[L+I+3]=0),!0===g&&(o.fromBufferAttribute(R,N),!0===R.normalized&&Mg(o,R),M[L+I+4]=o.x,M[L+I+5]=o.y,M[L+I+6]=o.z,M[L+I+7]=0),!0===y&&(o.fromBufferAttribute(P,N),!0===P.normalized&&Mg(o,P),M[L+I+8]=o.x,M[L+I+9]=o.y,M[L+I+10]=o.z,M[L+I+11]=4===P.itemSize?o.w:1)}v={count:p,texture:E,size:new Yd(S,k)},a.set(l,v),l.addEventListener("dispose",(function e(){E.dispose(),a.delete(l),l.removeEventListener("dispose",e)}))}for(var D=0,O=0;O<h.length;O++)D+=h[O];var z=l.morphTargetsRelative?1:1-D;f.getUniforms().setValue(e,"morphTargetBaseInfluence",z),f.getUniforms().setValue(e,"morphTargetInfluences",h),f.getUniforms().setValue(e,"morphTargetsTexture",v.texture,n),f.getUniforms().setValue(e,"morphTargetsTextureSize",v.size)}else{var F=void 0===h?0:h.length,U=r[l.id];if(void 0===U||U.length!==F){U=[];for(var B=0;B<F;B++)U[B]=[B,0];r[l.id]=U}for(var V=0;V<F;V++){var j=U[V];j[0]=V,j[1]=h[V]}U.sort(kg);for(var H=0;H<8;H++)H<F&&U[H][1]?(s[H][0]=U[H][0],s[H][1]=U[H][1]):(s[H][0]=Number.MAX_SAFE_INTEGER,s[H][1]=0);s.sort(Sg);for(var W=l.morphAttributes.position,G=l.morphAttributes.normal,q=0,X=0;X<8;X++){var Y=s[X],Z=Y[0],$=Y[1];Z!==Number.MAX_SAFE_INTEGER&&$?(W&&l.getAttribute("morphTarget"+X)!==W[Z]&&l.setAttribute("morphTarget"+X,W[Z]),G&&l.getAttribute("morphNormal"+X)!==G[Z]&&l.setAttribute("morphNormal"+X,G[Z]),i[X]=$,q+=$):(W&&!0===l.hasAttribute("morphTarget"+X)&&l.deleteAttribute("morphTarget"+X),G&&!0===l.hasAttribute("morphNormal"+X)&&l.deleteAttribute("morphNormal"+X),i[X]=0)}var J=l.morphTargetsRelative?1:1-q;f.getUniforms().setValue(e,"morphTargetBaseInfluence",J),f.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Tg(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==o&&(t.update(u),i.set(u,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}var Cg=new mp,Ag=new bp,Rg=new xp,Pg=new zm,Lg=[],Ng=[],Ig=new Float32Array(16),Dg=new Float32Array(9),Og=new Float32Array(4);function zg(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=Lg[i];if(void 0===a&&(a=new Float32Array(i),Lg[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Fg(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ug(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Bg(e,t){var n=Ng[t];void 0===n&&(n=new Int32Array(t),Ng[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Vg(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function jg(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fg(n,t))return;e.uniform2fv(this.addr,t),Ug(n,t)}}function Hg(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Fg(n,t))return;e.uniform3fv(this.addr,t),Ug(n,t)}}function Wg(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fg(n,t))return;e.uniform4fv(this.addr,t),Ug(n,t)}}function Gg(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fg(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ug(n,t)}else{if(Fg(n,r))return;Og.set(r),e.uniformMatrix2fv(this.addr,!1,Og),Ug(n,r)}}function qg(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fg(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ug(n,t)}else{if(Fg(n,r))return;Dg.set(r),e.uniformMatrix3fv(this.addr,!1,Dg),Ug(n,r)}}function Xg(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Fg(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ug(n,t)}else{if(Fg(n,r))return;Ig.set(r),e.uniformMatrix4fv(this.addr,!1,Ig),Ug(n,r)}}function Yg(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Zg(e,t){var n=this.cache;Fg(n,t)||(e.uniform2iv(this.addr,t),Ug(n,t))}function $g(e,t){var n=this.cache;Fg(n,t)||(e.uniform3iv(this.addr,t),Ug(n,t))}function Jg(e,t){var n=this.cache;Fg(n,t)||(e.uniform4iv(this.addr,t),Ug(n,t))}function Kg(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Qg(e,t){var n=this.cache;Fg(n,t)||(e.uniform2uiv(this.addr,t),Ug(n,t))}function ey(e,t){var n=this.cache;Fg(n,t)||(e.uniform3uiv(this.addr,t),Ug(n,t))}function ty(e,t){var n=this.cache;Fg(n,t)||(e.uniform4uiv(this.addr,t),Ug(n,t))}function ny(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Cg,i)}function ry(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Rg,i)}function iy(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Pg,i)}function ay(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Ag,i)}function oy(e,t){e.uniform1fv(this.addr,t)}function sy(e,t){var n=zg(t,this.size,2);e.uniform2fv(this.addr,n)}function uy(e,t){var n=zg(t,this.size,3);e.uniform3fv(this.addr,n)}function ly(e,t){var n=zg(t,this.size,4);e.uniform4fv(this.addr,n)}function cy(e,t){var n=zg(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function fy(e,t){var n=zg(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function hy(e,t){var n=zg(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function dy(e,t){e.uniform1iv(this.addr,t)}function py(e,t){e.uniform2iv(this.addr,t)}function vy(e,t){e.uniform3iv(this.addr,t)}function my(e,t){e.uniform4iv(this.addr,t)}function gy(e,t){e.uniform1uiv(this.addr,t)}function yy(e,t){e.uniform2uiv(this.addr,t)}function by(e,t){e.uniform3uiv(this.addr,t)}function _y(e,t){e.uniform4uiv(this.addr,t)}function xy(e,t,n){var r=t.length,i=Bg(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2D(t[a]||Cg,i[a])}function wy(e,t,n){var r=t.length,i=Bg(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture3D(t[a]||Rg,i[a])}function Sy(e,t,n){var r=t.length,i=Bg(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTextureCube(t[a]||Pg,i[a])}function ky(e,t,n){var r=t.length,i=Bg(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.setTexture2DArray(t[a]||Ag,i[a])}var My=_e((function e(t,n,r){ye(this,e),this.id=t,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Vg;case 35664:return jg;case 35665:return Hg;case 35666:return Wg;case 35674:return Gg;case 35675:return qg;case 35676:return Xg;case 5124:case 35670:return Yg;case 35667:case 35671:return Zg;case 35668:case 35672:return $g;case 35669:case 35673:return Jg;case 5125:return Kg;case 36294:return Qg;case 36295:return ey;case 36296:return ty;case 35678:case 36198:case 36298:case 36306:case 35682:return ny;case 35679:case 36299:case 36307:return ry;case 35680:case 36300:case 36308:case 36293:return iy;case 36289:case 36303:case 36311:case 36292:return ay}}(n.type)})),Ey=_e((function e(t,n,r){ye(this,e),this.id=t,this.addr=r,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return oy;case 35664:return sy;case 35665:return uy;case 35666:return ly;case 35674:return cy;case 35675:return fy;case 35676:return hy;case 5124:case 35670:return dy;case 35667:case 35671:return py;case 35668:case 35672:return vy;case 35669:case 35673:return my;case 5125:return gy;case 36294:return yy;case 36295:return by;case 36296:return _y;case 35678:case 36198:case 36298:case 36306:case 35682:return xy;case 35679:case 36299:case 36307:return wy;case 35680:case 36300:case 36308:case 36293:return Sy;case 36289:case 36303:case 36311:case 36292:return ky}}(n.type)})),Ty=function(){function e(t){ye(this,e),this.id=t,this.seq=[],this.map={}}return _e(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),Cy=/(\w+)(\])?(\[|\.)?/g;function Ay(e,t){e.seq.push(t),e.map[t.id]=t}function Ry(e,t,n){var r=e.name,i=r.length;for(Cy.lastIndex=0;;){var a=Cy.exec(r),o=Cy.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){Ay(n,void 0===l?new My(s,e,t):new Ey(s,e,t));break}var c=n.map[s];void 0===c&&Ay(n,c=new Ty(s)),n=c}}var Py=function(){function e(t,n){ye(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,35718),i=0;i<r;++i){var a=t.getActiveUniform(n,i);Ry(a,t.getUniformLocation(n,a.name),this)}}return _e(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function Ly(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var Ny=0;function Iy(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function Dy(e,t){var n=function(e){switch(e){case Kh:return["Linear","( value )"];case Qh:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Oy(e,t){var n;switch(t){case bf:n="Linear";break;case _f:n="Reinhard";break;case xf:n="OptimizedCineon";break;case wf:n="ACESFilmic";break;case Sf:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function zy(e){return""!==e}function Fy(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Uy(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var By=/^[ \t]*#include +<([\w\d./]+)>/gm;function Vy(e){return e.replace(By,jy)}function jy(e,t){var n=Zm[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Vy(n)}var Hy=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Wy=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gy(e){return e.replace(Wy,Xy).replace(Hy,qy)}function qy(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Xy(e,t,n,r)}function Xy(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Yy(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Zy(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Rc?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Pc?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Lc&&(t="SHADOWMAP_TYPE_VSM"),t}(n),f=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Mf:case Ef:t="ENVMAP_TYPE_CUBE";break;case Af:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ef&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case vf:t="ENVMAP_BLENDING_MULTIPLY";break;case mf:t="ENVMAP_BLENDING_MIX";break;case gf:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zy).join("\n")}(n),m=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),g=o.createProgram(),y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[m].filter(zy).join("\n")).length>0&&(i+="\n"),(a=[v,m].filter(zy).join("\n")).length>0&&(a+="\n")):(i=[Yy(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zy).join("\n"),a=[v,Yy(n),"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==yf?"#define TONE_MAPPING":"",n.toneMapping!==yf?Zm.tonemapping_pars_fragment:"",n.toneMapping!==yf?Oy("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Zm.encodings_pars_fragment,Dy("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(zy).join("\n")),u=Uy(u=Fy(u=Vy(u),n),n),l=Uy(l=Fy(l=Vy(l),n),n),u=Gy(u),l=Gy(l),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Nd?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Nd?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var b,_,x=y+a+l,w=Ly(o,35633,y+i+u),S=Ly(o,35632,x);if(o.attachShader(g,w),o.attachShader(g,S),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),e.debug.checkShaderErrors){var k=o.getProgramInfoLog(g).trim(),M=o.getShaderInfoLog(w).trim(),E=o.getShaderInfoLog(S).trim(),T=!0,C=!0;if(!1===o.getProgramParameter(g,35714)){T=!1;var A=Iy(o,w,"vertex"),R=Iy(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+k+"\n"+A+"\n"+R)}else""!==k?console.warn("THREE.WebGLProgram: Program Info Log:",k):""!==M&&""!==E||(C=!1);C&&(this.diagnostics={runnable:T,programLog:k,vertexShader:{log:M,prefix:i},fragmentShader:{log:E,prefix:a}})}return o.deleteShader(w),o.deleteShader(S),this.getUniforms=function(){return void 0===b&&(b=new Py(o,g)),b},this.getAttributes=function(){return void 0===_&&(_=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,g)),_},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Ny++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=S,this}var $y=0,Jy=function(){function e(){ye(this,e),this.shaderCache=new Map,this.materialCache=new Map}return _e(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=ce(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(ZR){n.e(ZR)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache;if(!1===t.has(e)){var n=new Ky(e);t.set(e,n)}return t.get(e)}}]),e}(),Ky=_e((function e(t){ye(this,e),this.id=$y++,this.code=t,this.usedTimes=0}));function Qy(e,t,n,r,i,a,o){var s=new dv,u=new Jy,l=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,s,l,v,m){var g=v.fog,y=m.geometry,b=a.isMeshStandardMaterial?v.environment:null,_=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),x=_&&_.mapping===Af?_.image.height:null,w=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var S,k,M,E,T=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,C=void 0!==T?T.length:0,A=0;if(void 0!==y.morphAttributes.position&&(A=1),void 0!==y.morphAttributes.normal&&(A=2),void 0!==y.morphAttributes.color&&(A=3),w){var R=Jm[w];S=R.vertexShader,k=R.fragmentShader}else S=a.vertexShader,k=a.fragmentShader,u.update(a),M=u.getVertexShaderID(a),E=u.getFragmentShaderID(a);var P=e.getRenderTarget(),L=a.alphaTest>0,N=a.clearcoat>0,I=a.iridescence>0;return{isWebGL2:c,shaderID:w,shaderName:a.type,vertexShader:S,fragmentShader:k,defines:a.defines,customVertexShaderID:M,customFragmentShaderID:E,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===m.isInstancedMesh,instancingColor:!0===m.isInstancedMesh&&null!==m.instanceColor,supportsVertexTextures:h,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:Kh,map:!!a.map,matcap:!!a.matcap,envMap:!!_,envMapMode:_&&_.mapping,envMapCubeUVHeight:x,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===rd,tangentSpaceNormalMap:a.normalMapType===nd,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===Qh,clearcoat:N,clearcoatMap:N&&!!a.clearcoatMap,clearcoatRoughnessMap:N&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:N&&!!a.clearcoatNormalMap,iridescence:I,iridescenceMap:I&&!!a.iridescenceMap,iridescenceThicknessMap:I&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===Uc,alphaMap:!!a.alphaMap,alphaTest:L,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!g,useFog:!0===a.fog,fogExp2:g&&g.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:C,morphTextureStride:A,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:yf,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===Dc,flipSided:a.side===Ic,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.map&&s.enable(4);t.matcap&&s.enable(5);t.envMap&&s.enable(6);t.lightMap&&s.enable(7);t.aoMap&&s.enable(8);t.emissiveMap&&s.enable(9);t.bumpMap&&s.enable(10);t.normalMap&&s.enable(11);t.objectSpaceNormalMap&&s.enable(12);t.tangentSpaceNormalMap&&s.enable(13);t.clearcoat&&s.enable(14);t.clearcoatMap&&s.enable(15);t.clearcoatRoughnessMap&&s.enable(16);t.clearcoatNormalMap&&s.enable(17);t.iridescence&&s.enable(18);t.iridescenceMap&&s.enable(19);t.iridescenceThicknessMap&&s.enable(20);t.displacementMap&&s.enable(21);t.specularMap&&s.enable(22);t.roughnessMap&&s.enable(23);t.metalnessMap&&s.enable(24);t.gradientMap&&s.enable(25);t.alphaMap&&s.enable(26);t.alphaTest&&s.enable(27);t.vertexColors&&s.enable(28);t.vertexAlphas&&s.enable(29);t.vertexUvs&&s.enable(30);t.vertexTangents&&s.enable(31);t.uvsVertexOnly&&s.enable(32);t.fog&&s.enable(33);e.push(s.mask),s.disableAll(),t.useFog&&s.enable(0);t.flatShading&&s.enable(1);t.logarithmicDepthBuffer&&s.enable(2);t.skinning&&s.enable(3);t.morphTargets&&s.enable(4);t.morphNormals&&s.enable(5);t.morphColors&&s.enable(6);t.premultipliedAlpha&&s.enable(7);t.shadowMapEnabled&&s.enable(8);t.physicallyCorrectLights&&s.enable(9);t.doubleSided&&s.enable(10);t.flipSided&&s.enable(11);t.useDepthPacking&&s.enable(12);t.dithering&&s.enable(13);t.specularIntensityMap&&s.enable(14);t.specularColorMap&&s.enable(15);t.transmission&&s.enable(16);t.transmissionMap&&s.enable(17);t.thicknessMap&&s.enable(18);t.sheen&&s.enable(19);t.sheenColorMap&&s.enable(20);t.sheenRoughnessMap&&s.enable(21);t.decodeVideoTexture&&s.enable(22);t.opaque&&s.enable(23);e.push(s.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=Jm[n];t=Pm.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=l.length;i<o;i++){var s=l[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Zy(e,n,t,a),l.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:l,dispose:function(){u.dispose()}}}function eb(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function tb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function nb(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function rb(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||tb),r.length>1&&r.sort(t||nb),i.length>1&&i.sort(t||nb)}}}function ib(){var e=new WeakMap;return{get:function(t,n){var r;return!1===e.has(t)?(r=new rb,e.set(t,[r])):n>=e.get(t).length?(r=new rb,e.get(t).push(r)):r=e.get(t)[n],r},dispose:function(){e=new WeakMap}}}function ab(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Mp,color:new fp};break;case"SpotLight":n={position:new Mp,direction:new Mp,color:new fp,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Mp,color:new fp,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Mp,skyColor:new fp,groundColor:new fp};break;case"RectAreaLight":n={color:new fp,position:new Mp,halfWidth:new Mp,halfHeight:new Mp}}return e[t.id]=n,n}}}var ob=0;function sb(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ub(e,t){for(var n=new ab,r=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yd};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yd,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},a=0;a<9;a++)i.probe.push(new Mp);var o=new Mp,s=new nv,u=new nv;return{setup:function(a,o){for(var s=0,u=0,l=0,c=0;c<9;c++)i.probe[c].set(0,0,0);var f=0,h=0,d=0,p=0,v=0,m=0,g=0,y=0;a.sort(sb);for(var b=!0!==o?Math.PI:1,_=0,x=a.length;_<x;_++){var w=a[_],S=w.color,k=w.intensity,M=w.distance,E=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)s+=S.r*k*b,u+=S.g*k*b,l+=S.b*k*b;else if(w.isLightProbe)for(var T=0;T<9;T++)i.probe[T].addScaledVector(w.sh.coefficients[T],k);else if(w.isDirectionalLight){var C=n.get(w);if(C.color.copy(w.color).multiplyScalar(w.intensity*b),w.castShadow){var A=w.shadow,R=r.get(w);R.shadowBias=A.bias,R.shadowNormalBias=A.normalBias,R.shadowRadius=A.radius,R.shadowMapSize=A.mapSize,i.directionalShadow[f]=R,i.directionalShadowMap[f]=E,i.directionalShadowMatrix[f]=w.shadow.matrix,m++}i.directional[f]=C,f++}else if(w.isSpotLight){var P=n.get(w);if(P.position.setFromMatrixPosition(w.matrixWorld),P.color.copy(S).multiplyScalar(k*b),P.distance=M,P.coneCos=Math.cos(w.angle),P.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),P.decay=w.decay,w.castShadow){var L=w.shadow,N=r.get(w);N.shadowBias=L.bias,N.shadowNormalBias=L.normalBias,N.shadowRadius=L.radius,N.shadowMapSize=L.mapSize,i.spotShadow[d]=N,i.spotShadowMap[d]=E,i.spotShadowMatrix[d]=w.shadow.matrix,y++}i.spot[d]=P,d++}else if(w.isRectAreaLight){var I=n.get(w);I.color.copy(S).multiplyScalar(k),I.halfWidth.set(.5*w.width,0,0),I.halfHeight.set(0,.5*w.height,0),i.rectArea[p]=I,p++}else if(w.isPointLight){var D=n.get(w);if(D.color.copy(w.color).multiplyScalar(w.intensity*b),D.distance=w.distance,D.decay=w.decay,w.castShadow){var O=w.shadow,z=r.get(w);z.shadowBias=O.bias,z.shadowNormalBias=O.normalBias,z.shadowRadius=O.radius,z.shadowMapSize=O.mapSize,z.shadowCameraNear=O.camera.near,z.shadowCameraFar=O.camera.far,i.pointShadow[h]=z,i.pointShadowMap[h]=E,i.pointShadowMatrix[h]=w.shadow.matrix,g++}i.point[h]=D,h++}else if(w.isHemisphereLight){var F=n.get(w);F.skyColor.copy(w.color).multiplyScalar(k*b),F.groundColor.copy(w.groundColor).multiplyScalar(k*b),i.hemi[v]=F,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=$m.LTC_FLOAT_1,i.rectAreaLTC2=$m.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=$m.LTC_HALF_1,i.rectAreaLTC2=$m.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=u,i.ambient[2]=l;var U=i.hash;U.directionalLength===f&&U.pointLength===h&&U.spotLength===d&&U.rectAreaLength===p&&U.hemiLength===v&&U.numDirectionalShadows===m&&U.numPointShadows===g&&U.numSpotShadows===y||(i.directional.length=f,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=v,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=y,U.directionalLength=f,U.pointLength=h,U.spotLength=d,U.rectAreaLength=p,U.hemiLength=v,U.numDirectionalShadows=m,U.numPointShadows=g,U.numSpotShadows=y,i.version=ob++)},setupView:function(e,t){for(var n=0,r=0,a=0,l=0,c=0,f=t.matrixWorldInverse,h=0,d=e.length;h<d;h++){var p=e[h];if(p.isDirectionalLight){var v=i.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(o),v.direction.transformDirection(f),n++}else if(p.isSpotLight){var m=i.spot[a];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(f),m.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(o),m.direction.transformDirection(f),a++}else if(p.isRectAreaLight){var g=i.rectArea[l];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(f),u.identity(),s.copy(p.matrixWorld),s.premultiply(f),u.extractRotation(s),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(u),g.halfHeight.applyMatrix4(u),l++}else if(p.isPointLight){var y=i.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(f),r++}else if(p.isHemisphereLight){var b=i.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(f),c++}}},state:i}}function lb(e,t){var n=new ub(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function cb(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new lb(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new lb(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var fb=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.type="MeshDepthMaterial",r.depthPacking=ed,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(Bv),hb=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.type="MeshDistanceMaterial",r.referencePosition=new Mp,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(Bv);function db(e,t,n){var r=new Gm,i=new Yd,a=new Yd,o=new gp,s=new fb({depthPacking:td}),u=new hb,l={},c=n.maxTextureSize,f={0:Ic,1:Nc,2:Dc},h=new Lm({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yd},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;var p=new um;p.setAttribute("position",new Wv(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Em(p,h),m=this;function g(n,r){var a=t.update(v);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new yp(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,d,v,null)}function y(t,n,r,i,a,o){var c=null,h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==h?h:!0===r.isPointLight?u:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var d=c.uuid,p=n.uuid,v=l[d];void 0===v&&(v={},l[d]=v);var m=v[p];void 0===m&&(m=c.clone(),v[p]=m),c=m}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===Lc?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:f[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===r.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(r.matrixWorld),c.nearDistance=i,c.farDistance=a),c}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Lc)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,f=0,h=c.length;f<h;f++){var d=c[f],p=l[d.materialIndex];if(p&&p.visible){var v=y(n,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(l.visible){var m=y(n,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,_=0,x=g.length;_<x;_++)b(g[_],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Rc,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),h=e.state;h.setBlending(Fc),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/_.x),i.x=a.x*_.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/_.y),i.y=a.y*_.y,y.mapSize.y=a.y)),null===y.map){var x=this.type!==Lc?{minFilter:Nf,magFilter:Nf}:{};y.map=new yp(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()}e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),S=0;S<w;S++){var k=y.getViewport(S);o.set(a.x*k.x,a.y*k.y,a.x*k.z,a.y*k.w),h.viewport(o),y.updateMatrices(v,S),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}!0!==y.isPointLightShadow&&this.type===Lc&&g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,f)}}}function pb(e,t,n){var r,i,a=n.isWebGL2;var o=new function(){var t=!1,n=new gp,r=null,i=new gp(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?j(2929):H(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case sf:e.depthFunc(512);break;case uf:e.depthFunc(519);break;case lf:e.depthFunc(513);break;case cf:e.depthFunc(515);break;case ff:e.depthFunc(514);break;case hf:e.depthFunc(518);break;case df:e.depthFunc(516);break;case pf:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?j(2960):H(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},l=new WeakMap,c=new WeakMap,f={},h={},d=new WeakMap,p=[],v=null,m=!1,g=null,y=null,b=null,_=null,x=null,w=null,S=null,k=!1,M=null,E=null,T=null,C=null,A=null,R=e.getParameter(35661),P=!1,L=0,N=e.getParameter(7938);-1!==N.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(N)[1]),P=L>=1):-1!==N.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),P=L>=2);var I=null,D={},O=e.getParameter(3088),z=e.getParameter(2978),F=(new gp).fromArray(O),U=(new gp).fromArray(z);function B(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var V={};function j(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function H(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}V[3553]=B(3553,3553,1),V[34067]=B(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),j(2929),s.setFunc(cf),Y(!1),Z(Ec),j(2884),X(Fc);var W=(fe(r={},Wc,32774),fe(r,Gc,32778),fe(r,qc,32779),r);if(a)W[Xc]=32775,W[Yc]=32776;else{var G=t.get("EXT_blend_minmax");null!==G&&(W[Xc]=G.MIN_EXT,W[Yc]=G.MAX_EXT)}var q=(fe(i={},Zc,0),fe(i,$c,1),fe(i,Jc,768),fe(i,Qc,770),fe(i,of,776),fe(i,rf,774),fe(i,tf,772),fe(i,Kc,769),fe(i,ef,771),fe(i,af,775),fe(i,nf,773),i);function X(t,n,r,i,a,o,s,u){if(t!==Fc){if(!1===m&&(j(3042),m=!0),t===Hc)a=a||n,o=o||r,s=s||i,n===y&&a===x||(e.blendEquationSeparate(W[n],W[a]),y=n,x=a),r===b&&i===_&&o===w&&s===S||(e.blendFuncSeparate(q[r],q[i],q[o],q[s]),b=r,_=i,w=o,S=s),g=t,k=null;else if(t!==g||u!==k){if(y===Wc&&x===Wc||(e.blendEquation(32774),y=Wc,x=Wc),u)switch(t){case Uc:e.blendFuncSeparate(1,771,1,771);break;case Bc:e.blendFunc(1,1);break;case Vc:e.blendFuncSeparate(0,769,0,1);break;case jc:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Uc:e.blendFuncSeparate(770,771,1,771);break;case Bc:e.blendFunc(770,1);break;case Vc:e.blendFuncSeparate(0,769,0,1);break;case jc:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}b=null,_=null,w=null,S=null,g=t,k=u}}else!0===m&&(H(3042),m=!1)}function Y(t){M!==t&&(t?e.frontFace(2304):e.frontFace(2305),M=t)}function Z(t){t!==Mc?(j(2884),t!==E&&(t===Ec?e.cullFace(1029):t===Tc?e.cullFace(1028):e.cullFace(1032))):H(2884),E=t}function $(t,n,r){t?(j(32823),C===n&&A===r||(e.polygonOffset(n,r),C=n,A=r)):H(32823)}function J(t){void 0===t&&(t=33984+R-1),I!==t&&(e.activeTexture(t),I=t)}return{buffers:{color:o,depth:s,stencil:u},enable:j,disable:H,bindFramebuffer:function(t,n){return h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},drawBuffers:function(r,i){var a=p,o=!1;if(r)if(void 0===(a=d.get(i))&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){var s=r.texture;if(a.length!==s.length||36064!==a[0]){for(var u=0,l=s.length;u<l;u++)a[u]=36064+u;a.length=s.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:X,setMaterial:function(e,t){e.side===Dc?H(2884):j(2884);var n=e.side===Ic;t&&(n=!n),Y(n),e.blending===Uc&&!1===e.transparent?X(Fc):X(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),$(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?j(32926):H(32926)},setFlipSided:Y,setCullFace:Z,setLineWidth:function(t){t!==T&&(P&&e.lineWidth(t),T=t)},setPolygonOffset:$,setScissorTest:function(e){e?j(3089):H(3089)},activeTexture:J,bindTexture:function(t,n){null===I&&J();var r=D[I];void 0===r&&(r={type:void 0,texture:void 0},D[I]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||V[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=D[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var r=c.get(n);void 0===r&&(r=new WeakMap,c.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=c.get(n).get(t);l.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),l.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),f={},I=null,D={},h={},d=new WeakMap,p=[],v=null,m=!1,g=null,y=null,b=null,_=null,x=null,w=null,S=null,k=!1,M=null,E=null,T=null,C=null,A=null,F.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function vb(e,t,n,r,i,a,o){var s,u,l,c=i.isWebGL2,f=i.maxTextures,h=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,m=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap,y=new WeakMap,b=!1;try{b="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ZR){}function _(e,t){return b?new OffscreenCanvas(e,t):Qd("canvas")}function x(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?qd:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===l&&(l=_(o,s));var u=n?_(o,s):l;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function w(e){return Wd(e.width)&&Wd(e.height)}function S(e,t){return e.generateMipmaps&&t&&e.minFilter!==Nf&&e.minFilter!==Ff}function k(t){e.generateMipmap(t)}function M(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),33319===r&&(5126===i&&(s=33328),5131===i&&(s=33327),5121===i&&(s=33323)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=a===Qh&&!1===o?35907:32856),32819===i&&(s=32854),32820===i&&(s=32855)),33325!==s&&33326!==s&&33327!==s&&33328!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function E(e,t,n){return!0===S(e,n)||e.isFramebufferTexture&&e.minFilter!==Nf&&e.minFilter!==Ff?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function T(e){return e===Nf||e===If||e===Of?9728:9729}function C(e){var t=e.target;t.removeEventListener("dispose",C),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=y.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&R(e),0===Object.keys(i).length&&y.delete(n)}r.remove(e)}(t),t.isVideoTexture&&g.delete(t)}function A(t){var n=t.target;n.removeEventListener("dispose",A),function(t){var n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(var u=0;u<i.__webglColorRenderbuffer.length;u++)i.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[u]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var l=0,c=n.length;l<c;l++){var f=r.get(n[l]);f.__webglTexture&&(e.deleteTexture(f.__webglTexture),o.memory.textures--),r.remove(n[l])}r.remove(n),r.remove(t)}(n)}function R(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete y.get(i)[n.__cacheKey],o.memory.textures--}var P=0;function L(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void z(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}var N=(fe(s={},Rf,10497),fe(s,Pf,33071),fe(s,Lf,33648),s),I=(fe(u={},Nf,9728),fe(u,If,9984),fe(u,Of,9986),fe(u,Ff,9729),fe(u,Uf,9985),fe(u,Vf,9987),u);function D(n,a,o){if(o?(e.texParameteri(n,10242,N[a.wrapS]),e.texParameteri(n,10243,N[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,N[a.wrapR]),e.texParameteri(n,10240,I[a.magFilter]),e.texParameteri(n,10241,I[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===Pf&&a.wrapT===Pf||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,T(a.magFilter)),e.texParameteri(n,10241,T(a.minFilter)),a.minFilter!==Nf&&a.minFilter!==Ff&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===Zf&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===$f&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function O(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",C));var i=n.source,a=y.get(i);void 0===a&&(a={},y.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&R(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function z(t,r,i){var o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);var s=O(t,r),u=r.source;if(n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),u.version!==u.__currentVersion||!0===s){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var l,f=function(e){return!c&&(e.wrapS!==Pf||e.wrapT!==Pf||e.minFilter!==Nf&&e.minFilter!==Ff)}(r)&&!1===w(r.image),h=x(r.image,f,!1,d),p=w(h=H(r,h))||c,v=a.convert(r.format,r.encoding),m=a.convert(r.type),g=M(r.internalFormat,v,m,r.encoding,r.isVideoTexture);D(o,r,p);var y=r.mipmaps,b=c&&!0!==r.isVideoTexture,_=void 0===u.__currentVersion||!0===s,T=E(r,h,p);if(r.isDepthTexture)g=6402,c?g=r.type===Zf?36012:r.type===Yf?33190:r.type===Qf?35056:33189:r.type===Zf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===ah&&6402===g&&r.type!==qf&&r.type!==Yf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Yf,m=a.convert(r.type)),r.format===oh&&6402===g&&(g=34041,r.type!==Qf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Qf,m=a.convert(r.type))),_&&(b?n.texStorage2D(3553,1,g,h.width,h.height):n.texImage2D(3553,0,g,h.width,h.height,0,v,m,null));else if(r.isDataTexture)if(y.length>0&&p){b&&_&&n.texStorage2D(3553,T,g,y[0].width,y[0].height);for(var C=0,A=y.length;C<A;C++)l=y[C],b?n.texSubImage2D(3553,C,0,0,l.width,l.height,v,m,l.data):n.texImage2D(3553,C,g,l.width,l.height,0,v,m,l.data);r.generateMipmaps=!1}else b?(_&&n.texStorage2D(3553,T,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,h.width,h.height,v,m,h.data)):n.texImage2D(3553,0,g,h.width,h.height,0,v,m,h.data);else if(r.isCompressedTexture){b&&_&&n.texStorage2D(3553,T,g,y[0].width,y[0].height);for(var R=0,P=y.length;R<P;R++)l=y[R],r.format!==nh?null!==v?b?n.compressedTexSubImage2D(3553,R,0,0,l.width,l.height,v,l.data):n.compressedTexImage2D(3553,R,g,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(3553,R,0,0,l.width,l.height,v,m,l.data):n.texImage2D(3553,R,g,l.width,l.height,0,v,m,l.data)}else if(r.isDataArrayTexture)b?(_&&n.texStorage3D(35866,T,g,h.width,h.height,h.depth),n.texSubImage3D(35866,0,0,0,0,h.width,h.height,h.depth,v,m,h.data)):n.texImage3D(35866,0,g,h.width,h.height,h.depth,0,v,m,h.data);else if(r.isData3DTexture)b?(_&&n.texStorage3D(32879,T,g,h.width,h.height,h.depth),n.texSubImage3D(32879,0,0,0,0,h.width,h.height,h.depth,v,m,h.data)):n.texImage3D(32879,0,g,h.width,h.height,h.depth,0,v,m,h.data);else if(r.isFramebufferTexture){if(_)if(b)n.texStorage2D(3553,T,g,h.width,h.height);else for(var L=h.width,N=h.height,I=0;I<T;I++)n.texImage2D(3553,I,g,L,N,0,v,m,null),L>>=1,N>>=1}else if(y.length>0&&p){b&&_&&n.texStorage2D(3553,T,g,y[0].width,y[0].height);for(var z=0,F=y.length;z<F;z++)l=y[z],b?n.texSubImage2D(3553,z,0,0,v,m,l):n.texImage2D(3553,z,g,v,m,l);r.generateMipmaps=!1}else b?(_&&n.texStorage2D(3553,T,g,h.width,h.height),n.texSubImage2D(3553,0,0,0,v,m,h)):n.texImage2D(3553,0,g,v,m,h);S(r,p)&&k(o),u.__currentVersion=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function F(t,i,o,s,u){var l=a.convert(o.format,o.encoding),c=a.convert(o.type),f=M(o.internalFormat,l,c,o.encoding);r.get(i).__hasExternalTextures||(32879===u||35866===u?n.texImage3D(u,0,f,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,f,i.width,i.height,0,l,c,null)),n.bindFramebuffer(36160,t),j(i)?v.framebufferTexture2DMultisampleEXT(36160,s,u,r.get(o).__webglTexture,0,V(i)):e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function U(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r||j(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Zf?i=36012:o.type===Yf&&(i=33190));var s=V(n);j(n)?v.renderbufferStorageMultisampleEXT(36161,s,i,n.width,n.height):e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var u=V(n);r&&!1===j(n)?e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height):j(n)?v.renderbufferStorageMultisampleEXT(36161,u,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var l=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<l.length;c++){var f=l[c],h=a.convert(f.format,f.encoding),d=a.convert(f.type),p=M(f.internalFormat,h,d,f.encoding),m=V(n);r&&!1===j(n)?e.renderbufferStorageMultisample(36161,m,p,n.width,n.height):j(n)?v.renderbufferStorageMultisampleEXT(36161,m,p,n.width,n.height):e.renderbufferStorage(36161,p,n.width,n.height)}e.bindRenderbuffer(36161,null)}function B(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture,o=V(i);if(i.depthTexture.format===ah)j(i)?v.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==oh)throw new Error("Unknown depthTexture format");j(i)?v.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),U(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),U(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function V(e){return Math.min(p,e.samples)}function j(e){var n=r.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){var r=e.encoding,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Id||r!==Kh&&(r===Qh?!1===c?!0===t.has("EXT_sRGB")&&i===nh?(e.format=Id,e.minFilter=Ff,e.generateMipmaps=!1):n=hp.sRGBToLinear(n):i===nh&&a===Hf||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){var e=P;return e>=f&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+f),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=L,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?z(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?z(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;var o=O(t,r),s=r.source;if(n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),s.version!==s.__currentVersion||!0===o){e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var u=r.isCompressedTexture||r.image[0].isCompressedTexture,l=r.image[0]&&r.image[0].isDataTexture,f=[],d=0;d<6;d++)f[d]=u||l?l?r.image[d].image:r.image[d]:x(r.image[d],!1,!0,h),f[d]=H(r,f[d]);var p,v=f[0],m=w(v)||c,g=a.convert(r.format,r.encoding),y=a.convert(r.type),b=M(r.internalFormat,g,y,r.encoding),_=c&&!0!==r.isVideoTexture,T=void 0===s.__currentVersion||!0===o,C=E(r,v,m);if(D(34067,r,m),u){_&&T&&n.texStorage2D(34067,C,b,v.width,v.height);for(var A=0;A<6;A++){p=f[A].mipmaps;for(var R=0;R<p.length;R++){var P=p[R];r.format!==nh?null!==g?_?n.compressedTexSubImage2D(34069+A,R,0,0,P.width,P.height,g,P.data):n.compressedTexImage2D(34069+A,R,b,P.width,P.height,0,P.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_?n.texSubImage2D(34069+A,R,0,0,P.width,P.height,g,y,P.data):n.texImage2D(34069+A,R,b,P.width,P.height,0,g,y,P.data)}}}else{p=r.mipmaps,_&&T&&(p.length>0&&C++,n.texStorage2D(34067,C,b,f[0].width,f[0].height));for(var L=0;L<6;L++)if(l){_?n.texSubImage2D(34069+L,0,0,0,f[L].width,f[L].height,g,y,f[L].data):n.texImage2D(34069+L,0,b,f[L].width,f[L].height,0,g,y,f[L].data);for(var N=0;N<p.length;N++){var I=p[N].image[L].image;_?n.texSubImage2D(34069+L,N+1,0,0,I.width,I.height,g,y,I.data):n.texImage2D(34069+L,N+1,b,I.width,I.height,0,g,y,I.data)}}else{_?n.texSubImage2D(34069+L,0,0,0,g,y,f[L]):n.texImage2D(34069+L,0,b,g,y,f[L]);for(var z=0;z<p.length;z++){var F=p[z];_?n.texSubImage2D(34069+L,z+1,0,0,g,y,F.image[L]):n.texImage2D(34069+L,z+1,b,g,y,F.image[L])}}}S(r,m)&&k(34067),s.__currentVersion=s.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,n){var i=r.get(e);void 0!==t&&F(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&B(e)},this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=s.version,o.memory.textures++);var f=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,d=w(t)||c;if(f){u.__webglFramebuffer=[];for(var p=0;p<6;p++)u.__webglFramebuffer[p]=e.createFramebuffer()}else{if(u.__webglFramebuffer=e.createFramebuffer(),h)if(i.drawBuffers)for(var v=t.texture,m=0,g=v.length;m<g;m++){var y=r.get(v[m]);void 0===y.__webglTexture&&(y.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===j(t)){var b=h?s:[s];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(var _=0;_<b.length;_++){var x=b[_];u.__webglColorRenderbuffer[_]=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer[_]);var E=a.convert(x.format,x.encoding),T=a.convert(x.type),C=M(x.internalFormat,E,T,x.encoding),R=V(t);e.renderbufferStorageMultisample(36161,R,C,t.width,t.height),e.framebufferRenderbuffer(36160,36064+_,36161,u.__webglColorRenderbuffer[_])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),U(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(f){n.bindTexture(34067,l.__webglTexture),D(34067,s,d);for(var P=0;P<6;P++)F(u.__webglFramebuffer[P],t,s,36064,34069+P);S(s,d)&&k(34067),n.unbindTexture()}else if(h){for(var L=t.texture,N=0,I=L.length;N<I;N++){var O=L[N],z=r.get(O);n.bindTexture(3553,z.__webglTexture),D(3553,O,d),F(u.__webglFramebuffer,t,O,36064+N,3553),S(O,d)&&k(3553)}n.unbindTexture()}else{var H=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?H=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(H,l.__webglTexture),D(H,s,d),F(u.__webglFramebuffer,t,s,36064,H),S(s,d)&&k(H),n.unbindTexture()}t.depthBuffer&&B(t)},this.updateRenderTargetMipmap=function(e){for(var t=w(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(S(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),k(u),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===j(t)){var i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=16384,u=[],l=t.stencilBuffer?33306:36096,f=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(var d=0;d<i.length;d++)n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+d,36161,null),n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+d,3553,null,0);n.bindFramebuffer(36008,f.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,f.__webglFramebuffer);for(var p=0;p<i.length;p++){u.push(36064+p),t.depthBuffer&&u.push(l);var v=void 0!==f.__ignoreDepthValues&&f.__ignoreDepthValues;if(!1===v&&(t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,f.__webglColorRenderbuffer[p]),!0===v&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),h){var g=r.get(i[p]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,g,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),m&&e.invalidateFramebuffer(36008,u)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(var y=0;y<i.length;y++){n.bindFramebuffer(36160,f.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+y,36161,f.__webglColorRenderbuffer[y]);var b=r.get(i[y]).__webglTexture;n.bindFramebuffer(36160,f.__webglFramebuffer),e.framebufferTexture2D(36009,36064+y,3553,b,0)}n.bindFramebuffer(36009,f.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=B,this.setupFrameBufferTexture=F,this.useMultisampledRTT=j}function mb(e,t,n){var r=n.isWebGL2;return{convert:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===Hf)return 5121;if(n===Jf)return 32819;if(n===Kf)return 32820;if(n===Wf)return 5120;if(n===Gf)return 5122;if(n===qf)return 5123;if(n===Xf)return 5124;if(n===Yf)return 5125;if(n===Zf)return 5126;if(n===$f)return r?5131:null!==(i=t.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(n===eh)return 6406;if(n===nh)return 6408;if(n===rh)return 6409;if(n===ih)return 6410;if(n===ah)return 6402;if(n===oh)return 34041;if(n===sh)return 6403;if(n===th)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Id)return null!==(i=t.get("EXT_sRGB"))?i.SRGB_ALPHA_EXT:null;if(n===uh)return 36244;if(n===lh)return 33319;if(n===ch)return 33320;if(n===fh)return 36249;if(n===hh||n===dh||n===ph||n===vh)if(a===Qh){if(null===(i=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===hh)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===dh)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ph)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===vh)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(i=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===hh)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===dh)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ph)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===vh)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===mh||n===gh||n===yh||n===bh){if(null===(i=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===mh)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gh)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===yh)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===bh)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===_h)return null!==(i=t.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===xh||n===wh){if(null===(i=t.get("WEBGL_compressed_texture_etc")))return null;if(n===xh)return a===Qh?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===wh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===Sh||n===kh||n===Mh||n===Eh||n===Th||n===Ch||n===Ah||n===Rh||n===Ph||n===Lh||n===Nh||n===Ih||n===Dh||n===Oh){if(null===(i=t.get("WEBGL_compressed_texture_astc")))return null;if(n===Sh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===kh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Mh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Eh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Th)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Ch)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Ah)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Rh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ph)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Lh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Nh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ih)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Dh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Oh)return a===Qh?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===zh){if(null===(i=t.get("EXT_texture_compression_bptc")))return null;if(n===zh)return a===Qh?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Qf?r?34042:null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var gb=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ye(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return _e(n)}(Im),yb=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return _e(n)}(Tv),bb={type:"move"},_b=function(){function e(){ye(this,e),this._targetRay=null,this._grip=null,this._hand=null}return _e(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new yb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new yb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Mp,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Mp),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new yb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Mp,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Mp),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var l,c=ce(e.hand.values());try{for(c.s();!(l=c.n()).done;){var f=l.value,h=t.getJointPose(f,n);if(void 0===u.joints[f.jointName]){var d=new yb;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[f.jointName]=d,u.add(d)}var p=u.joints[f.jointName];null!==h&&(p.matrix.fromArray(h.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=h.radius),p.visible=null!==h}}catch(ZR){c.e(ZR)}finally{c.f()}var v=u.joints["index-finger-tip"],m=u.joints["thumb-tip"],g=v.position.distanceTo(m.position);u.inputState.pinching&&g>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&g<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(bb)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}}]),e}(),xb=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s,u,l,c,f){var h;if(ye(this,n),(f=void 0!==f?f:ah)!==ah&&f!==oh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&f===ah&&(i=Yf),void 0===i&&f===oh&&(i=Qf),(h=t.call(this,null,a,o,s,u,l,f,i,c)).isDepthTexture=!0,h.image={width:e,height:r},h.magFilter=void 0!==u?u:Nf,h.minFilter=void 0!==l?l:Nf,h.flipY=!1,h.generateMipmaps=!1,h}return _e(n)}(mp),wb=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;ye(this,n);var a=pe(i=t.call(this)),o=null,s=1,u=null,l="local-floor",c=null,f=null,h=null,d=null,p=null,v=null,m=r.getContextAttributes(),g=null,y=null,b=[],_=[],x=new Im;x.layers.enable(1),x.viewport=new gp;var w=new Im;w.layers.enable(2),w.viewport=new gp;var S=[x,w],k=new gb;k.layers.enable(1),k.layers.enable(2);var M=null,E=null;function T(e){var t=_.indexOf(e.inputSource);if(-1!==t){var n=b[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function C(){o.removeEventListener("select",T),o.removeEventListener("selectstart",T),o.removeEventListener("selectend",T),o.removeEventListener("squeeze",T),o.removeEventListener("squeezestart",T),o.removeEventListener("squeezeend",T),o.removeEventListener("end",C),o.removeEventListener("inputsourceschange",A);for(var t=0;t<b.length;t++){var n=_[t];null!==n&&(_[t]=null,b[t].disconnect(n))}M=null,E=null,e.setRenderTarget(g),p=null,d=null,h=null,o=null,y=null,I.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function A(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,b[r].dispatchEvent({type:"disconnected",data:n}))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=_.indexOf(a);if(-1===o){for(var s=0;s<b.length;s++){if(s>=_.length){_.push(a),o=s;break}if(null===_[s]){_[s]=a,o=s;break}}if(-1===o)break}var u=b[o];u&&u.dispatchEvent({type:"connected",data:a})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=b[e];return void 0===t&&(t=new _b,b[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=b[e];return void 0===t&&(t=new _b,b[e]=t),t.getGripSpace()},i.getHand=function(e){var t=b[e];return void 0===t&&(t=new _b,b[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return c||u},i.setReferenceSpace=function(e){c=e},i.getBaseLayer=function(){return null!==d?d:p},i.getBinding=function(){return h},i.getFrame=function(){return v},i.getSession=function(){return o},i.setSession=function(){var t=ne(le().mark((function t(n){var i,f,v,b,_;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=25;break}if(g=e.getRenderTarget(),o.addEventListener("select",T),o.addEventListener("selectstart",T),o.addEventListener("selectend",T),o.addEventListener("squeeze",T),o.addEventListener("squeezestart",T),o.addEventListener("squeezeend",T),o.addEventListener("end",C),o.addEventListener("inputsourceschange",A),!0===m.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(i={antialias:void 0!==o.renderState.layers||m.antialias,alpha:m.alpha,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s},p=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:p}),y=new yp(p.framebufferWidth,p.framebufferHeight,{format:nh,type:Hf,encoding:e.outputEncoding})):(f=null,v=null,b=null,m.depth&&(b=m.stencil?35056:33190,f=m.stencil?oh:ah,v=m.stencil?Qf:Yf),_={colorFormat:32856,depthFormat:b,scaleFactor:s},h=new XRWebGLBinding(o,r),d=h.createProjectionLayer(_),o.updateRenderState({layers:[d]}),y=new yp(d.textureWidth,d.textureHeight,{format:nh,type:Hf,depthTexture:new xb(d.textureWidth,d.textureHeight,v,void 0,void 0,void 0,void 0,void 0,void 0,f),stencilBuffer:m.stencil,encoding:e.outputEncoding,samples:m.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=d.ignoreDepthValues),y.isXRRenderTarget=!0,this.setFoveation(1),c=null,t.next=20,o.requestReferenceSpace(l);case 20:u=t.sent,I.setContext(o),I.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var R=new Mp,P=new Mp;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){k.near=w.near=x.near=e.near,k.far=w.far=x.far=e.far,M===k.near&&E===k.far||(o.updateRenderState({depthNear:k.near,depthFar:k.far}),M=k.near,E=k.far);var t=e.parent,n=k.cameras;L(k,t);for(var r=0;r<n.length;r++)L(n[r],t);k.matrixWorld.decompose(k.position,k.quaternion,k.scale),e.position.copy(k.position),e.quaternion.copy(k.quaternion),e.scale.copy(k.scale),e.matrix.copy(k.matrix),e.matrixWorld.copy(k.matrixWorld);for(var i=e.children,a=0,s=i.length;a<s;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);var r=R.distanceTo(P),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(a[8]+1)/a[0],h=o*c,d=o*f,p=r/(-c+f),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p,y=h-v,b=d+(r-v),_=u*s/g*m,x=l*s/g*m;e.projectionMatrix.makePerspective(y,b,_,x,m,g)}(k,x,w):k.projectionMatrix.copy(x.projectionMatrix)}},i.getCamera=function(){return k},i.getFoveation=function(){return null!==d?d.fixedFoveation:null!==p?p.fixedFoveation:void 0},i.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};var N=null;var I=new qm;return I.setAnimationLoop((function(t,n){if(f=n.getViewerPose(c||u),v=n,null!==f){var r=f.views;null!==p&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));var i=!1;r.length!==k.cameras.length&&(k.cameras.length=0,i=!0);for(var a=0;a<r.length;a++){var o=r[a],s=null;if(null!==p)s=p.getViewport(o);else{var l=h.getViewSubImage(d,o);s=l.viewport,0===a&&(e.setRenderTargetTextures(y,l.colorTexture,d.ignoreDepthValues?void 0:l.depthStencilTexture),e.setRenderTarget(y))}var m=S[a];void 0===m&&((m=new Im).layers.enable(a),m.viewport=new gp,S[a]=m),m.matrix.fromArray(o.transform.matrix),m.projectionMatrix.fromArray(o.projectionMatrix),m.viewport.set(s.x,s.y,s.width,s.height),0===a&&k.matrix.copy(m.matrix),!0===i&&k.cameras.push(m)}}for(var g=0;g<b.length;g++){var x=_[g],w=b[g];null!==x&&void 0!==w&&w.update(x,n,c||u)}N&&N(t,n),v=null})),i.setAnimationLoop=function(e){N=e},i.dispose=function(){},i}return _e(n)}(Dd);function Sb(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===Ic&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===Ic&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);var i,a,o=t.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;var s=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*s}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?i=r.map:r.specularMap?i=r.specularMap:r.displacementMap?i=r.displacementMap:r.normalMap?i=r.normalMap:r.bumpMap?i=r.bumpMap:r.roughnessMap?i=r.roughnessMap:r.metalnessMap?i=r.metalnessMap:r.alphaMap?i=r.alphaMap:r.emissiveMap?i=r.emissiveMap:r.clearcoatMap?i=r.clearcoatMap:r.clearcoatNormalMap?i=r.clearcoatNormalMap:r.clearcoatRoughnessMap?i=r.clearcoatRoughnessMap:r.iridescenceMap?i=r.iridescenceMap:r.iridescenceThicknessMap?i=r.iridescenceThicknessMap:r.specularIntensityMap?i=r.specularIntensityMap:r.specularColorMap?i=r.specularColorMap:r.transmissionMap?i=r.transmissionMap:r.thicknessMap?i=r.thicknessMap:r.sheenColorMap?i=r.sheenColorMap:r.sheenRoughnessMap&&(i=r.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),n.uvTransform.value.copy(i.matrix)),r.aoMap?a=r.aoMap:r.lightMap&&(a=r.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Ic&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function kb(e,t,n,r){var i={},a={},o=[],s=n.isWebGL2?e.getParameter(35375):0;function u(e,t,n){var r=e.value;if(void 0===n[t])return n[t]="number"===typeof r?r:r.clone(),!0;if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else{var i=n[t];if(!1===i.equals(r))return i.copy(r),!0}return!1}function l(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,f){var h=i[n.id];void 0===h&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=0,o=t.length;a<o;a++){var s=t[a],u=l(s);if(s.__data=new Float32Array(u.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,a>0)0!==(i=n%r)&&r-i-u.boundary<0&&(n+=r-i,s.__offset=n);n+=u.storage}(i=n%r)>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),h=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",c));var d=f.program;r.updateUBOMapping(n,d);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,s=r.length;o<s;o++){var l=r[o];if(!0===u(l,o,a)){var c=l.value,f=l.__offset;"number"===typeof c?(l.__data[0]=c,e.bufferSubData(35345,f,l.__data)):(l.value.isMatrix3?(l.__data[0]=l.value.elements[0],l.__data[1]=l.value.elements[1],l.__data[2]=l.value.elements[2],l.__data[3]=l.value.elements[0],l.__data[4]=l.value.elements[3],l.__data[5]=l.value.elements[4],l.__data[6]=l.value.elements[5],l.__data[7]=l.value.elements[0],l.__data[8]=l.value.elements[6],l.__data[9]=l.value.elements[7],l.__data[10]=l.value.elements[8],l.__data[11]=l.value.elements[0]):c.toArray(l.__data),e.bufferSubData(35345,f,l.__data))}}e.bindBuffer(35345,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}function Mb(){var e=Qd("canvas");return e.style.display="block",e}function Eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:Mb(),r=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==r?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var f=null,h=null,d=[],p=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Kh,this.physicallyCorrectLights=!1,this.toneMapping=yf,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var v=this,m=!1,g=0,y=0,b=null,_=-1,x=null,w=new gp,S=new gp,k=null,M=n.width,E=n.height,T=1,C=null,A=null,R=new gp(0,0,M,E),P=new gp(0,0,M,E),L=!1,N=new Gm,I=!1,D=!1,O=null,z=new nv,F=new Yd,U=new Mp,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===b?T:1}var j,H,W,G,q,X,Y,Z,$,J,K,Q,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,fe,he=r;function de(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=n.getContext(i,t);if(null!==a)return a}return null}try{var pe={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(wc)),n.addEventListener("webglcontextlost",ye,!1),n.addEventListener("webglcontextrestored",be,!1),n.addEventListener("webglcontextcreationerror",_e,!1),null===he){var ve=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&ve.shift(),null===(he=de(ve,pe)))throw de(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ue){throw console.error("THREE.WebGLRenderer: "+Ue.message),Ue}function me(){j=new bg(he),H=new tg(he,j,e),j.init(H),le=new mb(he,j,H),W=new pb(he,j,H),G=new wg,q=new eb,X=new vb(he,j,W,q,H,le,G),Y=new rg(v),Z=new yg(v),$=new Xm(he,H),ce=new Qm(he,j,$,H),J=new _g(he,$,G,ce),K=new Tg(he,J,$,G),oe=new Eg(he,H,X),re=new ng(q),Q=new Qy(v,Y,Z,j,H,ce,re),ee=new Sb(v,q),te=new ib,ne=new cb(j,H),ae=new Km(v,Y,W,K,t,s),ie=new db(v,K,H),fe=new kb(he,G,H,W),se=new eg(he,j,G,H),ue=new xg(he,j,G,H),G.programs=Q.programs,v.capabilities=H,v.extensions=j,v.properties=q,v.renderLists=te,v.shadowMap=ie,v.state=W,v.info=G}me();var ge=new wb(v,he);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function be(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=G.autoReset,t=ie.enabled,n=ie.autoUpdate,r=ie.needsUpdate,i=ie.type;me(),G.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=r,ie.type=i}function _e(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function xe(e){var t=e.target;t.removeEventListener("dispose",xe),we(t)}function we(e){Se(e),q.remove(e)}function Se(e){var t=q.get(e).programs;void 0!==t&&(t.forEach((function(e){Q.releaseProgram(e)})),e.isShaderMaterial&&Q.releaseShaderCache(e))}this.xr=ge,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){var e=j.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=j.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(M,E,!1))},this.getSize=function(e){return e.set(M,E)},this.setSize=function(e,t,r){ge.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,E=t,n.width=Math.floor(e*T),n.height=Math.floor(t*T),!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(M*T,E*T).floor()},this.setDrawingBufferSize=function(e,t,r){M=e,E=t,T=r,n.width=Math.floor(e*r),n.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),W.viewport(w.copy(R).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),W.scissor(S.copy(P).multiplyScalar(T).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){W.setScissorTest(L=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),he.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ye,!1),n.removeEventListener("webglcontextrestored",be,!1),n.removeEventListener("webglcontextcreationerror",_e,!1),te.dispose(),ne.dispose(),q.dispose(),Y.dispose(),Z.dispose(),K.dispose(),ce.dispose(),fe.dispose(),Q.dispose(),ge.dispose(),ge.removeEventListener("sessionstart",Ee),ge.removeEventListener("sessionend",Te),O&&(O.dispose(),O=null),Ce.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=Oe(e,t,n,r,i);W.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,f=1;!0===r.wireframe&&(u=J.getWireframeAttribute(n),f=2),ce.setup(i,r,s,n,u);var h=se;null!==u&&(c=$.get(u),(h=ue).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*f,v=n.drawRange.count*f,m=null!==a?a.start*f:0,g=null!==a?a.count*f:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(W.setLineWidth(r.wireframeLinewidth*V()),h.setMode(1)):h.setMode(4);else if(i.isLine){var x=r.linewidth;void 0===x&&(x=1),W.setLineWidth(x*V()),i.isLineSegments?h.setMode(1):i.isLineLoop?h.setMode(2):h.setMode(3)}else i.isPoints?h.setMode(0):i.isSprite&&h.setMode(4);if(i.isInstancedMesh)h.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(y,_,w)}else h.render(y,_)}},this.compile=function(e,t){(h=ne.get(e)).init(),p.push(h),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))})),h.setupLights(v.physicallyCorrectLights),e.traverse((function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){Ie(n[r],e,t)}else Ie(n,e,t)})),p.pop(),h=null};var ke=null;function Me(e){ke&&ke(e)}function Ee(){Ce.stop()}function Te(){Ce.start()}var Ce=new qm;function Ae(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)h.pushLight(e),e.castShadow&&h.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var i=K.update(e),a=e.material;a.visible&&f.push(e,i,a,n,U.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==G.render.frame&&(e.skeleton.update(),e.skeleton.frame=G.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var o=K.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&f.push(e,o,p,n,U.z,d)}else s.visible&&f.push(e,o,s,n,U.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)Ae(v[m],t,n,r)}}function Re(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;h.setupLightsView(n),a.length>0&&Pe(i,t,n),r&&W.viewport(w.copy(r)),i.length>0&&Le(i,t,n),a.length>0&&Le(a,t,n),o.length>0&&Le(o,t,n),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Pe(e,t,n){var r=H.isWebGL2;null===O&&(O=new yp(1,1,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?$f:Hf,minFilter:Vf,samples:r&&!0===o?4:0})),v.getDrawingBufferSize(F),r?O.setSize(F.x,F.y):O.setSize(qd(F.x),qd(F.y));var i=v.getRenderTarget();v.setRenderTarget(O),v.clear();var a=v.toneMapping;v.toneMapping=yf,Le(e,t,n),v.toneMapping=a,X.updateMultisampleRenderTarget(O),X.updateRenderTargetMipmap(O),v.setRenderTarget(i)}function Le(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Ne(s,t,n,u,l,c)}}function Ne(e,t,n,r,i,a){e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),!0===i.transparent&&i.side===Dc?(i.side=Ic,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=Nc,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=Dc):v.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(v,t,n,r,i,a)}function Ie(e,t,n){!0!==t.isScene&&(t=B);var r=q.get(e),i=h.state.lights,a=h.state.shadowsArray,o=i.state.version,s=Q.getParameters(e,i.state,a,t,n),u=Q.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Z:Y).get(e.envMap||r.environment),void 0===l&&(e.addEventListener("dispose",xe),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return De(e,s),c}else s.uniforms=Q.getUniforms(e),e.onBuild(n,s,v),e.onBeforeCompile(s,v),c=Q.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var f=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(f.clippingPlanes=re.uniform),De(e,s),r.needsLights=Fe(e),r.lightsStateVersion=o,r.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.directionalLightShadows.value=i.state.directionalShadow,f.spotLights.value=i.state.spot,f.spotLightShadows.value=i.state.spotShadow,f.rectAreaLights.value=i.state.rectArea,f.ltc_1.value=i.state.rectAreaLTC1,f.ltc_2.value=i.state.rectAreaLTC2,f.pointLights.value=i.state.point,f.pointLightShadows.value=i.state.pointShadow,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var d=c.getUniforms(),p=Py.seqWithValue(d.seq,f);return r.currentProgram=c,r.uniformsList=p,c}function De(e,t){var n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Oe(e,t,n,r,i){!0!==t.isScene&&(t=B),X.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:Kh,u=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n.attributes.tangent,f=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,m=r.toneMapped?v.toneMapping:yf,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==g?g.length:0,w=q.get(r),S=h.state.lights;if(!0===I&&(!0===D||e!==x)){var k=e===x&&r.id===_;re.setState(r,e,k)}var M=!1;r.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==s||i.isInstancedMesh&&!1===w.instancing?M=!0:i.isInstancedMesh||!0!==w.instancing?i.isSkinnedMesh&&!1===w.skinning?M=!0:i.isSkinnedMesh||!0!==w.skinning?w.envMap!==u||!0===r.fog&&w.fog!==a?M=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===re.numPlanes&&w.numIntersection===re.numIntersection?(w.vertexAlphas!==l||w.vertexTangents!==c||w.morphTargets!==f||w.morphNormals!==d||w.morphColors!==p||w.toneMapping!==m||!0===H.isWebGL2&&w.morphTargetsCount!==y)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,w.__version=r.version);var C=w.currentProgram;!0===M&&(C=Ie(r,t,i));var A=!1,R=!1,P=!1,L=C.getUniforms(),N=w.uniforms;if(W.useProgram(C.program)&&(A=!0,R=!0,P=!0),r.id!==_&&(_=r.id,R=!0),A||x!==e){if(L.setValue(he,"projectionMatrix",e.projectionMatrix),H.logarithmicDepthBuffer&&L.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,R=!0,P=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var z=L.map.cameraPosition;void 0!==z&&z.setValue(he,U.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&L.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&L.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){L.setOptional(he,i,"bindMatrix"),L.setOptional(he,i,"bindMatrixInverse");var F=i.skeleton;F&&(H.floatVertexTextures?(null===F.boneTexture&&F.computeBoneTexture(),L.setValue(he,"boneTexture",F.boneTexture,X),L.setValue(he,"boneTextureSize",F.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var V=n.morphAttributes;if((void 0!==V.position||void 0!==V.normal||void 0!==V.color&&!0===H.isWebGL2)&&oe.update(i,n,r,C),(R||w.receiveShadow!==i.receiveShadow)&&(w.receiveShadow=i.receiveShadow,L.setValue(he,"receiveShadow",i.receiveShadow)),R&&(L.setValue(he,"toneMappingExposure",v.toneMappingExposure),w.needsLights&&ze(N,P),a&&!0===r.fog&&ee.refreshFogUniforms(N,a),ee.refreshMaterialUniforms(N,r,T,E,O),Py.upload(he,w.uniformsList,N,X)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Py.upload(he,w.uniformsList,N,X),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&L.setValue(he,"center",i.center),L.setValue(he,"modelViewMatrix",i.modelViewMatrix),L.setValue(he,"normalMatrix",i.normalMatrix),L.setValue(he,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var j=r.uniformsGroups,G=0,$=j.length;G<$;G++)if(H.isWebGL2){var J=j[G];fe.update(J,C),fe.bind(J,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return C}function ze(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Fe(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ce.setAnimationLoop(Me),"undefined"!==typeof self&&Ce.setContext(self),this.setAnimationLoop=function(e){ke=e,ge.setAnimationLoop(e),null===e?Ce.stop():Ce.start()},ge.addEventListener("sessionstart",Ee),ge.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ge.enabled&&!0===ge.isPresenting&&(!0===ge.cameraAutoUpdate&&ge.updateCamera(t),t=ge.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(h=ne.get(e,p.length)).init(),p.push(h),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(z),D=this.localClippingEnabled,I=re.init(this.clippingPlanes,D,t),(f=te.get(e,d.length)).init(),d.push(f),Ae(e,t,0,v.sortObjects),f.finish(),!0===v.sortObjects&&f.sort(C,A),!0===I&&re.beginShadows();var n=h.state.shadowsArray;if(ie.render(n,e,t),!0===I&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(f,e),h.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var r=t.cameras,i=0,a=r.length;i<a;i++){var o=r[i];Re(f,e,o,o.viewport)}else Re(f,e,t);null!==b&&(X.updateMultisampleRenderTarget(b),X.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),ce.resetDefaultState(),_=-1,x=null,p.pop(),h=p.length>0?p[p.length-1]:null,d.pop(),f=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(e,t,n){q.get(e.texture).__webglTexture=t,q.get(e.depthTexture).__webglTexture=n;var r=q.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===j.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n;var r=!0;if(e){var i=q.get(e);void 0!==i.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),r=!1):void 0===i.__webglFramebuffer?X.setupRenderTarget(e):i.__hasExternalTextures&&X.rebindTextures(e,q.get(e.texture).__webglTexture,q.get(e.depthTexture).__webglTexture)}var a=null,o=!1,s=!1;if(e){var u=e.texture;(u.isData3DTexture||u.isDataArrayTexture)&&(s=!0);var l=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=l[t],o=!0):a=H.isWebGL2&&e.samples>0&&!1===X.useMultisampledRTT(e)?q.get(e).__webglMultisampledFramebuffer:l,w.copy(e.viewport),S.copy(e.scissor),k=e.scissorTest}else w.copy(R).multiplyScalar(T).floor(),S.copy(P).multiplyScalar(T).floor(),k=L;var c=W.bindFramebuffer(36160,a);if(c&&H.drawBuffers&&r&&W.drawBuffers(e,a),W.viewport(w),W.scissor(S),W.setScissorTest(k),o){var f=q.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,f.__webglTexture,n)}else if(s){var h=q.get(e.texture),d=t||0;he.framebufferTextureLayer(36160,36064,h.__webglTexture,n||0,d)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){W.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==nh&&le.convert(l)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var f=c===$f&&(j.has("EXT_color_buffer_half_float")||H.isWebGL2&&j.has("EXT_color_buffer_float"));if(c!==Hf&&le.convert(c)!==he.getParameter(35738)&&(c!==Zf||!(H.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float")))&&!f)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&he.readPixels(t,n,r,i,le.convert(l),le.convert(c),a)}finally{var h=null!==b?q.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);X.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,a),W.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=le.convert(n.format),s=le.convert(n.type);X.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):he.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&he.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=le.convert(r.format),c=le.convert(r.type);if(r.isData3DTexture)X.setTexture3D(r,0),a=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(r,0),a=35866}he.pixelStorei(37440,r.flipY),he.pixelStorei(37441,r.premultiplyAlpha),he.pixelStorei(3317,r.unpackAlignment);var f=he.getParameter(3314),h=he.getParameter(32878),d=he.getParameter(3316),p=he.getParameter(3315),m=he.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,g.width),he.pixelStorei(32878,g.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,g.data)):he.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g),he.pixelStorei(3314,f),he.pixelStorei(32878,h),he.pixelStorei(3316,d),he.pixelStorei(3315,p),he.pixelStorei(32877,m),0===i&&r.generateMipmaps&&he.generateMipmap(a),W.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?X.setTextureCube(e,0):e.isData3DTexture?X.setTexture3D(e,0):e.isDataArrayTexture?X.setTexture2DArray(e,0):X.setTexture2D(e,0),W.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,W.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var Tb=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Eb);Tb.prototype.isWebGL1Renderer=!0;var Cb,Ab=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;ye(this,e),this.isFogExp2=!0,this.name="",this.color=new fp(t),this.density=n}return _e(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),Rb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;ye(this,e),this.isFog=!0,this.name="",this.color=new fp(t),this.near=n,this.far=r}return _e(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Pb=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:pe(e)})),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(Tv),Lb=function(){function e(t,n){ye(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Sd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bd()}return _e(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Bd()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Nb=new Mp,Ib=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];ye(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return _e(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyMatrix4(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.applyNormalMatrix(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Nb.fromBufferAttribute(this,t),Nb.transformDirection(e),this.setXYZ(t,Nb.x,Nb.y,Nb.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new Wv(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Db=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isSpriteMaterial=!0,r.type="SpriteMaterial",r.color=new fp(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Bv),Ob=new Mp,zb=new Mp,Fb=new Mp,Ub=new Yd,Bb=new Yd,Vb=new nv,jb=new Mp,Hb=new Mp,Wb=new Mp,Gb=new Yd,qb=new Yd,Xb=new Yd,Yb=function(e){ve(n,e);var t=ge(n);function n(e){var r;if(ye(this,n),(r=t.call(this)).isSprite=!0,r.type="Sprite",void 0===Cb){Cb=new um;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new Lb(i,5);Cb.setIndex([0,1,2,0,2,3]),Cb.setAttribute("position",new Ib(a,3,0,!1)),Cb.setAttribute("uv",new Ib(a,2,3,!1))}return r.geometry=Cb,r.material=void 0!==e?e:new Db,r.center=new Yd(.5,.5),r}return _e(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zb.setFromMatrixScale(this.matrixWorld),Vb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Fb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&zb.multiplyScalar(-Fb.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Zb(jb.set(-.5,-.5,0),Fb,a,zb,n,r),Zb(Hb.set(.5,-.5,0),Fb,a,zb,n,r),Zb(Wb.set(.5,.5,0),Fb,a,zb,n,r),Gb.set(0,0),qb.set(1,0),Xb.set(1,1);var o=e.ray.intersectTriangle(jb,Hb,Wb,!1,Ob);if(null!==o||(Zb(Hb.set(-.5,.5,0),Fb,a,zb,n,r),qb.set(0,1),null!==(o=e.ray.intersectTriangle(jb,Wb,Hb,!1,Ob)))){var s=e.ray.origin.distanceTo(Ob);s<e.near||s>e.far||t.push({distance:s,point:Ob.clone(),uv:Fv.getUV(Ob,jb,Hb,Wb,Gb,qb,Xb,new Yd),face:null,object:this})}}},{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Tv);function Zb(e,t,n,r,i,a){Ub.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Bb.x=a*Ub.x-i*Ub.y,Bb.y=i*Ub.x+a*Ub.y):Bb.copy(Ub),e.copy(t),e.x+=Bb.x,e.y+=Bb.y,e.applyMatrix4(Vb)}var $b=new Mp,Jb=new Mp,Kb=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(pe(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return _e(n,[{key:"copy",value:function(e){Hu(re(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,r=this.levels;for(n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){$b.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo($b);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){$b.setFromMatrixPosition(e.matrixWorld),Jb.setFromMatrixPosition(this.matrixWorld);var n,r,i=$b.distanceTo(Jb)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r&&i>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(Tv),Qb=new Mp,e_=new gp,t_=new gp,n_=new Mp,r_=new nv,i_=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new nv,i.bindMatrixInverse=new nv,i}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new gp,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;e_.fromBufferAttribute(r.attributes.skinIndex,e),t_.fromBufferAttribute(r.attributes.skinWeight,e),Qb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=t_.getComponent(i);if(0!==a){var o=e_.getComponent(i);r_.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(n_.copy(Qb).applyMatrix4(r_),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Em),a_=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return _e(n)}(Tv),o_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:Nf,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Nf,d=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return ye(this,n),(e=t.call(this,null,u,l,c,f,h,o,s,d,p)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return _e(n)}(mp),s_=new nv,u_=new nv,l_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ye(this,e),this.uuid=Bd(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return _e(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new nv)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new nv;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:u_;s_.multiplyMatrices(o,t[i]),s_.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Gd(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new o_(t,e,e,nh,Zf);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new a_),this.bones.push(a),this.boneInverses.push((new nv).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),c_=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ye(this,n),"number"===typeof i&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Wv),f_=new nv,h_=new nv,d_=[],p_=new Em,v_=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new c_(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(p_.geometry=this.geometry,p_.material=this.material,void 0!==p_.material)for(var i=0;i<r;i++){this.getMatrixAt(i,f_),h_.multiplyMatrices(n,f_),p_.matrixWorld=h_,p_.raycast(e,d_);for(var a=0,o=d_.length;a<o;a++){var s=d_[a];s.instanceId=i,s.object=this,t.push(s)}d_.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new c_(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Em),m_=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.type="LineBasicMaterial",r.color=new fp(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(Bv),g_=new Mp,y_=new Mp,b_=new nv,__=new tv,x_=new Xp,w_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new um,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m_;return ye(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)g_.fromBufferAttribute(t,r-1),y_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=g_.distanceTo(y_);e.setAttribute("lineDistance",new Qv(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),x_.copy(n.boundingSphere),x_.applyMatrix4(r),x_.radius+=i,!1!==e.ray.intersectsSphere(x_)){b_.copy(r).invert(),__.copy(e.ray).applyMatrix4(b_);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new Mp,l=new Mp,c=new Mp,f=new Mp,h=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=h){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(__.distanceSqToSegment(u,l,f,c)>s)){f.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(f);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var _=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;_<x;_+=h){if(u.fromBufferAttribute(p,_),l.fromBufferAttribute(p,_+1),!(__.distanceSqToSegment(u,l,f,c)>s)){f.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(f);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Tv),S_=new Mp,k_=new Mp,M_=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return _e(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)S_.fromBufferAttribute(t,r),k_.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+S_.distanceTo(k_);e.setAttribute("lineDistance",new Qv(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(w_),E_=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return _e(n)}(w_),T_=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isPointsMaterial=!0,r.type="PointsMaterial",r.color=new fp(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(Bv),C_=new nv,A_=new tv,R_=new Xp,P_=new Mp,L_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new um,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T_;return ye(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),R_.copy(n.boundingSphere),R_.applyMatrix4(r),R_.radius+=i,!1!==e.ray.intersectsSphere(R_)){C_.copy(r).invert(),A_.copy(e.ray).applyMatrix4(C_);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),f=Math.min(u.count,a.start+a.count);c<f;c++){var h=u.getX(c);P_.fromBufferAttribute(l,h),N_(P_,h,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);d<p;d++)P_.fromBufferAttribute(l,d),N_(P_,d,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Tv);function N_(e,t,n,r,i,a,o){var s=A_.distanceSqToPoint(e);if(s<n){var u=new Mp;A_.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}var I_=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s,u,l,c){var f;ye(this,n),(f=t.call(this,e,r,i,a,o,s,u,l,c)).isVideoTexture=!0,f.minFilter=void 0!==s?s:Ff,f.magFilter=void 0!==o?o:Ff,f.generateMipmaps=!1;var h=pe(f);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})),f}return _e(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(mp),D_=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,a.format=i,a.magFilter=Nf,a.minFilter=Nf,a.generateMipmaps=!1,a.needsUpdate=!0,a}return _e(n)}(mp),O_=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s,u,l,c,f,h,d){var p;return ye(this,n),(p=t.call(this,null,s,u,l,c,f,a,o,h,d)).isCompressedTexture=!0,p.image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return _e(n)}(mp),z_=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s,u,l,c){var f;return ye(this,n),(f=t.call(this,e,r,i,a,o,s,u,l,c)).isCanvasTexture=!0,f.needsUpdate=!0,f}return _e(n)}(mp),F_=function(){function e(){ye(this,e),this.type="Curve",this.arcLengthDivisions=200}return _e(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Yd:new Mp);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new Mp,r=[],i=[],a=[],o=new Mp,s=new nv,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new Mp)}i[0]=new Mp,a[0]=new Mp;var c=Number.MAX_VALUE,f=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);f<=c&&(c=f,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var v=Math.acos(Vd(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,v))}a[p].crossVectors(r[p],i[p])}if(!0===t){var m=Math.acos(Vd(i[0].dot(i[e]),-1,1));m/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(m=-m);for(var g=1;g<=e;g++)i[g].applyMatrix4(s.makeRotationAxis(r[g],m*g)),a[g].crossVectors(r[g],i[g])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),U_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return ye(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return _e(n,[{key:"getPoint",value:function(e,t){for(var n=t||new Yd,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=s-this.aX,h=u-this.aY;s=f*l-h*c+this.aX,u=f*c+h*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(F_),B_=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a,o,s){var u;return ye(this,n),(u=t.call(this,e,r,i,i,a,o,s)).isArcCurve=!0,u.type="ArcCurve",u}return _e(n)}(U_);function V_(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var j_=new Mp,H_=new V_,W_=new V_,G_=new V_,q_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return ye(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return _e(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?t=a[(u-1)%o]:(j_.subVectors(a[0],a[1]).add(a[0]),t=j_);var c=a[u%o],f=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(j_.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=j_),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),h),p=Math.pow(c.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(n),h);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),H_.initNonuniformCatmullRom(t.x,c.x,f.x,n.x,d,p,v),W_.initNonuniformCatmullRom(t.y,c.y,f.y,n.y,d,p,v),G_.initNonuniformCatmullRom(t.z,c.z,f.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(H_.initCatmullRom(t.x,c.x,f.x,n.x,this.tension),W_.initCatmullRom(t.y,c.y,f.y,n.y,this.tension),G_.initCatmullRom(t.z,c.z,f.z,n.z,this.tension));return i.set(H_.calc(l),W_.calc(l),G_.calc(l)),i}},{key:"copy",value:function(e){Hu(re(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Hu(re(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Mp).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(F_);function X_(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Y_(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Z_(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var $_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yd,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Yd;return ye(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Z_(e,r.x,i.x,a.x,o.x),Z_(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(F_),J_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Mp;return ye(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Z_(e,r.x,i.x,a.x,o.x),Z_(e,r.y,i.y,a.y,o.y),Z_(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(F_),K_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd;return ye(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=i,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new Yd;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(F_),Q_=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp;return ye(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=i,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(F_),ex=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yd,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yd;return ye(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Y_(e,r.x,i.x,a.x),Y_(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(F_),tx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mp;return ye(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(Y_(e,r.x,i.x,a.x),Y_(e,r.y,i.y,a.y),Y_(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(F_),nx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ye(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return _e(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(X_(o,s.x,u.x,l.x,c.x),X_(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){Hu(re(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){Hu(re(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Yd).fromArray(i))}return this}}]),n}(F_),rx=Object.freeze({__proto__:null,ArcCurve:B_,CatmullRomCurve3:q_,CubicBezierCurve:$_,CubicBezierCurve3:J_,EllipseCurve:U_,LineCurve:K_,LineCurve3:Q_,QuadraticBezierCurve:ex,QuadraticBezierCurve3:tx,SplineCurve:nx}),ix=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return _e(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new K_(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),u=0===s?0:1-a/s;return o.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Hu(re(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Hu(re(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new rx[i.type]).fromJSON(i))}return this}}]),n}(F_),ax=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).type="Path",r.currentPoint=new Yd,e&&r.setFromPoints(e),r}return _e(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new K_(this.currentPoint.clone(),new Yd(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new ex(this.currentPoint.clone(),new Yd(e,t),new Yd(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new $_(this.currentPoint.clone(),new Yd(e,t),new Yd(n,r),new Yd(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new nx(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new U_(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Hu(re(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(ix),ox=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Yd(0,-.5),new Yd(.5,0),new Yd(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ye(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=Vd(o,0,2*Math.PI);for(var s=[],u=[],l=[],c=[],f=[],h=1/i,d=new Mp,p=new Yd,v=new Mp,m=new Mp,g=new Mp,y=0,b=0,_=0;_<=r.length-1;_++)switch(_){case 0:y=r[_+1].x-r[_].x,b=r[_+1].y-r[_].y,v.x=1*b,v.y=-y,v.z=0*b,g.copy(v),v.normalize(),c.push(v.x,v.y,v.z);break;case r.length-1:c.push(g.x,g.y,g.z);break;default:y=r[_+1].x-r[_].x,b=r[_+1].y-r[_].y,v.x=1*b,v.y=-y,v.z=0*b,m.copy(v),v.x+=g.x,v.y+=g.y,v.z+=g.z,v.normalize(),c.push(v.x,v.y,v.z),g.copy(m)}for(var x=0;x<=i;x++)for(var w=a+x*h*o,S=Math.sin(w),k=Math.cos(w),M=0;M<=r.length-1;M++){d.x=r[M].x*S,d.y=r[M].y,d.z=r[M].x*k,u.push(d.x,d.y,d.z),p.x=x/i,p.y=M/(r.length-1),l.push(p.x,p.y);var E=c[3*M+0]*S,T=c[3*M+1],C=c[3*M+0]*k;f.push(E,T,C)}for(var A=0;A<i;A++)for(var R=0;R<r.length-1;R++){var P=R+A*r.length,L=P,N=P+r.length,I=P+r.length+1,D=P+1;s.push(L,N,D),s.push(I,D,N)}return e.setIndex(s),e.setAttribute("position",new Qv(u,3)),e.setAttribute("uv",new Qv(l,2)),e.setAttribute("normal",new Qv(f,3)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(um),sx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;ye(this,n);var s=new ax;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:r,height:i,capSegments:a,radialSegments:o},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(ox),ux=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;ye(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],u=[],l=[],c=[],f=new Mp,h=new Yd;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var d=0,p=3;d<=i;d++,p+=3){var v=a+d/i*o;f.x=r*Math.cos(v),f.y=r*Math.sin(v),u.push(f.x,f.y,f.z),l.push(0,0,1),h.x=(u[p]/r+1)/2,h.y=(u[p+1]/r+1)/2,c.push(h.x,h.y)}for(var m=1;m<=i;m++)s.push(m,m+1,0);return e.setIndex(s),e.setAttribute("position",new Qv(u,3)),e.setAttribute("normal",new Qv(l,3)),e.setAttribute("uv",new Qv(c,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(um),lx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;ye(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var f=pe(e);o=Math.floor(o),s=Math.floor(s);var h=[],d=[],p=[],v=[],m=0,g=[],y=a/2,b=0;function _(){for(var e=new Mp,t=new Mp,n=0,u=(i-r)/a,_=0;_<=s;_++){for(var x=[],w=_/s,S=w*(i-r)+r,k=0;k<=o;k++){var M=k/o,E=M*c+l,T=Math.sin(E),C=Math.cos(E);t.x=S*T,t.y=-w*a+y,t.z=S*C,d.push(t.x,t.y,t.z),e.set(T,u,C).normalize(),p.push(e.x,e.y,e.z),v.push(M,1-w),x.push(m++)}g.push(x)}for(var A=0;A<o;A++)for(var R=0;R<s;R++){var P=g[R][A],L=g[R+1][A],N=g[R+1][A+1],I=g[R][A+1];h.push(P,L,I),h.push(L,N,I),n+=6}f.addGroup(b,n,0),b+=n}function x(e){for(var t=m,n=new Yd,a=new Mp,s=0,u=!0===e?r:i,g=!0===e?1:-1,_=1;_<=o;_++)d.push(0,y*g,0),p.push(0,g,0),v.push(.5,.5),m++;for(var x=m,w=0;w<=o;w++){var S=w/o*c+l,k=Math.cos(S),M=Math.sin(S);a.x=u*M,a.y=y*g,a.z=u*k,d.push(a.x,a.y,a.z),p.push(0,g,0),n.x=.5*k+.5,n.y=.5*M*g+.5,v.push(n.x,n.y),m++}for(var E=0;E<o;E++){var T=t+E,C=x+E;!0===e?h.push(C,C+1,T):h.push(C+1,C,T),s+=3}f.addGroup(b,s,!0===e?1:2),b+=s}return _(),!1===u&&(r>0&&x(!0),i>0&&x(!1)),e.setIndex(h),e.setAttribute("position",new Qv(d,3)),e.setAttribute("normal",new Qv(p,3)),e.setAttribute("uv",new Qv(v,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(um),cx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return ye(this,n),(e=t.call(this,0,r,i,a,o,s,u,l)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:l},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(lx),fx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ye(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],u=[];function l(e){for(var t=new Mp,n=new Mp,r=new Mp,a=0;a<i.length;a+=3)v(i[a+0],t),v(i[a+1],n),v(i[a+2],r),c(t,n,r,e)}function c(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),l=i-o,c=0;c<=l;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(u,c/l)}for(var f=0;f<i;f++)for(var h=0;h<2*(i-f)-1;h++){var d=Math.floor(h/2);h%2===0?(p(a[f][d+1]),p(a[f+1][d]),p(a[f][d])):(p(a[f][d+1]),p(a[f+1][d+1]),p(a[f+1][d]))}}function f(e){for(var t=new Mp,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function h(){for(var e=new Mp,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=y(e)/2/Math.PI+.5,r=b(e)/Math.PI+.5;u.push(n,1-r)}m(),d()}function d(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],r=u[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function v(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function m(){for(var e=new Mp,t=new Mp,n=new Mp,r=new Mp,i=new Yd,a=new Yd,o=new Yd,l=0,c=0;l<s.length;l+=9,c+=6){e.set(s[l+0],s[l+1],s[l+2]),t.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),o.set(u[c+4],u[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=y(r);g(i,c+0,e,f),g(a,c+2,t,f),g(o,c+4,n,f)}}function g(e,t,n,r){r<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}function y(e){return Math.atan2(e.z,-e.x)}function b(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return l(o),f(a),h(),e.setAttribute("position",new Qv(s,3)),e.setAttribute("normal",new Qv(s.slice(),3)),e.setAttribute("uv",new Qv(u,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(um),hx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,s,u,r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fx),dx=new Mp,px=new Mp,vx=new Mp,mx=new Fv,gx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(ye(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=4,o=Math.pow(10,a),s=Math.cos(Fd*i),u=r.getIndex(),l=r.getAttribute("position"),c=u?u.count:l.count,f=[0,0,0],h=["a","b","c"],d=new Array(3),p={},v=[],m=0;m<c;m+=3){u?(f[0]=u.getX(m),f[1]=u.getX(m+1),f[2]=u.getX(m+2)):(f[0]=m,f[1]=m+1,f[2]=m+2);var g=mx.a,y=mx.b,b=mx.c;if(g.fromBufferAttribute(l,f[0]),y.fromBufferAttribute(l,f[1]),b.fromBufferAttribute(l,f[2]),mx.getNormal(vx),d[0]="".concat(Math.round(g.x*o),",").concat(Math.round(g.y*o),",").concat(Math.round(g.z*o)),d[1]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),d[2]="".concat(Math.round(b.x*o),",").concat(Math.round(b.y*o),",").concat(Math.round(b.z*o)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var _=0;_<3;_++){var x=(_+1)%3,w=d[_],S=d[x],k=mx[h[_]],M=mx[h[x]],E="".concat(w,"_").concat(S),T="".concat(S,"_").concat(w);T in p&&p[T]?(vx.dot(p[T].normal)<=s&&(v.push(k.x,k.y,k.z),v.push(M.x,M.y,M.z)),p[T]=null):E in p||(p[E]={index0:f[_],index1:f[x],normal:vx.clone()})}}for(var C in p)if(p[C]){var A=p[C],R=A.index0,P=A.index1;dx.fromBufferAttribute(l,R),px.fromBufferAttribute(l,P),v.push(dx.x,dx.y,dx.z),v.push(px.x,px.y,px.z)}e.setAttribute("position",new Qv(v,3))}return e}return _e(n)}(um),yx=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).uuid=Bd(),r.type="Shape",r.holes=[],r}return _e(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Hu(re(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){Hu(re(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new ax).fromJSON(i))}return this}}]),n}(ax),bx=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,f=c?t[0]*l:e.length,h=_x(e,0,f,l,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=Tx(e,t,h,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<f;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return wx(h,d,l,n,r,u),d};function _x(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=jx(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=jx(a,e[a],e[a+1],o);return o&&Ox(o,o.next)&&(Hx(o),o=o.next),o}function xx(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ox(r,r.next)&&0!==Dx(r.prev,r,r.next))r=r.next;else{if(Hx(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function wx(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Px(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?kx(e,r,i,a):Sx(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Hx(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?wx(e=Mx(xx(e),t,n),t,n,r,i,a,2):2===o&&Ex(e,t,n,r,i,a):wx(xx(e),t,n,r,i,a,1);break}}}function Sx(e){var t=e.prev,n=e,r=e.next;if(Dx(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Nx(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Dx(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function kx(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Dx(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=Px(s,u,t,n,r),h=Px(l,c,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==e.prev&&d!==e.next&&Nx(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Dx(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&Nx(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Dx(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&Nx(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Dx(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==e.prev&&p!==e.next&&Nx(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Dx(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Mx(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Ox(i,a)&&zx(i,r,r.next,a)&&Bx(i,a)&&Bx(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Hx(r),Hx(r.next),r=e=a),r=r.next}while(r!==e);return xx(r)}function Ex(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ix(o,s)){var u=Vx(o,s);return o=xx(o,o.next),u=xx(u,u.next),wx(o,t,n,r,i,a),void wx(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Tx(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=_x(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Lx(o));for(s.sort(Cx),i=0;i<s.length;i++)Ax(s[i],n),n=xx(n,n.next);return n}function Cx(e,t){return e.x-t.x}function Ax(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Nx(a<f?i:o,a,c,f,a<f?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),Bx(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&Rx(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(e,t),t){var n=Vx(t,e);xx(t,t.next),xx(n,n.next)}}function Rx(e,t){return Dx(e.prev,e,t.prev)<0&&Dx(t.next,e,e.next)<0}function Px(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lx(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Nx(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Ix(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zx(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Bx(e,t)&&Bx(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Dx(e.prev,e,t.prev)||Dx(e,t.prev,t))||Ox(e,t)&&Dx(e.prev,e,e.next)>0&&Dx(t.prev,t,t.next)>0)}function Dx(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ox(e,t){return e.x===t.x&&e.y===t.y}function zx(e,t,n,r){var i=Ux(Dx(e,t,n)),a=Ux(Dx(e,t,r)),o=Ux(Dx(n,r,e)),s=Ux(Dx(n,r,t));return i!==a&&o!==s||(!(0!==i||!Fx(e,n,t))||(!(0!==a||!Fx(e,r,t))||(!(0!==o||!Fx(n,e,r))||!(0!==s||!Fx(n,t,r)))))}function Fx(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ux(e){return e>0?1:e<0?-1:0}function Bx(e,t){return Dx(e.prev,e,e.next)<0?Dx(e,t,e.next)>=0&&Dx(e,e.prev,t)>=0:Dx(e,t,e.prev)<0||Dx(e,e.next,t)<0}function Vx(e,t){var n=new Wx(e.i,e.x,e.y),r=new Wx(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function jx(e,t,n,r){var i=new Wx(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hx(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Wx(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Gx=function(){function e(){ye(this,e)}return _e(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];qx(e),Xx(n,e);var a=e.length;t.forEach(qx);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,Xx(n,t[o]);for(var s=bx(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function qx(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Xx(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Yx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yx([new Yd(.5,.5),new Yd(-.5,.5),new Yd(-.5,-.5),new Yd(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ye(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=pe(e),o=[],s=[],u=0,l=r.length;u<l;u++){var c=r[u];f(c)}function f(e){var t,n,r,u,l,c=[],f=void 0!==i.curveSegments?i.curveSegments:12,h=void 0!==i.steps?i.steps:1,d=void 0!==i.depth?i.depth:1,p=void 0===i.bevelEnabled||i.bevelEnabled,v=void 0!==i.bevelThickness?i.bevelThickness:.2,m=void 0!==i.bevelSize?i.bevelSize:v-.1,g=void 0!==i.bevelOffset?i.bevelOffset:0,y=void 0!==i.bevelSegments?i.bevelSegments:3,b=i.extrudePath,_=void 0!==i.UVGenerator?i.UVGenerator:Zx,x=!1;b&&(t=b.getSpacedPoints(h),x=!0,p=!1,n=b.computeFrenetFrames(h,!1),r=new Mp,u=new Mp,l=new Mp),p||(y=0,v=0,m=0,g=0);var w=e.extractPoints(f),S=w.shape,k=w.holes;if(!Gx.isClockWise(S)){S=S.reverse();for(var M=0,E=k.length;M<E;M++){var T=k[M];Gx.isClockWise(T)&&(k[M]=T.reverse())}}for(var C=Gx.triangulateShape(S,k),A=S,R=0,P=k.length;R<P;R++){var L=k[R];S=S.concat(L)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var I=S.length,D=C.length;function O(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,f=o*l-s*u;if(Math.abs(f)>Number.EPSILON){var h=Math.sqrt(c),d=Math.sqrt(u*u+l*l),p=t.x-s/h,v=t.y+o/h,m=((n.x-l/d-p)*l-(n.y+u/d-v)*u)/(o*l-s*u),g=(r=p+o*m-e.x)*r+(i=v+s*m-e.y)*i;if(g<=2)return new Yd(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Yd(r/a,i/a)}for(var z=[],F=0,U=A.length,B=U-1,V=F+1;F<U;F++,B++,V++)B===U&&(B=0),V===U&&(V=0),z[F]=O(A[F],A[B],A[V]);for(var j,H=[],W=z.concat(),G=0,q=k.length;G<q;G++){var X=k[G];j=[];for(var Y=0,Z=X.length,$=Z-1,J=Y+1;Y<Z;Y++,$++,J++)$===Z&&($=0),J===Z&&(J=0),j[Y]=O(X[Y],X[$],X[J]);H.push(j),W=W.concat(j)}for(var K=0;K<y;K++){for(var Q=K/y,ee=v*Math.cos(Q*Math.PI/2),te=m*Math.sin(Q*Math.PI/2)+g,ne=0,re=A.length;ne<re;ne++){var ie=N(A[ne],z[ne],te);Pe(ie.x,ie.y,-ee)}for(var ae=0,oe=k.length;ae<oe;ae++){var se=k[ae];j=H[ae];for(var ue=0,le=se.length;ue<le;ue++){var ce=N(se[ue],j[ue],te);Pe(ce.x,ce.y,-ee)}}}for(var fe=m+g,he=0;he<I;he++){var de=p?N(S[he],W[he],fe):S[he];x?(u.copy(n.normals[0]).multiplyScalar(de.x),r.copy(n.binormals[0]).multiplyScalar(de.y),l.copy(t[0]).add(u).add(r),Pe(l.x,l.y,l.z)):Pe(de.x,de.y,0)}for(var pe=1;pe<=h;pe++)for(var ve=0;ve<I;ve++){var me=p?N(S[ve],W[ve],fe):S[ve];x?(u.copy(n.normals[pe]).multiplyScalar(me.x),r.copy(n.binormals[pe]).multiplyScalar(me.y),l.copy(t[pe]).add(u).add(r),Pe(l.x,l.y,l.z)):Pe(me.x,me.y,d/h*pe)}for(var ge=y-1;ge>=0;ge--){for(var ye=ge/y,be=v*Math.cos(ye*Math.PI/2),_e=m*Math.sin(ye*Math.PI/2)+g,xe=0,we=A.length;xe<we;xe++){var Se=N(A[xe],z[xe],_e);Pe(Se.x,Se.y,d+be)}for(var ke=0,Me=k.length;ke<Me;ke++){var Ee=k[ke];j=H[ke];for(var Te=0,Ce=Ee.length;Te<Ce;Te++){var Ae=N(Ee[Te],j[Te],_e);x?Pe(Ae.x,Ae.y+t[h-1].y,t[h-1].x+be):Pe(Ae.x,Ae.y,d+be)}}}function Re(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=h+2*y;a<o;a++){var s=I*a,u=I*(a+1);Ne(t+r+s,t+i+s,t+i+u,t+r+u)}}}function Pe(e,t,n){c.push(e),c.push(t),c.push(n)}function Le(e,t,n){Ie(e),Ie(t),Ie(n);var r=o.length/3,i=_.generateTopUV(a,o,r-3,r-2,r-1);De(i[0]),De(i[1]),De(i[2])}function Ne(e,t,n,r){Ie(e),Ie(t),Ie(r),Ie(t),Ie(n),Ie(r);var i=o.length/3,s=_.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Ie(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function De(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(p){for(var t=0,n=I*t,r=0;r<D;r++){var i=C[r];Le(i[2]+n,i[1]+n,i[0]+n)}n=I*(t=h+2*y);for(var s=0;s<D;s++){var u=C[s];Le(u[0]+n,u[1]+n,u[2]+n)}}else{for(var l=0;l<D;l++){var c=C[l];Le(c[2],c[1],c[0])}for(var f=0;f<D;f++){var d=C[f];Le(d[0]+I*h,d[1]+I*h,d[2]+I*h)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Re(A,t),t+=A.length;for(var n=0,r=k.length;n<r;n++){var i=k[n];Re(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Qv(o,3)),e.setAttribute("uv",new Qv(s,2)),e.computeVertexNormals(),e}return _e(n,[{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new rx[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(um),Zx={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new Yd(a,o),new Yd(s,u),new Yd(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],f=t[3*r+2],h=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new Yd(o,1-u),new Yd(l,1-f),new Yd(h,1-p),new Yd(v,1-g)]:[new Yd(s,1-u),new Yd(c,1-f),new Yd(d,1-p),new Yd(m,1-g)]}};var $x=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,o,s,r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fx),Jx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,o,r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fx),Kx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;ye(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:u},a=Math.max(3,a);for(var l=[],c=[],f=[],h=[],d=r,p=(i-r)/(o=Math.max(1,o)),v=new Mp,m=new Yd,g=0;g<=o;g++){for(var y=0;y<=a;y++){var b=s+y/a*u;v.x=d*Math.cos(b),v.y=d*Math.sin(b),c.push(v.x,v.y,v.z),f.push(0,0,1),m.x=(v.x/i+1)/2,m.y=(v.y/i+1)/2,h.push(m.x,m.y)}d+=p}for(var _=0;_<o;_++)for(var x=_*(a+1),w=0;w<a;w++){var S=w+x,k=S,M=S+a+1,E=S+a+2,T=S+1;l.push(k,M,T),l.push(M,E,T)}return e.setIndex(l),e.setAttribute("position",new Qv(c,3)),e.setAttribute("normal",new Qv(f,3)),e.setAttribute("uv",new Qv(h,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(um),Qx=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yx([new Yd(0,.5),new Yd(-.5,-.5),new Yd(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;ye(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(r))h(r);else for(var f=0;f<r.length;f++)h(r[f]),e.addGroup(l,c,f),l+=c,c=0;function h(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===Gx.isClockWise(r)&&(r=r.reverse());for(var f=0,h=l.length;f<h;f++){var d=l[f];!0===Gx.isClockWise(d)&&(l[f]=d.reverse())}for(var p=Gx.triangulateShape(r,l),v=0,m=l.length;v<m;v++){var g=l[v];r=r.concat(g)}for(var y=0,b=r.length;y<b;y++){var _=r[y];o.push(_.x,_.y,0),s.push(0,0,1),u.push(_.x,_.y)}for(var x=0,w=p.length;x<w;x++){var S=p[x],k=S[0]+t,M=S[1]+t,E=S[2]+t;a.push(k,M,E),c+=3}}return e.setIndex(a),e.setAttribute("position",new Qv(o,3)),e.setAttribute("normal",new Qv(s,3)),e.setAttribute("uv",new Qv(u,2)),e}return _e(n,[{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(um);var ew=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;ye(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),f=0,h=[],d=new Mp,p=new Mp,v=[],m=[],g=[],y=[],b=0;b<=a;b++){var _=[],x=b/a,w=0;0==b&&0==u?w=.5/i:b==a&&c==Math.PI&&(w=-.5/i);for(var S=0;S<=i;S++){var k=S/i;d.x=-r*Math.cos(o+k*s)*Math.sin(u+x*l),d.y=r*Math.cos(u+x*l),d.z=r*Math.sin(o+k*s)*Math.sin(u+x*l),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(k+w,1-x),_.push(f++)}h.push(_)}for(var M=0;M<a;M++)for(var E=0;E<i;E++){var T=h[M][E+1],C=h[M][E],A=h[M+1][E],R=h[M+1][E+1];(0!==M||u>0)&&v.push(T,C,R),(M!==a-1||c<Math.PI)&&v.push(C,A,R)}return e.setIndex(v),e.setAttribute("position",new Qv(m,3)),e.setAttribute("normal",new Qv(g,3)),e.setAttribute("uv",new Qv(y,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(um),tw=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ye(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,o,r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(fx),nw=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;ye(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var u=[],l=[],c=[],f=[],h=new Mp,d=new Mp,p=new Mp,v=0;v<=a;v++)for(var m=0;m<=o;m++){var g=m/o*s,y=v/a*Math.PI*2;d.x=(r+i*Math.cos(y))*Math.cos(g),d.y=(r+i*Math.cos(y))*Math.sin(g),d.z=i*Math.sin(y),l.push(d.x,d.y,d.z),h.x=r*Math.cos(g),h.y=r*Math.sin(g),p.subVectors(d,h).normalize(),c.push(p.x,p.y,p.z),f.push(m/o),f.push(v/a)}for(var b=1;b<=a;b++)for(var _=1;_<=o;_++){var x=(o+1)*b+_-1,w=(o+1)*(b-1)+_-1,S=(o+1)*(b-1)+_,k=(o+1)*b+_;u.push(x,w,k),u.push(w,S,k)}return e.setIndex(u),e.setAttribute("position",new Qv(l,3)),e.setAttribute("normal",new Qv(c,3)),e.setAttribute("uv",new Qv(f,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(um),rw=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;ye(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:u},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],f=[],h=[],d=new Mp,p=new Mp,v=new Mp,m=new Mp,g=new Mp,y=new Mp,b=new Mp,_=0;_<=a;++_){var x=_/a*s*Math.PI*2;L(x,s,u,r,v),L(x+.01,s,u,r,m),y.subVectors(m,v),b.addVectors(m,v),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize();for(var w=0;w<=o;++w){var S=w/o*Math.PI*2,k=-i*Math.cos(S),M=i*Math.sin(S);d.x=v.x+(k*b.x+M*g.x),d.y=v.y+(k*b.y+M*g.y),d.z=v.z+(k*b.z+M*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,v).normalize(),f.push(p.x,p.y,p.z),h.push(_/a),h.push(w/o)}}for(var E=1;E<=a;E++)for(var T=1;T<=o;T++){var C=(o+1)*(E-1)+(T-1),A=(o+1)*E+(T-1),R=(o+1)*E+T,P=(o+1)*(E-1)+T;l.push(C,A,P),l.push(A,R,P)}function L(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(l),e.setAttribute("position",new Qv(c,3)),e.setAttribute("normal",new Qv(f,3)),e.setAttribute("uv",new Qv(h,2)),e}return _e(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(um),iw=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tx(new Mp(-1,-1,0),new Mp(-1,1,0),new Mp(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ye(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var u=r.computeFrenetFrames(i,s);e.tangents=u.tangents,e.normals=u.normals,e.binormals=u.binormals;var l=new Mp,c=new Mp,f=new Yd,h=new Mp,d=[],p=[],v=[],m=[];function g(){for(var e=0;e<i;e++)y(e);y(!1===s?i:0),_(),b()}function y(e){h=r.getPointAt(e/i,h);for(var t=u.normals[e],n=u.binormals[e],s=0;s<=o;s++){var f=s/o*Math.PI*2,v=Math.sin(f),m=-Math.cos(f);c.x=m*t.x+v*n.x,c.y=m*t.y+v*n.y,c.z=m*t.z+v*n.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=h.x+a*c.x,l.y=h.y+a*c.y,l.z=h.z+a*c.z,d.push(l.x,l.y,l.z)}}function b(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;m.push(n,r,s),m.push(r,a,s)}}function _(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)f.x=e/i,f.y=t/o,v.push(f.x,f.y)}return g(),e.setIndex(m),e.setAttribute("position",new Qv(d,3)),e.setAttribute("normal",new Qv(p,3)),e.setAttribute("uv",new Qv(v,2)),e}return _e(n,[{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new rx[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(um),aw=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(ye(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new Mp,s=new Mp;if(null!==r.index){var u=r.attributes.position,l=r.index,c=r.groups;0===c.length&&(c=[{start:0,count:l.count,materialIndex:0}]);for(var f=0,h=c.length;f<h;++f)for(var d=c[f],p=d.start,v=d.count,m=p,g=p+v;m<g;m+=3)for(var y=0;y<3;y++){var b=l.getX(m+y),_=l.getX(m+(y+1)%3);o.fromBufferAttribute(u,b),s.fromBufferAttribute(u,_),!0===ow(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var x=r.attributes.position,w=0,S=x.count/3;w<S;w++)for(var k=0;k<3;k++){var M=3*w+k,E=3*w+(k+1)%3;o.fromBufferAttribute(x,M),s.fromBufferAttribute(x,E),!0===ow(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new Qv(i,3))}return e}return _e(n)}(um);function ow(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var sw=Object.freeze({__proto__:null,BoxGeometry:Cm,BoxBufferGeometry:Cm,CapsuleGeometry:sx,CapsuleBufferGeometry:sx,CircleGeometry:ux,CircleBufferGeometry:ux,ConeGeometry:cx,ConeBufferGeometry:cx,CylinderGeometry:lx,CylinderBufferGeometry:lx,DodecahedronGeometry:hx,DodecahedronBufferGeometry:hx,EdgesGeometry:gx,ExtrudeGeometry:Yx,ExtrudeBufferGeometry:Yx,IcosahedronGeometry:$x,IcosahedronBufferGeometry:$x,LatheGeometry:ox,LatheBufferGeometry:ox,OctahedronGeometry:Jx,OctahedronBufferGeometry:Jx,PlaneGeometry:Ym,PlaneBufferGeometry:Ym,PolyhedronGeometry:fx,PolyhedronBufferGeometry:fx,RingGeometry:Kx,RingBufferGeometry:Kx,ShapeGeometry:Qx,ShapeBufferGeometry:Qx,SphereGeometry:ew,SphereBufferGeometry:ew,TetrahedronGeometry:tw,TetrahedronBufferGeometry:tw,TorusGeometry:nw,TorusBufferGeometry:nw,TorusKnotGeometry:rw,TorusKnotBufferGeometry:rw,TubeGeometry:iw,TubeBufferGeometry:iw,WireframeGeometry:aw}),uw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isShadowMaterial=!0,r.type="ShadowMaterial",r.color=new fp(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(Bv),lw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).isRawShaderMaterial=!0,r.type="RawShaderMaterial",r}return _e(n)}(Lm),cw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new fp(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fp(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nd,r.normalScale=new Yd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Bv),fw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new Yd(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(pe(r),"reflectivity",{get:function(){return Vd(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new fp(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new fp(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new fp(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._iridescence=0,r._transmission=0,r.setValues(e),r}return _e(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=Q(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(cw),hw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshPhongMaterial=!0,r.type="MeshPhongMaterial",r.color=new fp(16777215),r.specular=new fp(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fp(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nd,r.normalScale=new Yd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=vf,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Bv),dw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.type="MeshToonMaterial",r.color=new fp(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fp(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nd,r.normalScale=new Yd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Bv),pw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshNormalMaterial=!0,r.type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nd,r.normalScale=new Yd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(Bv),vw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshLambertMaterial=!0,r.type="MeshLambertMaterial",r.color=new fp(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new fp(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=vf,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(Bv),mw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new fp(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nd,r.normalScale=new Yd(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(Bv),gw=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).isLineDashedMaterial=!0,r.type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(m_);function yw(e,t,n){return _w(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function bw(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function _w(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xw(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function ww(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i}function Sw(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var kw=Object.freeze({__proto__:null,arraySlice:yw,convertArray:bw,isTypedArray:_w,getKeyframeOrder:xw,sortedArray:ww,flattenJSON:Sw,subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],f=[],h=0;h<u.times.length;++h){var d=u.times[h]*i;if(!(d<n||d>=r)){c.push(u.times[h]);for(var p=0;p<l;++p)f.push(u.values[h*l+p])}}0!==c.length&&(u.times=bw(c,u.times.constructor),u.values=bw(f,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var f=r.times.length-1,h=void 0;if(a<=r.times[0]){var d=s,p=u-s;h=yw(r.values,d,p)}else if(a>=r.times[f]){var v=f*u+s,m=v+u-s;h=yw(r.values,v,m)}else{var g=r.createInterpolant(),y=s,b=u-s;g.evaluate(a),h=yw(g.resultBuffer,y,b)}"quaternion"===i&&(new kp).fromArray(h).normalize().conjugate().toArray(h);for(var _=o.times.length,x=0;x<_;++x){var w=x*c+l;if("quaternion"===i)kp.multiplyQuaternionsFlat(o.values,w,h,0,o.values,w);else for(var S=c-2*l,k=0;k<S;++k)o.values[w+k]-=h[k]}},s=0;s<i;++s)o(s);return e.blendMode=Yh,e}}),Mw=function(){function e(t,n,r,i){ye(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return _e(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),Ew=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){var o;return ye(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Wh,endingEnd:Wh},o}return _e(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Gh:i=e,o=2*t-n;break;case qh:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Gh:a=e,s=2*n-t;break;case qh:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-f*v+2*f*p-f*d,g=(1+f)*v+(-1.5-2*f)*p+(-.5+f)*d+1,y=(-1-h)*v+(1.5+h)*p+.5*d,b=h*v-h*p,_=0;_!==o;++_)i[_]=m*a[l+_]+g*a[u+_]+y*a[s+_]+b*a[c+_];return i}}]),n}(Mw),Tw=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){return ye(this,n),t.call(this,e,r,i,a)}return _e(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,f=0;f!==o;++f)i[f]=a[u+f]*c+a[s+f]*l;return i}}]),n}(Mw),Cw=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){return ye(this,n),t.call(this,e,r,i,a)}return _e(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Mw),Aw=function(){function e(t,n,r,i){if(ye(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bw(n,this.TimeBufferType),this.values=bw(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return _e(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new Cw(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Tw(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new Ew(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Vh:t=this.InterpolantFactoryMethodDiscrete;break;case jh:t=this.InterpolantFactoryMethodLinear;break;case Hh:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Vh;case this.InterpolantFactoryMethodLinear:return jh;case this.InterpolantFactoryMethodSmooth:return Hh}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=yw(n,i,a),this.values=yw(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&_w(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=yw(this.times),t=yw(this.values),n=this.getValueSize(),r=this.getInterpolation()===Hh,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,f=l+n,h=0;h!==n;++h){var d=t[l+h];if(d!==t[c+h]||d!==t[f+h]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=yw(e,0,a),this.values=yw(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=yw(this.times,0),t=yw(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:bw(e.times,Array),values:bw(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Aw.prototype.TimeBufferType=Float32Array,Aw.prototype.ValueBufferType=Float32Array,Aw.prototype.DefaultInterpolation=jh;var Rw=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Aw);Rw.prototype.ValueTypeName="bool",Rw.prototype.ValueBufferType=Array,Rw.prototype.DefaultInterpolation=Vh,Rw.prototype.InterpolantFactoryMethodLinear=void 0,Rw.prototype.InterpolantFactoryMethodSmooth=void 0;var Pw=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Aw);Pw.prototype.ValueTypeName="color";var Lw=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Aw);Lw.prototype.ValueTypeName="number";var Nw=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){return ye(this,n),t.call(this,e,r,i,a)}return _e(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)kp.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(Mw),Iw=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Nw(this.times,this.values,this.getValueSize(),e)}}]),n}(Aw);Iw.prototype.ValueTypeName="quaternion",Iw.prototype.DefaultInterpolation=jh,Iw.prototype.InterpolantFactoryMethodSmooth=void 0;var Dw=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Aw);Dw.prototype.ValueTypeName="string",Dw.prototype.ValueBufferType=Array,Dw.prototype.DefaultInterpolation=Vh,Dw.prototype.InterpolantFactoryMethodLinear=void 0,Dw.prototype.InterpolantFactoryMethodSmooth=void 0;var Ow=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),t.apply(this,arguments)}return _e(n)}(Aw);Ow.prototype.ValueTypeName="vector";var zw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xh;ye(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Bd(),this.duration<0&&this.resetDuration()}return _e(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Fw(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Aw.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=xw(s);s=ww(s,1,l),u=ww(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Lw(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var f=[];for(var h in r)f.push(this.CreateFromMorphTargetSequence(h,r[h],t,n));return f}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Sw(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var f={},h=void 0;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)f[c[h].morphTargets[d]]=-1;for(var p in f){for(var v=[],m=[],g=0;g!==c[h].morphTargets.length;++g){var y=c[h];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new Lw(".morphTargetInfluence["+p+"]",v,m))}s=f.length*a}else{var b=".bones["+t[l].name+"]";n(Ow,b+".position",c,"pos",r),n(Iw,b+".quaternion",c,"rot",r),n(Ow,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Fw(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Lw;case"vector":case"vector2":case"vector3":case"vector4":return Ow;case"color":return Pw;case"quaternion":return Iw;case"bool":case"boolean":return Rw;case"string":return Dw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Sw(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Uw,Bw={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Vw=_e((function e(t,n,r){ye(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),jw=new Vw,Hw=function(){function e(t){ye(this,e),this.manager=void 0!==t?t:jw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _e(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Ww={},Gw=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e)).response=r,i}return _e(n)}(se(Error)),qw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=Bw.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===Ww[e]){Ww[e]=[],Ww[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=Ww[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0,u=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,f=n.length;c<f;c++){var h=n[c];h.onProgress&&h.onProgress(l)}e.enqueue(u),t()}}))}()}});return new Response(u)}throw new Gw('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){Bw.add(e,t);var n=Ww[e];delete Ww[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=Ww[e];if(void 0===n)throw i.manager.itemError(e),t;delete Ww[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else Ww[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Hw),Xw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new qw(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=zw.parse(e[n]);t.push(r)}return t}}]),n}(Hw),Yw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new O_,s=new qw(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Ff),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,f=e.length;c<f;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ff),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(Hw),Zw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Bw.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=Qd("img");function s(){l(),Bw.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(Hw),$w=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=new zm,a=new Zw(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(Hw),Jw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new o_,o=new qw(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n=i.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Pf,a.wrapT=void 0!==n.wrapT?n.wrapT:Pf,a.magFilter=void 0!==n.magFilter?n.magFilter:Ff,a.minFilter=void 0!==n.minFilter?n.minFilter:Ff,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Vf),1===n.mipmapCount&&(a.minFilter=Ff),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}]),n}(Hw),Kw=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=new mp,a=new Zw(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(Hw),Qw=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ye(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new fp(e),r.intensity=i,r}return _e(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(Tv),eS=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Tv.DefaultUp),a.updateMatrix(),a.groundColor=new fp(r),a}return _e(n,[{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(Qw),tS=new nv,nS=new Mp,rS=new Mp,iS=function(){function e(t){ye(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yd(512,512),this.map=null,this.mapPass=null,this.matrix=new nv,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gm,this._frameExtents=new Yd(1,1),this._viewportCount=1,this._viewports=[new gp(0,0,1,1)]}return _e(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;nS.setFromMatrixPosition(e.matrixWorld),t.position.copy(nS),rS.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(rS),t.updateMatrixWorld(),tS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),aS=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this,new Im(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return _e(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Ud*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),Hu(re(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(iS),oS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return ye(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(Tv.DefaultUp),i.updateMatrix(),i.target=new Tv,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.shadow=new aS,i}return _e(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Qw),sS=new nv,uS=new Mp,lS=new Mp,cS=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this,new Im(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new Yd(4,2),e._viewportCount=6,e._viewports=[new gp(2,1,1,1),new gp(0,1,1,1),new gp(3,1,1,1),new gp(1,1,1,1),new gp(3,0,1,1),new gp(1,0,1,1)],e._cubeDirections=[new Mp(1,0,0),new Mp(-1,0,0),new Mp(0,0,1),new Mp(0,0,-1),new Mp(0,1,0),new Mp(0,-1,0)],e._cubeUps=[new Mp(0,1,0),new Mp(0,1,0),new Mp(0,1,0),new Mp(0,1,0),new Mp(0,0,1),new Mp(0,0,-1)],e}return _e(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),uS.setFromMatrixPosition(e.matrixWorld),n.position.copy(uS),lS.copy(n.position),lS.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(lS),n.updateMatrixWorld(),r.makeTranslation(-uS.x,-uS.y,-uS.z),sS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sS)}}]),n}(iS),fS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return ye(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new cS,i}return _e(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Qw),hS=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this,new ig(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return _e(n)}(iS),dS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(Tv.DefaultUp),i.updateMatrix(),i.target=new Tv,i.shadow=new hS,i}return _e(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Qw),pS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;return ye(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return _e(n)}(Qw),vS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return ye(this,n),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=o,i}return _e(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(Qw),mS=function(){function e(){ye(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Mp)}return _e(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),gS=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return ye(this,n),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Qw),yS=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).textures={},r}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new qw(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new fp).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(i.uniforms[a]={},o.type){case"t":i.uniforms[a].value=r(o.value);break;case"c":i.uniforms[a].value=(new fp).setHex(o.value);break;case"v2":i.uniforms[a].value=(new Yd).fromArray(o.value);break;case"v3":i.uniforms[a].value=(new Mp).fromArray(o.value);break;case"v4":i.uniforms[a].value=(new gp).fromArray(o.value);break;case"m3":i.uniforms[a].value=(new Zd).fromArray(o.value);break;case"m4":i.uniforms[a].value=(new nv).fromArray(o.value);break;default:i.uniforms[a].value=o.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)i.extensions[s]=e.extensions[s];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),i.normalScale=(new Yd).fromArray(u)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Yd).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:uw,SpriteMaterial:Db,RawShaderMaterial:lw,ShaderMaterial:Lm,PointsMaterial:T_,MeshPhysicalMaterial:fw,MeshStandardMaterial:cw,MeshPhongMaterial:hw,MeshToonMaterial:dw,MeshNormalMaterial:pw,MeshLambertMaterial:vw,MeshDepthMaterial:fb,MeshDistanceMaterial:hb,MeshBasicMaterial:Vv,MeshMatcapMaterial:mw,LineDashedMaterial:gw,LineBasicMaterial:m_,Material:Bv}[e]}}]),n}(Hw),bS=function(){function e(){ye(this,e)}return _e(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),_S=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Hu(re(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(um),xS=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new qw(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=Kd(i.type,a),s=new Lb(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new _S:new um,a=e.data.index;if(void 0!==a){var o=Kd(a.type,a.array);i.setIndex(new Wv(o,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var f=r(e.data,l.data);c=new Ib(f,l.itemSize,l.offset,l.normalized)}else{var h=Kd(l.type,l.array);c=new(l.isInstancedBufferAttribute?c_:Wv)(h,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),void 0!==l.updateRange&&(c.updateRange.offset=l.updateRange.offset,c.updateRange.count=l.updateRange.count),i.setAttribute(u,c)}var d=e.data.morphAttributes;if(d)for(var p in d){for(var v=d[p],m=[],g=0,y=v.length;g<y;g++){var b=v[g],_=void 0;if(b.isInterleavedBufferAttribute){var x=r(e.data,b.data);_=new Ib(x,b.itemSize,b.offset,b.normalized)}else{var w=Kd(b.type,b.array);_=new Wv(w,b.itemSize,b.normalized)}void 0!==b.name&&(_.name=b.name),m.push(_)}i.morphAttributes[p]=m}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var S=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==S)for(var k=0,M=S.length;k!==M;++k){var E=S[k];i.addGroup(E.start,E.count,E.materialIndex)}var T=e.data.boundingSphere;if(void 0!==T){var C=new Mp;void 0!==T.center&&C.fromArray(T.center),i.boundingSphere=new Xp(C,T.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(Hw),wS=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?bS.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new qw(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}},{key:"loadAsync",value:function(){var e=ne(le().mark((function e(t,n){var r,i,a,o,s,u;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?bS.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(a=new qw(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(u=s.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,o,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),void 0!==t){var c=!1;for(var f in a)if(a[f].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseAsync",value:function(){var e=ne(le().mark((function e(t){var n,r,i,a,o,s,u,l;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,i,s,o,n),l=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,l),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new yx).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new l_).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new xS,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in sw?o=sw[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new yS;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=zw.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:Kd(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new Vw(t);(n=new Zw(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){for(var f=[],h=0,d=c.length;h<d;h++){var p=a(c[h]);null!==p&&(p instanceof HTMLImageElement?f.push(p):f.push(new o_(p.data,p.width,p.height)))}i[l.uuid]=new dp(f)}else{var v=a(l.url);i[l.uuid]=new dp(v)}}}return i}},{key:"parseImagesAsync",value:function(){var e=ne(le().mark((function e(t){var n,r,i,a,o,s,u,l,c,f,h,d,p,v,m;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=ne(le().mark((function e(t){var r,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Kd(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}(i=new Zw(this.manager)).setCrossOrigin(this.crossOrigin),s=0,u=t.length;case 8:if(!(s<u)){e.next=33;break}if(l=t[s],c=l.url,!Array.isArray(c)){e.next=26;break}f=[],h=0,d=c.length;case 14:if(!(h<d)){e.next=23;break}return p=c[h],e.next=18,a(p);case 18:null!==(v=e.sent)&&(v instanceof HTMLImageElement?f.push(v):f.push(new o_(v.data,v.width,v.height)));case 20:h++,e.next=14;break;case 23:r[l.uuid]=new dp(f),e.next=30;break;case 26:return e.next=28,a(l.url);case 28:m=e.sent,r[l.uuid]=new dp(m);case 30:s++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],u=s.data,l=void 0;Array.isArray(u)?(l=new zm,6===u.length&&(l.needsUpdate=!0)):(l=u&&u.data?new o_:new mp,u&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,SS)),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],kS),l.wrapT=n(o.wrap[1],kS)),void 0!==o.format&&(l.format=o.format),void 0!==o.type&&(l.type=o.type),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,MS)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,MS)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new Pb,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new fp(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new Rb(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Ab(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new Im(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ig(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new pS(e.color,e.intensity);break;case"DirectionalLight":a=new dS(e.color,e.intensity);break;case"PointLight":a=new fS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new vS(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new oS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new eS(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new gS).fromJSON(e);break;case"SkinnedMesh":o=u(e.geometry),s=l(e.material),a=new i_(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=u(e.geometry),s=l(e.material),a=new Em(o,s);break;case"InstancedMesh":o=u(e.geometry),s=l(e.material);var f=e.count,h=e.instanceMatrix,d=e.instanceColor;(a=new v_(o,s,f)).instanceMatrix=new c_(new Float32Array(h.array),16),void 0!==d&&(a.instanceColor=new c_(new Float32Array(d.array),d.itemSize));break;case"LOD":a=new Kb;break;case"Line":a=new w_(u(e.geometry),l(e.material));break;case"LineLoop":a=new E_(u(e.geometry),l(e.material));break;case"LineSegments":a=new M_(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new L_(u(e.geometry),l(e.material));break;case"Sprite":a=new Yb(l(e.material));break;case"Group":a=new yb;break;case"Bone":a=new a_;break;default:a=new Tv}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,v=0;v<p.length;v++)a.add(this.parseObject(p[v],t,n,r,i));if(void 0!==e.animations)for(var m=e.animations,g=0;g<m.length;g++){var y=m[g];a.animations.push(i[y])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var b=e.levels,_=0;_<b.length;_++){var x=b[_],w=a.getObjectByProperty("uuid",x.object);void 0!==w&&a.addLevel(w,x.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(Hw),SS={UVMapping:kf,CubeReflectionMapping:Mf,CubeRefractionMapping:Ef,EquirectangularReflectionMapping:Tf,EquirectangularRefractionMapping:Cf,CubeUVReflectionMapping:Af},kS={RepeatWrapping:Rf,ClampToEdgeWrapping:Pf,MirroredRepeatWrapping:Lf},MS={NearestFilter:Nf,NearestMipmapNearestFilter:If,NearestMipmapLinearFilter:Of,LinearFilter:Ff,LinearMipmapNearestFilter:Uf,LinearMipmapLinearFilter:Vf},ES=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return _e(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Bw.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Bw.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}]),n}(Hw),TS={getContext:function(){return void 0===Uw&&(Uw=new(window.AudioContext||window.webkitAudioContext)),Uw},setContext:function(e){Uw=e}},CS=function(e){ve(n,e);var t=ge(n);function n(e){return ye(this,n),t.call(this,e)}return _e(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new qw(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);TS.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}}),n,r)}}]),n}(Hw),AS=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ye(this,n),(i=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var o=(new fp).set(e),s=(new fp).set(r),u=new Mp(o.r,o.g,o.b),l=new Mp(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(f),i}return _e(n)}(gS),RS=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ye(this,n),(r=t.call(this,void 0,i)).isAmbientLightProbe=!0;var a=(new fp).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return _e(n)}(gS),PS=new nv,LS=new nv,NS=new nv,IS=function(){function e(){ye(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Im,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Im,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return _e(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,NS.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Fd*t.fov*.5)/t.zoom;LS.elements[12]=-i,PS.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,NS.elements[0]=2*t.near/(r-n),NS.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(NS),n=-o*t.aspect-a,r=o*t.aspect-a,NS.elements[0]=2*t.near/(r-n),NS.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(NS)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(LS),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(PS)}}]),e}(),DS=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ye(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _e(e,[{key:"start",value:function(){this.startTime=OS(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=OS();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function OS(){return("undefined"===typeof performance?Date:performance).now()}var zS=new Mp,FS=new kp,US=new Mp,BS=new Mp,VS=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).type="AudioListener",e.context=TS.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new DS,e}return _e(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(zS,FS,US),BS.set(0,0,-1).applyQuaternion(FS),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(zS.x,i),t.positionY.linearRampToValueAtTime(zS.y,i),t.positionZ.linearRampToValueAtTime(zS.z,i),t.forwardX.linearRampToValueAtTime(BS.x,i),t.forwardY.linearRampToValueAtTime(BS.y,i),t.forwardZ.linearRampToValueAtTime(BS.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(zS.x,zS.y,zS.z),t.setOrientation(BS.x,BS.y,BS.z,r.x,r.y,r.z)}}]),n}(Tv),jS=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return _e(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Tv),HS=new Mp,WS=new kp,GS=new Mp,qS=new Mp,XS=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return _e(n,[{key:"disconnect",value:function(){Hu(re(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(HS,WS,GS),qS.set(0,0,1).applyQuaternion(WS);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(HS.x,r),t.positionY.linearRampToValueAtTime(HS.y,r),t.positionZ.linearRampToValueAtTime(HS.z,r),t.orientationX.linearRampToValueAtTime(qS.x,r),t.orientationY.linearRampToValueAtTime(qS.y,r),t.orientationZ.linearRampToValueAtTime(qS.z,r)}else t.setPosition(HS.x,HS.y,HS.z),t.setOrientation(qS.x,qS.y,qS.z)}}}]),n}(jS),YS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;ye(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return _e(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),ZS=function(){function e(t,n,r){var i,a,o;switch(ye(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return _e(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){kp.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;kp.multiplyQuaternionsFlat(e,a,e,t,e,n),kp.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),$S="\\[\\]\\.:\\/",JS=new RegExp("[\\[\\]\\.:\\/]","g"),KS="[^\\[\\]\\.:\\/]",QS="[^"+$S.replace("\\.","")+"]",ek=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",KS)+/(WCOD+)?/.source.replace("WCOD",QS)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KS)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KS)+"$"),tk=["material","materials","bones"],nk=function(){function e(t,n,r){ye(this,e);var i=r||rk.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return _e(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),rk=function(){function e(t,n,r){ye(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _e(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var f=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(JS,"")}},{key:"parseTrackName",value:function(e){var t=ek.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==tk.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();rk.Composite=nk,rk.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},rk.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},rk.prototype.GetterByBindingType=[rk.prototype._getValue_direct,rk.prototype._getValue_array,rk.prototype._getValue_arrayElement,rk.prototype._getValue_toArray],rk.prototype.SetterByBindingTypeAndVersioning=[[rk.prototype._setValue_direct,rk.prototype._setValue_direct_setNeedsUpdate,rk.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[rk.prototype._setValue_array,rk.prototype._setValue_array_setNeedsUpdate,rk.prototype._setValue_array_setMatrixWorldNeedsUpdate],[rk.prototype._setValue_arrayElement,rk.prototype._setValue_arrayElement_setNeedsUpdate,rk.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[rk.prototype._setValue_fromArray,rk.prototype._setValue_fromArray_setNeedsUpdate,rk.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var ik=function(){function e(){ye(this,e),this.isAnimationObjectGroup=!0,this.uuid=Bd(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return _e(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var f=arguments[l],h=f.uuid,d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(f);for(var p=0,v=a;p!==v;++p)i[p].push(new rk(f,n[p],r[p]))}else if(d<u){o=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[h]=m,e[m]=f;for(var y=0,b=a;y!==b;++y){var _=i[y],x=_[m],w=_[d];_[d]=x,void 0===w&&(w=new rk(f,n[y],r[y])),_[m]=w}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,f=e[c];t[f.uuid]=l,e[l]=f,t[u]=c,e[c]=s;for(var h=0,d=r;h!==d;++h){var p=n[h],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var f=--i,h=e[f],d=--a,p=e[d];t[h.uuid]=c,e[c]=h,t[p.uuid]=f,e[f]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[f],b=g[d];g[c]=y,g[f]=b,g.pop()}}else{var _=--a,x=e[_];_>0&&(t[x.uuid]=c),e[c]=x,e.pop();for(var w=0,S=r;w!==S;++w){var k=n[w];k[c]=k[_],k.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var f=l,h=s.length;f!==h;++f){var d=s[f];c[f]=new rk(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}(),ak=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;ye(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:Wh,endingEnd:Wh},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Uh,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return _e(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===Yh)for(var c=0,f=u.length;c!==f;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var h=0,d=u.length;h!==d;++h)u[h].evaluate(o),l[h].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===Bh;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===Fh){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=Gh,r.endingEnd=Gh):(r.endingStart=e?this.zeroSlopeAtStart?Gh:Wh:qh,r.endingEnd=t?this.zeroSlopeAtEnd?Gh:Wh:qh)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),ok=new Float32Array(1),sk=function(e){ve(n,e);var t=ge(n);function n(e){var r;return ye(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return _e(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var f=r[c],h=f.name,d=l[h];if(void 0!==d)++d.referenceCount,a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(d=new ZS(rk.create(n,h,p),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(d,s,h),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Tw(new Float32Array(2),new Float32Array(2),1,ok)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?zw.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Xh),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new ak(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?zw.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Dd),uk=function(){function e(t){ye(this,e),"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return _e(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),lk=0,ck=function(e){ve(n,e);var t=ge(n);function n(){var e;return ye(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty(pe(e),"id",{value:lk++}),e.name="",e.usage=Sd,e.uniforms=[],e}return _e(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Dd),fk=function(e){ve(n,e);var t=ge(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return ye(this,n),(i=t.call(this,e,r)).isInstancedInterleavedBuffer=!0,i.meshPerAttribute=a,i}return _e(n,[{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Hu(re(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Hu(re(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(Lb),hk=function(){function e(t,n,r,i,a){ye(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return _e(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),dk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;ye(this,e),this.ray=new tv(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new dv,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return _e(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return vk(e,this,n,t),n.sort(pk),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)vk(e[r],this,n,t);return n.sort(pk),n}}]),e}();function pk(e,t){return e.distance-t.distance}function vk(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r)for(var i=e.children,a=0,o=i.length;a<o;a++)vk(i[a],t,n,!0)}var mk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ye(this,e),this.radius=t,this.phi=n,this.theta=r,this}return _e(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vd(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),gk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ye(this,e),this.radius=t,this.theta=n,this.y=r,this}return _e(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),yk=new Yd,bk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yd(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yd(-1/0,-1/0);ye(this,e),this.isBox2=!0,this.min=t,this.max=n}return _e(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=yk.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return yk.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),_k=new Mp,xk=new Mp,wk=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp;ye(this,e),this.start=t,this.end=n}return _e(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){_k.subVectors(e,this.start),xk.subVectors(this.end,this.start);var n=xk.dot(xk),r=xk.dot(_k)/n;return t&&(r=Vd(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Sk=new Mp,kk=function(e){ve(n,e);var t=ge(n);function n(e,r){var i;ye(this,n),(i=t.call(this)).light=e,i.light.updateMatrixWorld(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.color=r;for(var a=new um,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,u=1;s<32;s++,u++){var l=s/32*Math.PI*2,c=u/32*Math.PI*2;o.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}a.setAttribute("position",new Qv(o,3));var f=new m_({fog:!1,toneMapped:!1});return i.cone=new M_(a,f),i.add(i.cone),i.update(),i}return _e(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Sk.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sk),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Tv),Mk=new Mp,Ek=new nv,Tk=new nv,Ck=function(e){ve(n,e);var t=ge(n);function n(e){var r;ye(this,n);for(var i=Ak(e),a=new um,o=[],s=[],u=new fp(0,0,1),l=new fp(0,1,0),c=0;c<i.length;c++){var f=i[c];f.parent&&f.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}a.setAttribute("position",new Qv(o,3)),a.setAttribute("color",new Qv(s,3));var h=new m_({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,h)).isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return _e(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Tk.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(Ek.multiplyMatrices(Tk,s.matrixWorld),Mk.setFromMatrixPosition(Ek),i.setXYZ(o,Mk.x,Mk.y,Mk.z),Ek.multiplyMatrices(Tk,s.parent.matrixWorld),Mk.setFromMatrixPosition(Ek),i.setXYZ(o+1,Mk.x,Mk.y,Mk.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(M_);function Ak(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,Ak(e.children[n]));return t}var Rk=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;ye(this,n);var o=new ew(r,4,2),s=new Vv({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.light.updateMatrixWorld(),a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return _e(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Em),Pk=new Mp,Lk=new fp,Nk=new fp,Ik=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;ye(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i;var o=new Jx(r);o.rotateY(.5*Math.PI),a.material=new Vv({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),u=new Float32Array(3*s.count);return o.setAttribute("color",new Wv(u,3)),a.add(new Em(o,a.material)),a.update(),a}return _e(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Lk.copy(this.light.color),Nk.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?Lk:Nk;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Pk.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Tv),Dk=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;ye(this,n),a=new fp(a),o=new fp(o);for(var s=i/2,u=r/i,l=r/2,c=[],f=[],h=0,d=0,p=-l;h<=i;h++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var v=h===s?a:o;v.toArray(f,d),d+=3,v.toArray(f,d),d+=3,v.toArray(f,d),d+=3,v.toArray(f,d),d+=3}var m=new um;m.setAttribute("position",new Qv(c,3)),m.setAttribute("color",new Qv(f,3));var g=new m_({vertexColors:!0,toneMapped:!1});return(e=t.call(this,m,g)).type="GridHelper",e}return _e(n)}(M_),Ok=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;ye(this,n),s=new fp(s),u=new fp(u);for(var l=[],c=[],f=0;f<=i;f++){var h=f/i*(2*Math.PI),d=Math.sin(h)*r,p=Math.cos(h)*r;l.push(0,0,0),l.push(d,0,p);var v=1&f?s:u;c.push(v.r,v.g,v.b),c.push(v.r,v.g,v.b)}for(var m=0;m<=a;m++)for(var g=1&m?s:u,y=r-r/a*m,b=0;b<o;b++){var _=b/o*(2*Math.PI),x=Math.sin(_)*y,w=Math.cos(_)*y;l.push(x,0,w),c.push(g.r,g.g,g.b),_=(b+1)/o*(2*Math.PI),x=Math.sin(_)*y,w=Math.cos(_)*y,l.push(x,0,w),c.push(g.r,g.g,g.b)}var S=new um;S.setAttribute("position",new Qv(l,3)),S.setAttribute("color",new Qv(c,3));var k=new m_({vertexColors:!0,toneMapped:!1});return(e=t.call(this,S,k)).type="PolarGridHelper",e}return _e(n)}(M_),zk=new Mp,Fk=new Mp,Uk=new Mp,Bk=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;ye(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,void 0===r&&(r=1);var o=new um;o.setAttribute("position",new Qv([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new m_({fog:!1,toneMapped:!1});return a.lightPlane=new w_(o,s),a.add(a.lightPlane),(o=new um).setAttribute("position",new Qv([0,0,0,0,0,1],3)),a.targetLine=new w_(o,s),a.add(a.targetLine),a.update(),a}return _e(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){zk.setFromMatrixPosition(this.light.matrixWorld),Fk.setFromMatrixPosition(this.light.target.matrixWorld),Uk.subVectors(Fk,zk),this.lightPlane.lookAt(Fk),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fk),this.targetLine.scale.z=Uk.length()}}]),n}(Tv),Vk=new Mp,jk=new Nm,Hk=function(e){ve(n,e);var t=ge(n);function n(e){var r;ye(this,n);var i=new um,a=new m_({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],u={};function l(e,t){c(e),c(t)}function c(e){o.push(0,0,0),s.push(0,0,0),void 0===u[e]&&(u[e]=[]),u[e].push(o.length/3-1)}l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4"),i.setAttribute("position",new Qv(o,3)),i.setAttribute("color",new Qv(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=u,r.update();var f=new fp(16755200),h=new fp(16711680),d=new fp(43775),p=new fp(16777215),v=new fp(3355443);return r.setColors(f,h,d,p,v),r}return _e(n,[{key:"setColors",value:function(e,t,n,r,i){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;jk.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wk("c",t,e,jk,0,0,-1),Wk("t",t,e,jk,0,0,1),Wk("n1",t,e,jk,-1,-1,-1),Wk("n2",t,e,jk,1,-1,-1),Wk("n3",t,e,jk,-1,1,-1),Wk("n4",t,e,jk,1,1,-1),Wk("f1",t,e,jk,-1,-1,1),Wk("f2",t,e,jk,1,-1,1),Wk("f3",t,e,jk,-1,1,1),Wk("f4",t,e,jk,1,1,1),Wk("u1",t,e,jk,.7,1.1,-1),Wk("u2",t,e,jk,-.7,1.1,-1),Wk("u3",t,e,jk,0,2,-1),Wk("cf1",t,e,jk,-1,0,1),Wk("cf2",t,e,jk,1,0,1),Wk("cf3",t,e,jk,0,-1,1),Wk("cf4",t,e,jk,0,1,1),Wk("cn1",t,e,jk,-1,0,-1),Wk("cn2",t,e,jk,1,0,-1),Wk("cn3",t,e,jk,0,-1,-1),Wk("cn4",t,e,jk,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(M_);function Wk(e,t,n,r,i,a,o){Vk.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],Vk.x,Vk.y,Vk.z)}var Gk,qk,Xk=new Cp,Yk=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;ye(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new um;return s.setIndex(new Wv(a,1)),s.setAttribute("position",new Wv(o,3)),(r=t.call(this,s,new m_({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return _e(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Xk.setFromObject(this.object),!Xk.isEmpty()){var t=Xk.min,n=Xk.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return Hu(re(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}}]),n}(M_),Zk=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;ye(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new um;return s.setIndex(new Wv(a,1)),s.setAttribute("position",new Qv(o,3)),(r=t.call(this,s,new m_({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return _e(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(M_),$k=function(e){ve(n,e);var t=ge(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;ye(this,n);var o=a,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new um;u.setAttribute("position",new Qv(s,3)),u.computeBoundingSphere(),(r=t.call(this,u,new m_({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new um;return c.setAttribute("position",new Qv(l,3)),c.computeBoundingSphere(),r.add(new Em(c,new Vv({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return _e(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),Hu(re(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(w_),Jk=new Mp,Kk=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mp(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mp(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return ye(this,n),(e=t.call(this)).type="ArrowHelper",void 0===Gk&&((Gk=new um).setAttribute("position",new Qv([0,0,0,0,1,0],3)),(qk=new lx(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new w_(Gk,new m_({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Em(qk,new Vv({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,u),e}return _e(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Jk.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Jk,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return Hu(re(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(Tv),Qk=function(e){ve(n,e);var t=ge(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;ye(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new um;o.setAttribute("position",new Qv(i,3)),o.setAttribute("color",new Qv(a,3));var s=new m_({vertexColors:!0,toneMapped:!1});return(e=t.call(this,o,s)).type="AxesHelper",e}return _e(n,[{key:"setColors",value:function(e,t,n){var r=new fp,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(M_),eM=function(){function e(){ye(this,e),this.type="ShapePath",this.color=new fp,this.subPaths=[],this.currentPath=null}return _e(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new ax,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new yx;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i,a,o,s=Gx.isClockWise,u=this.subPaths;if(0===u.length)return[];if(!0===t)return n(u);var l=[];if(1===u.length)return a=u[0],(o=new yx).curves=a.curves,l.push(o),l;var c=!s(u[0].getPoints());c=e?!c:c;var f,h,d=[],p=[],v=[],m=0;p[m]=void 0,v[m]=[];for(var g=0,y=u.length;g<y;g++)i=s(f=(a=u[g]).getPoints()),(i=e?!i:i)?(!c&&p[m]&&m++,p[m]={s:new yx,p:f},p[m].s.curves=a.curves,c&&m++,v[m]=[]):v[m].push({h:a,p:f[0]});if(!p[0])return n(u);if(p.length>1){for(var b=!1,_=0,x=0,w=p.length;x<w;x++)d[x]=[];for(var S=0,k=p.length;S<k;S++)for(var M=v[S],E=0;E<M.length;E++){for(var T=M[E],C=!0,A=0;A<p.length;A++)r(T.p,p[A].p)&&(S!==A&&_++,C?(C=!1,d[A].push(T)):b=!0);C&&d[S].push(T)}_>0&&!1===b&&(v=d)}for(var R=0,P=p.length;R<P;R++){o=p[R].s,l.push(o);for(var L=0,N=(h=v[R]).length;L<N;L++)o.holes.push(h[L].h)}return l}}]),e}(),tM=nM();function nM(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),u=new Uint32Array(64),l=new Uint32Array(64),c=1;c<1024;++c){for(var f=c<<13,h=0;0===(8388608&f);)f<<=1,h-=8388608;f&=-8388609,h+=947912704,s[c]=f|h}for(var d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(var p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(var v=33;v<63;++v)u[v]=2147483648+(v-32<<23);u[63]=3347054592;for(var m=1;m<64;++m)32!==m&&(l[m]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:l}}var rM=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Vd(e,-65504,65504),tM.floatView[0]=e;var t=tM.uint32View[0],n=t>>23&511;return tM.baseTable[n]+((8388607&t)>>tM.shiftTable[n])},fromHalfFloat:function(e){var t=e>>10;return tM.uint32View[0]=tM.mantissaTable[tM.offsetTable[t]+(1023&e)]+tM.exponentTable[t],tM.floatView[0]}}),iM=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),t.call(this)}return _e(n)}(um),aM=function(e){ve(n,e);var t=ge(n);function n(){return ye(this,n),console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),t.call(this)}return _e(n)}(um);function oM(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function sM(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function uM(){console.error("THREE.ImmediateRenderObject has been removed.")}var lM=function(e){ve(n,e);var t=ge(n);function n(e,r,i){var a;return ye(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(a=t.call(this,e,r,i)).samples=4,a}return _e(n)}(yp),cM=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){return ye(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,r,i,a)}return _e(n)}(bp),fM=function(e){ve(n,e);var t=ge(n);function n(e,r,i,a){return ye(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,r,i,a)}return _e(n)}(xp);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:wc}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=wc);var hM,dM,pM=function(e){console.log("--useObjectsOnClient");var t=Fu(mc),n=Bu(dc),r=(0,i.useCallback)((function(t){if(e.current)for(var n=e.current.length-1;n>-1;n--){var r=e.current[n],i=r&&t.data[r.id];i&&(r.score=i.uScore,r.controlsUp+=i.uControlsUp||0,r.controlsDown+=i.uControlsDown||0,r.controlsLeft+=i.uControlsLeft||0,r.controlsUp+=i.uControlsUp||0,r.rotationSpeed=i.uRotationSpeed||0,r.speed=i.uSpeed||0,r.backendPosition.set(i.uPositionX,i.uPositionY,i.uPositionZ),r.backendQuaternion.set(i.uQuaternionX,i.uQuaternionY,i.uQuaternionZ,i.uQuaternionW))}}),[e]),a=(0,i.useCallback)((function(t){for(var r=!1,i=(e.current||[]).length-1;i>-1;i--){var a,o=(e.current||[])[i],s=o&&t.data[o.id];if(s)o.username=s.sUsername;else r=!0,null===(a=e.current)||void 0===a||a.splice(i,1)}if(Object.values(t.data).forEach((function(t){e.current&&(e.current.some((function(e){return e.id===t.sId}))||(r=!0,e.current.push({id:t.sId,player:t.sPlayer,username:t.sUsername,score:t.sScore,controlsUp:0,controlsDown:0,controlsLeft:0,controlsRight:0,controlsOverChannelsUp:0,controlsOverChannelsDown:0,controlsOverChannelsLeft:0,controlsOverChannelsRight:0,rotationSpeed:t.sRotationSpeed,speed:t.sSpeed,backendPosition:new Mp(t.sPositionX,t.sPositionY,t.sPositionZ),backendQuaternion:new kp(t.sQuaternionX,t.sQuaternionY,t.sQuaternionZ,t.sQuaternionW),keyDowns:[],infoElement:void 0,infoBoxElement:void 0,object3D:void 0})))})),r){var u=Object.keys(t.data);n(u)}}),[e,n]);return{handleUpdateData:r,handleStateData:a,handleQuitForObjectsOnClient:(0,i.useCallback)((function(){var r;t||(null===(r=e.current)||void 0===r||r.splice(0,e.current.length),n([]))}),[e,n,t])}},vM=n(4569),mM=n.n(vM),gM=function(){var e=ne(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--getGameObject"),e.prev=1,e.next=4,mM().get("".concat(uc,"/api/v1/gameObject/").concat(t));case 4:return n=e.sent,e.abrupt("return",{data:n.data});case 8:return e.prev=8,e.t0=e.catch(1),i=null!==(r=e.t0.response)&&void 0!==r&&r.data?e.t0.response.data.error:e.t0.toString(),console.error("gameobject fetch error:",i),e.abrupt("return",{error:i});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),yM=function(){var e=ne(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--savePlayerData"),e.prev=1,e.next=4,mM().post("".concat(uc,"/api/v1/gameObject/saveGameState"),t);case 4:return n=e.sent,e.abrupt("return",{data:n.data,error:null});case 8:return e.prev=8,e.t0=e.catch(1),i=null!==(r=e.t0.response)&&void 0!==r&&r.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{data:null,error:i});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();!function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right"}(hM||(hM={})),function(e){e[e.CHATMESSAGE_CLIENT=0]="CHATMESSAGE_CLIENT",e[e.CHATMESSAGE_MAIN=1]="CHATMESSAGE_MAIN",e[e.CONTROLS=2]="CONTROLS",e[e.UPDATE=3]="UPDATE",e[e.STATE=4]="STATE"}(dM||(dM={}));var bM=function(){var e=ne(le().mark((function e(t,n){var r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n,e.next=3,Promise.all(t.map(function(){var e=ne(le().mark((function e(t){var n,i,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gM(t);case 2:(n=e.sent.data)?(i=de(de({},n),{},{id:t,controlsUp:0,controlsDown:0,controlsLeft:0,controlsRight:0,controlsOverChannelsUp:0,controlsOverChannelsDown:0,controlsOverChannelsLeft:0,controlsOverChannelsRight:0,rotationSpeed:1,speed:.3,backendPosition:new Mp,backendQuaternion:new kp,keyDowns:[],infoElement:void 0,infoBoxElement:void 0,object3D:void 0}),a=r.findIndex((function(e){return e.id===t})),-1!==a?r[a]=i:r.push(i)):console.error("Failed to add new object, no initialGameObject");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",r.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_M=function(){var e=ne(le().mark((function e(t){var n;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reduce((function(e,t){return t.player&&e.push({remoteId:t.id,score:t.score}),e}),[])||[],e.next=3,yM(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xM=function(e,t){e({type:dM.STATE,data:t.reduce((function(e,t){var n,r,i,a,o,s,u;return e[t.id]={sId:t.id,sPlayer:t.player,sUsername:t.username,sScore:t.score,sRotationSpeed:t.rotationSpeed,sSpeed:t.speed,sPositionX:(null===(n=t.object3D)||void 0===n?void 0:n.position.x)||0,sPositionY:(null===(r=t.object3D)||void 0===r?void 0:r.position.y)||0,sPositionZ:(null===(i=t.object3D)||void 0===i?void 0:i.position.z)||0,sQuaternionX:(null===(a=t.object3D)||void 0===a?void 0:a.quaternion.x)||0,sQuaternionY:(null===(o=t.object3D)||void 0===o?void 0:o.quaternion.y)||0,sQuaternionZ:(null===(s=t.object3D)||void 0===s?void 0:s.quaternion.z)||0,sQuaternionW:(null===(u=t.object3D)||void 0===u?void 0:u.quaternion.w)||0},e}),{})})},wM=function(e){console.log("--useObjectsOnMain");var t=Fu(mc),n=Bu(dc),r=DM().sendOrdered,a=(0,i.useCallback)(function(){var t=ne(le().mark((function t(i){var a;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.current||e.current.some((function(e){return e.id===i}))){t.next=6;break}return t.next=3,bM([i],e.current);case 3:a=t.sent,n(a),xM(r,e.current);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,n,r]),o=(0,i.useCallback)(function(){var i=ne(le().mark((function i(a){var o;return le().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(console.log("--handleNewIdsOnMain main objectsRef newIds:",t,e,a),!t||!e.current){i.next=7;break}return i.next=4,bM(a,e.current);case 4:o=i.sent,n(o),xM(r,e.current);case 7:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),[e,n,t,r]),s=(0,i.useCallback)((function(i){if(t&&e.current){console.log("--remove ids:",i);var a=function(e,t){var n=t;_M(n);for(var r=n.length-1;r>-1;r--)e.includes(n[r].id)&&n.splice(r,1);return n.map((function(e){return e.id}))}(i,e.current);n(a),xM(r,e.current)}}),[e,n,t,r]);(0,i.useEffect)((function(){var n=0,i=0;return t&&(n=window.setInterval((function(){e.current&&xM(r,e.current)}),1e4),i=window.setInterval((function(){e.current&&_M(e.current)}),1e5)),function(){clearInterval(n),clearInterval(i)}}),[t,e,r]);var u=(0,i.useCallback)(ne(le().mark((function r(){return le().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t||!e.current){r.next=4;break}return r.next=3,_M(e.current);case 3:e.current.splice(0,e.current.length);case 4:n([]);case 5:case"end":return r.stop()}}),r)}))),[e,n,t]),l=(0,i.useCallback)((function(t,n){var r,i=null===(r=e.current)||void 0===r?void 0:r.find((function(e){return e.id===n}));i&&(i.controlsUp+=t.data.up||0,i.controlsDown+=t.data.down||0,i.controlsLeft+=t.data.left||0,i.controlsRight+=t.data.right||0,i.controlsOverChannelsUp+=t.data.up||0,i.controlsOverChannelsDown+=t.data.down||0,i.controlsOverChannelsLeft+=t.data.left||0,i.controlsOverChannelsRight+=t.data.right||0)}),[e]);return{handlePossiblyNewIdOnMain:a,handleNewIdsOnMain:o,handleRemoveIdsOnMain:s,handleQuitForObjectsOnMain:u,handleReceiveControlsData:l}},SM=function(e,t,n){var r;console.log("--handlePressed");var i=null===(r=n.current)||void 0===r?void 0:r.find((function(e){return e.id===t}));t&&i&&!i.keyDowns.includes(e)&&i.keyDowns.push(e)},kM=function(e,t,n){var r;console.log("--handleReleased");var i=null===(r=n.current)||void 0===r?void 0:r.find((function(e){return e.id===t}));if(t&&i){var a=i.keyDowns.findIndex((function(t){return t===e}));-1!==a&&i.keyDowns.splice(a,1)}},MM=function(e){switch(e){case"ArrowUp":return hM.UP;case"ArrowDown":return hM.DOWN;case"ArrowLeft":return hM.LEFT;case"ArrowRight":return hM.RIGHT;default:return null}},EM={},TM=function(e){console.log("--useConnections");var t=Fu(xc),n=Bu(vc),r=pM(e).handleQuitForObjectsOnClient,a=LM(e),o=a.onReceiveMain,s=a.handleQuitOnMain,u=function(){console.log("---useSignaler");var e=Fu(_c),t=Bu(bc),n=c(Uu(xc),2),r=n[0],a=n[1];console.log("--backendUrl:",uc);var o=(0,i.useCallback)((function(){console.log("--connectToSignaler, auth.token:",null===e||void 0===e?void 0:e.token);var t=oc(uc,{auth:{token:"".concat(null===e||void 0===e?void 0:e.token)}});a(t)}),[null===e||void 0===e?void 0:e.token,a]),s=(0,i.useCallback)((function(e,n,i,a,o){null===r||void 0===r||r.on("connect_error",(function(e){console.error(e)})),null===r||void 0===r||r.on("connect",(function(){t("signaling socket connected"),console.log("CONNECT signaling socket connected")})),null===r||void 0===r||r.on("disconnect",(function(){t("signaling socket disconnected"),console.log("signaling socket disconnected")})),null===r||void 0===r||r.on("nomain",(function(){t("game host disconnected, no other available hosts found, please try again later"),console.log("game host disconnected")})),null===r||void 0===r||r.on("fail",(function(e){console.log("signaling socket fail, reason:",e)})),null===r||void 0===r||r.on("init",(function(t){e(t),console.log("own id:",t)})),null===r||void 0===r||r.on("signaling",(function(e){var t=e.id,r=e.description,i=e.candidate;n({remoteId:t,description:r,candidate:i})})),null===r||void 0===r||r.on("connectToMain",(function(e){i(e)})),null===r||void 0===r||r.on("main",(function(e){a(e),console.log("you are main")})),null===r||void 0===r||r.on("peerDisconnected",(function(e){o(e),t("peer ".concat(e," disconnected")),console.log("peer",e,"disconnected")}))}),[t,r]),u=(0,i.useCallback)((function(){null===r||void 0===r||r.off("connect_error"),null===r||void 0===r||r.off("connect"),null===r||void 0===r||r.off("disconnect"),null===r||void 0===r||r.off("nomain"),null===r||void 0===r||r.off("fail"),null===r||void 0===r||r.off("init"),null===r||void 0===r||r.off("signaling"),null===r||void 0===r||r.off("connectToMain"),null===r||void 0===r||r.off("main"),null===r||void 0===r||r.off("peerDisconnected")}),[r]),l=(0,i.useCallback)((function(){u(),null===r||void 0===r||r.disconnect()}),[u,r]),f=(0,i.useCallback)((function(e){var t=e.remoteId,n=e.description,i=e.candidate;null===r||void 0===r||r.emit("signaling",{remoteId:t,candidate:i,description:n})}),[r]);return{connectToSignaler:o,disconnectFromSignaler:l,registerListeners:s,unregisterListeners:u,sendSignaling:f}}(),l=u.connectToSignaler,f=u.disconnectFromSignaler,h=u.registerListeners,d=u.unregisterListeners,p=u.sendSignaling,v=CM(e),m=(0,i.useCallback)((function(e){n(e)}),[n]),g=(0,i.useCallback)((function(e){console.log("--on receive connect to main",e),EM[e]=v(e,p)}),[v,p]),y=(0,i.useCallback)(function(){var e=ne(le().mark((function e(t){var n,r,i,a,o,s;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.remoteId,r=t.description,i=t.candidate,console.log("--onreceive signaling:",EM[n]),a=EM[n]||v(n,p),o=a.peerConnection,s=a.handleSignaling,EM[n]||(EM[n]={peerConnection:o,handleSignaling:s}),s(r,i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,p]),b=(0,i.useCallback)((function(e){var t;null===(t=EM[e])||void 0===t||t.peerConnection.close(),delete EM[e]}),[]);(0,i.useEffect)((function(){console.log("CONNECT TO PEER CHANGE")}),[v]),(0,i.useEffect)((function(){return h(m,y,g,o,b),function(){return d()}}),[d,h,m,y,g,o,b,t]);var _=(0,i.useCallback)((function(){l()}),[l]),x=(0,i.useCallback)(ne(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.next=3,s();case 3:Object.values(EM).forEach((function(e){return e.peerConnection.close()})),f(),Object.keys(EM).forEach((function(e){delete EM[e]})),n(void 0);case 8:case"end":return e.stop()}}),e)}))),[f,r,s,n]);return{connect:_,disconnect:x}},CM=function(e){console.log("--usePeerConnection");var t=Fu(mc),n=Bu(bc),r=Bu(gc),a=Bu(yc),o=AM(),s=(console.log("--useChannelOrdered"),(0,i.useCallback)((function(e,t,n,r,i){var a=t.createDataChannel("orderedChannel",{ordered:!0,negotiated:!0,id:1});a.onclose=function(){console.log("--channelOrdered onclose"),i(e,a)},a.onopen=function(){console.log("--channelOrdered onopen"),r(e,a)},a.onmessage=function(t){var r=t.data;console.log("--channelOrdered onmessage"),n(JSON.parse(r),e)}}),[])),u=(console.log("--useChannelUnordered"),(0,i.useCallback)((function(e,t,n,r,i){var a=t.createDataChannel("unorderedChannel",{ordered:!1,negotiated:!0,id:0});return a.onclose=function(){console.log("--channelUnordered onclose"),i(e,a)},a.onopen=function(){console.log("--channelUnordered onopen"),r(e,a)},a.onmessage=function(t){var r=t.data;console.log("--channgeUnordered onmessage"),n(JSON.parse(r),e)},a}),[])),l=PM(e).onReceive,c=RM(e).onReceive,f=(0,i.useCallback)((function(e,t){console.log("--onChannelOrderedOpen setChannelsOrdered:",e,t),r((function(n){return[].concat(Q(n),[{remoteId:e,channel:t}])}))}),[r]),h=(0,i.useCallback)((function(e){r((function(t){return t.filter((function(t){return t.remoteId!==e}))}))}),[r]),d=(0,i.useCallback)((function(e,t){console.log("--onChannelUnorderedOpen setChannelsUnordered:",e,t),a((function(n){return[].concat(Q(n),[{remoteId:e,channel:t}])}))}),[a]),p=(0,i.useCallback)((function(e){a((function(t){return t.filter((function(t){return t.remoteId!==e}))}))}),[a]);return(0,i.useCallback)((function(e,r){console.log("--connect to peer",e),console.log("--main:",t),n("connecting with peer ".concat(e)),console.log("peer",e,"connecting");var i=o(e,r),a=i.peerConnection,v=i.handleSignaling;return t?(console.log("--connectToPeer yes main"),s(e,a,l,f,h),u(e,a,l,d,p)):(console.log("--connectToPeer not main yes client"),s(e,a,c,f,h),u(e,a,c,d,p)),{peerConnection:a,handleSignaling:v}}),[t,n,o,s,u,l,c,f,h,d,p])},AM=function(){console.log("--useRTCPeerConnection");var e=Bu(bc),t=UM().iceServers,n=(0,i.useCallback)((function(n,r){console.log("--createRTCPeerConnection, iceServers:",t);var i=new RTCPeerConnection({iceServers:t,iceTransportPolicy:"relay"});i.onconnectionstatechange=function(){switch(i.connectionState){case"failed":e("peer ".concat(n,", connection failed")),console.log("peer",n,"peer connection failed");break;case"connected":e("peer ".concat(n,", connection ready")),console.log("peer",n,"peer connection ready");break;case"closed":e("peer ".concat(n,", connection closed")),console.log("peer",n,"peer connection closed")}},i.onicecandidate=function(e){var t=e.candidate;console.log("--onicecandidate sendSignaling"),r({remoteId:n,candidate:t})},i.onnegotiationneeded=ne(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--onnegotiationneeded"),e.prev=1,console.log("--setLocalDescription, sendSignaling"),e.next=5,i.setLocalDescription();case 5:r({remoteId:n,description:i.localDescription}),console.log("--setLocalDescription, sendSignaling done"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));var a=function(){var e=ne(le().mark((function e(t,a){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=13;break}return console.log("--setRemoteDescription"),e.next=5,i.setRemoteDescription(t);case 5:if("offer"!==t.type){e.next=11;break}return console.log("--onOffer, setLocalDescription, sendSignaling"),e.next=9,i.setLocalDescription();case 9:r({remoteId:n,description:i.localDescription}),console.log("--onOffer, done");case 11:e.next=17;break;case 13:if(!a){e.next=17;break}return console.log("--onCandidate, addIceCandidate"),e.next=17,i.addIceCandidate(a);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,n){return e.apply(this,arguments)}}();return{peerConnection:i,handleSignaling:a}}),[e,t]);return n},RM=function(e){console.log("--useReceiveOnClient");var t=c(Uu(hc),2),n=t[0],r=t[1],i=pM(e),a=i.handleUpdateData,o=i.handleStateData;return{onReceive:function(t){switch(console.log("--CLIENT on receive:",t),t.type){case dM.STATE:o(t);break;case dM.UPDATE:a(t);break;case dM.CHATMESSAGE_MAIN:var i,s=de(de({},t),{},{username:(null===(i=(e.current||[]).find((function(e){return e.id===t.userId})))||void 0===i?void 0:i.username)||""});r([s].concat(Q(n))),setTimeout((function(){return r((function(e){return e.filter((function(e){return e!==s}))}))}),6e4)}}}},PM=function(e){console.log("--useReceiveOnMain");var t=DM().sendOrdered,n=Bu(hc),r=wM(e).handleReceiveControlsData;return{onReceive:function(i,a){switch(i.type){case dM.CONTROLS:r(i,a);break;case dM.CHATMESSAGE_CLIENT:var o,s,u={message:i.message,userId:a,messageId:a+Date.now().toString(),username:(null===(o=e.current)||void 0===o||null===(s=o.find((function(e){return e.id===a})))||void 0===s?void 0:s.username)||""};t(de(de({},u),{},{type:dM.CHATMESSAGE_MAIN})),n((function(e){return[u].concat(Q(e))})),setTimeout((function(){return n((function(e){return e.filter((function(e){return e!==u}))}))}),6e4)}}}},LM=function(e){console.log("--useMain");var t=Fu(gc),n=Fu(yc),r=c(Uu(mc),2),a=r[0],o=r[1],s=c(Uu(pc),2),u=s[0],l=s[1],f=wM(e),h=f.handlePossiblyNewIdOnMain,d=f.handleNewIdsOnMain,p=f.handleRemoveIdsOnMain,v=f.handleQuitForObjectsOnMain,m=(0,i.useCallback)((function(){var e=t.reduce((function(e,t){return n.some((function(e){return e.remoteId===t.remoteId}))&&e.push(t.remoteId),e}),[]),r=e.reduce((function(e,t){return u.includes(t)||e.push(t),e}),[]),i=u.reduce((function(t,n){return e.includes(n)||t.push(n),t}),[]);console.log("--onChannelsChanged actual new ordered unordered",e,r,t,n),(r.length||i.length)&&(l(e),p(i),d(r))}),[t,n,u,l,p,d]);(0,i.useEffect)((function(){console.log("--useEffect channelsOrdered:",t),a&&m()}),[a,t,n,m]);var g=(0,i.useCallback)((function(e){console.log("--onReceiveMain"),o(!0),h(e)}),[o,h]),y=(0,i.useCallback)(ne(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--HANDLE QUIT ON MAIN"),e.next=3,v();case 3:o(!1);case 4:case"end":return e.stop()}}),e)}))),[v,o]);return{onReceiveMain:g,handleQuitOnMain:y}},NM=function(e,t){"Failed to execute 'send' on 'RTCDataChannel': RTCDataChannel.readyState is not 'open'"===e.message?console.log("Failed to send on data channel. This is expected if player disconnected."):console.error("Error:",e.message,"Data:",t)},IM=function(){console.log("--useSendFromClient");var e=Fu(gc),t=Fu(yc),n=(0,i.useCallback)((function(t){var n=JSON.stringify(t);e.forEach((function(e){try{e.channel.send(n)}catch(r){NM(r,t)}}))}),[e]),r=(0,i.useCallback)((function(e){var n=JSON.stringify(e);t.forEach((function(t){try{t.channel.send(n)}catch(r){NM(r,e)}}))}),[t]);return{sendOrdered:n,sendUnordered:r}},DM=function(){console.log("--useSendFromMain");var e=Fu(gc),t=Fu(yc),n=(0,i.useCallback)((function(t){console.log("--MAIN send ordered:",t);var n=JSON.stringify(t);e.forEach((function(e){try{e.channel.send(n)}catch(r){NM(r,t)}}))}),[e]),r=(0,i.useCallback)((function(e){var n=JSON.stringify(e);t.forEach((function(t){try{t.channel.send(n)}catch(r){NM(r,e)}}))}),[t]);return{sendOrdered:n,sendUnordered:r}},OM=function(){var e=ne(le().mark((function e(){var t,n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--checkOkToStart"),e.prev=1,e.next=4,mM().get(" ".concat(uc,"/api/v1/user/checkOkToStart"));case 4:return t=e.sent,e.abrupt("return",{data:t.data,error:null});case 8:return e.prev=8,e.t0=e.catch(1),r=null!==(n=e.t0.response)&&void 0!==n&&n.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{data:null,error:r});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),zM=function(){var e=ne(le().mark((function e(){var t,n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--getUser"),e.prev=1,e.next=4,mM().get("".concat(uc,"/api/v1/user"));case 4:return t=e.sent,e.abrupt("return",{data:t.data,error:null});case 8:return e.prev=8,e.t0=e.catch(1),r=null!==(n=e.t0.response)&&void 0!==n&&n.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{data:null,error:r});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),FM=function(){var e=ne(le().mark((function e(t){var n,r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--updateUsername"),e.prev=1,e.next=4,mM().post("".concat(uc,"/api/v1/user/updateUsername"),{username:t});case 4:return n=e.sent,e.abrupt("return",{data:n.data,error:null});case 8:return e.prev=8,e.t0=e.catch(1),i=null!==(r=e.t0.response)&&void 0!==r&&r.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{data:null,error:i});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),UM=function(){var e=Fu(lc),t=(0,i.useMemo)((function(){return e?[e]:[]}),[e]);return console.log("--turn credentials:",e,t),{iceServers:t}};function BM(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var VM=n(4585);function jM(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var HM="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;var WM=n(258),GM=n.n(WM),qM=n(4545);function XM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}var YM=[];function ZM(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=ce(YM);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(XM(t,o.keys,o.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!r)throw o.promise}}}catch(ZR){a.e(ZR)}finally{a.f()}var s={keys:t,equal:i.equal,promise:e.apply(void 0,Q(t)).then((function(e){return s.response=e})).then((function(){i.lifespan&&i.lifespan>0&&setTimeout((function(){var e=YM.indexOf(s);-1!==e&&YM.splice(e,1)}),i.lifespan)})).catch((function(e){return s.error=e}))};if(YM.push(s),!r)throw s.promise}var $M,JM,KM=["children","key","ref"],QM=["children","key","ref"],eE=["args","attach"],tE=["args","children"],nE=["args","children"],rE=["params"],iE=function(e){return e&&e.isOrthographicCamera},aE="undefined"!==typeof window&&(null!=($M=window.document)&&$M.createElement||"ReactNative"===(null==(JM=window.navigator)?void 0:JM.product))?i.useLayoutEffect:i.useEffect;function oE(e){var t=i.useRef(e);return aE((function(){t.current=e}),[e]),t}function sE(e){var t=e.set;return aE((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var uE=function(e){ve(n,e);var t=ge(n);function n(){var e;ye(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:!1},e}return _e(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(i.Component);uE.getDerivedStateFromError=function(){return{error:!0}};var lE="__default";function cE(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}var fE=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},hE={obj:function(e){return e===Object(e)&&!hE.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.arrays,i=void 0===r?"shallow":r,a=n.objects,o=void 0===a?"reference":a,s=n.strict,u=void 0===s||s;if(typeof e!==typeof t||!!e!==!!t)return!1;if(hE.str(e)||hE.num(e))return e===t;var l=hE.obj(e);if(l&&"reference"===o)return e===t;var c,f=hE.arr(e);if(f&&"reference"===i)return e===t;if((f||l)&&e===t)return!0;for(c in e)if(!(c in t))return!1;for(c in u?t:e)if(e[c]!==t[c])return!1;if(hE.und(c)){if(f&&0===e.length&&0===t.length)return!0;if(l&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function dE(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function pE(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=de({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function vE(e,t){var n=e;if(t.includes("-")){var r=t.split("-"),i=r.pop();return n=r.reduce((function(e,t){return e[t]}),e),{target:n,key:i}}return{target:n,key:t}}var mE=/-\d+$/;function gE(e,t,n){if(hE.str(n)){if(mE.test(n)){var r=vE(e,n.replace(mE,"")),i=r.target,a=r.key;Array.isArray(i[a])||(i[a]=[])}var o=vE(e,n),s=o.target,u=o.key;t.__r3f.previousAttach=s[u],s[u]=t}else t.__r3f.previousAttach=n(e,t)}function yE(e,t,n){var r,i;if(hE.str(n)){var a=vE(e,n),o=a.target,s=a.key,u=t.__r3f.previousAttach;void 0===u?delete o[s]:o[s]=u}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function bE(e,t){t.children,t.key,t.ref;var n,r=ee(t,KM),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(i.children,i.key,i.ref,ee(i,QM)),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null!=(n=null==e?void 0:e.__r3f)?n:{},u=Object.entries(r),l=[];if(o)for(var f=Object.keys(a),h=0;h<f.length;h++)r.hasOwnProperty(f[h])||u.unshift([f[h],lE+"remove"]);u.forEach((function(t){var n,r=c(t,2),i=r[0],o=r[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==i)&&!hE.equ(o,a[i])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(i))return l.push([i,o,!0,[]]);var s=[];i.includes("-")&&(s=i.split("-")),l.push([i,o,!1,s])}}));var d=de({},r);return s.memoizedProps&&s.memoizedProps.args&&(d.args=s.memoizedProps.args),s.memoizedProps&&s.memoizedProps.attach&&(d.attach=s.memoizedProps.attach),{memoized:d,changes:l}}function _E(e,t){var n,r,i,a=null!=(n=e.__r3f)?n:{},s=a.root,f=null!=(r=null==s||null==s.getState?void 0:s.getState())?r:{},h=(i=t)&&i.memoized&&i.changes?t:bE(e,t),d=h.memoized,p=h.changes,v=a.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=d),p.forEach((function(t){var n,r,i=c(t,4),s=i[0],h=i[1],p=i[2],v=i[3],m=e,g=m[s];if(v.length&&(g=v.reduce((function(e,t){return e[t]}),e),!g||!g.set)){var y=v.reverse(),b=o(n=y)||K(n)||u(n)||l(),_=b[0];m=b.slice(1).reverse().reduce((function(e,t){return e[t]}),e),s=_}if(h===lE+"remove")if(g&&g.constructor)h=oe(g.constructor,Q(null!=(r=d.args)?r:[]));else if(m.constructor){var x,w=oe(m.constructor,Q(null!=(x=m.__r3f.memoizedProps.args)?x:[]));h=w[g],w.dispose&&w.dispose()}else h=0;if(p)h?a.handlers[s]=h:delete a.handlers[s],a.eventCount=Object.keys(a.handlers).length;else if(g&&g.set&&(g.copy||g instanceof dv)){var S;if(Array.isArray(h))g.fromArray?g.fromArray(h):(S=g).set.apply(S,Q(h));else if(g.copy&&h&&h.constructor&&g.constructor.name===h.constructor.name)g.copy(h);else if(void 0!==h){var k=g instanceof fp;!k&&g.setScalar?g.setScalar(h):g instanceof dv&&h instanceof dv?g.mask=h.mask:g.set(h);0}}else m[s]=h,!f.linear&&m[s]instanceof mp&&(m[s].encoding=Qh);xE(e)})),a.parent&&f.internal&&e.raycast&&v!==a.eventCount){var m=f.internal.interaction.indexOf(e);m>-1&&f.internal.interaction.splice(m,1),a.eventCount&&f.internal.interaction.push(e)}return p.length&&e.parent&&wE(e),e}function xE(e){var t,n,r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function wE(e){null==e.onUpdate||e.onUpdate(e)}function SE(e,t){e.manual||(iE(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function kE(e,t,n){var r=n.pop(),i=n.reduce((function(e,t){return e[t]}),e);return i[r]=t}function ME(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function EE(e,t,n,r){var i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function TE(e){var t=new Mp;function n(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function r(t){var n=e.getState().internal;Array.from(n.hovered.values()).forEach((function(e){if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(ME(e)),null!=r&&r.eventCount){var a=de(de({},e),{},{intersections:t});null==i.onPointerOut||i.onPointerOut(a),null==i.onPointerLeave||i.onPointerLeave(a)}}}))}function i(e,t){t.forEach((function(t){var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:function(a){switch(a){case"onPointerLeave":case"onPointerCancel":return function(){return r([])};case"onLostPointerCapture":return function(t){var n=e.getState().internal;"pointerId"in t&&!n.capturedMap.has(t.pointerId)&&(n.capturedMap.delete(t.pointerId),r([]))}}return function(o){var s=e.getState(),u=s.onPointerMissed,l=s.internal;l.lastEvent.current=o;var c="onPointerMove"===a,f="onClick"===a||"onContextMenu"===a||"onDoubleClick"===a,h=function(t,n){var r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;o.forEach((function(e){var t=fE(e);t&&(t.raycaster.camera=void 0)})),r.previousRoot||null==r.events.compute||r.events.compute(t,r);var s=o.flatMap((function(e){var n,r=fE(e);return r&&r.events.enabled&&null!==r.raycaster.camera?(void 0===r.raycaster.camera&&(null==r.events.compute||r.events.compute(t,r,null==(n=r.previousRoot)?void 0:n.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)),r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=fE(e.object),r=fE(t.object);return n&&r?r.events.priority-n.events.priority||e.distance-t.distance:0})).filter((function(e){var t=ME(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));var u,l=ce(s);try{for(l.s();!(u=l.n()).done;)for(var c=u.value,f=c.object;f;){var h;null!=(h=f.__r3f)&&h.eventCount&&a.push(de(de({},c),{},{eventObject:f})),f=f.parent}}catch(ZR){l.e(ZR)}finally{l.f()}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId)){var d,p=ce(r.internal.capturedMap.get(t.pointerId).values());try{for(p.s();!(d=p.n()).done;){var v=d.value;a.push(v.intersection)}}catch(ZR){p.e(ZR)}finally{p.f()}}return a}(o,c?n:void 0),d=f?function(t){var n=e.getState().internal,r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===a&&(l.initialClick=[o.offsetX,o.offsetY],l.initialHits=h.map((function(e){return e.eventObject}))),f&&!h.length&&d<=2&&(i(o,l.interaction),u&&u(o)),c&&r(h),function(n,i,a,o){var s=e.getState(),u=s.raycaster,l=s.pointer,c=s.camera,f=s.internal;n.length&&function(){var e,s=t.set(l.x,l.y,0).unproject(c),h={stopped:!1},d=ce(n);try{var p=function(){var t=e.value,d=function(e){var n,r;return null!=(n=null==(r=f.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},p=function(e){var n={intersection:t,target:i.target};f.capturedMap.has(e)?f.capturedMap.get(e).set(t.eventObject,n):f.capturedMap.set(e,new Map([[t.eventObject,n]])),i.target.setPointerCapture(e)},v=function(e){var n=f.capturedMap.get(e);n&&EE(f.capturedMap,t.eventObject,n,e)},m={};for(var g in i){var y=i[g];"function"!==typeof y&&(m[g]=y)}var b=de(de(de({},t),m),{},{pointer:l,intersections:n,stopped:h.stopped,delta:a,unprojectedPoint:s,ray:u.ray,camera:c,stopPropagation:function(){var e="pointerId"in i&&f.capturedMap.get(i.pointerId);if((!e||e.has(t.eventObject))&&(b.stopped=h.stopped=!0,f.hovered.size&&Array.from(f.hovered.values()).find((function(e){return e.eventObject===t.eventObject})))){var a=n.slice(0,n.indexOf(t));r([].concat(Q(a),[t]))}},target:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:v},currentTarget:{hasPointerCapture:d,setPointerCapture:p,releasePointerCapture:v},nativeEvent:i});if(o(b),!0===h.stopped)return"break"};for(d.s();!(e=d.n()).done&&"break"!==p(););}catch(ZR){d.e(ZR)}finally{d.f()}}()}(h,o,d,(function(e){var t=e.eventObject,n=t.__r3f,r=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(c){if(r.onPointerOver||r.onPointerEnter||r.onPointerOut||r.onPointerLeave){var s=ME(e),u=l.hovered.get(s);u?u.stopped&&e.stopPropagation():(l.hovered.set(s,e),null==r.onPointerOver||r.onPointerOver(e),null==r.onPointerEnter||r.onPointerEnter(e))}null==r.onPointerMove||r.onPointerMove(e)}else{var h=r[a];h?f&&!l.initialHits.includes(t)||(i(o,l.interaction.filter((function(e){return!l.initialHits.includes(e)}))),h(e)):f&&l.initialHits.includes(t)&&i(o,l.interaction.filter((function(e){return!l.initialHits.includes(e)})))}}))}}}}var CE={};var AE,RE=function(e){return!(null==e||!e.render)},PE=i.createContext(null);var LE,NE,IE=new Set,DE=new Set,OE=new Set;function zE(e,t){e.forEach((function(e){return(0,e.callback)(t)}))}function FE(e,t,n){var r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),LE=t.internal.subscribers,AE=0;AE<LE.length;AE++)(NE=LE[AE]).ref.current(NE.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function UE(){var e=i.useContext(PE);if(!e)throw"R3F hooks can only be used within the Canvas component!";return e}function BE(e,t){return function(n){var r=new n;e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,i){return r.load(e,(function(e){e.scene&&Object.assign(e,dE(e.scene)),n(e)}),t,(function(t){return i("Could not load ".concat(e,": ").concat(t.message))}))}))})))}}function VE(e,t,n,r){var i=Array.isArray(t)?t:[t],a=function(e,t,n){return ZM(e,t,!1,n)}(BE(n,r),[e].concat(Q(i)),{equal:hE.equ});return Array.isArray(t)?a:a[0]}VE.preload=function(e,t,n){var r=Array.isArray(t)?t:[t];return function(e,t,n){ZM(e,t,!0,n)}(BE(n),[e].concat(Q(r)))},VE.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)YM.splice(0,YM.length);else{var t=YM.find((function(t){return XM(e,t.keys,t.equal)}));if(t){var n=YM.indexOf(t);-1!==n&&YM.splice(n,1)}}}([e].concat(Q(n)))};var jE=new Map,HE=function(e){var t,n,r,i=!1;function a(o){if(n=requestAnimationFrame(a),i=!0,t=0,IE.size&&zE(IE,o),e.forEach((function(e){var n;!(r=e.store.getState()).internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(n=r.gl.xr)&&n.isPresenting||(t+=FE(o,r))})),DE.size&&zE(DE,o),0===t)return OE.size&&zE(OE,o),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),o);null!=(r=n.gl.xr)&&r.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+o),i||(i=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;n&&zE(IE,t),r?FE(t,r,i):e.forEach((function(e){return FE(t,e.store.getState())})),n&&zE(DE,t)}}}(jE),WE=HE.invalidate,GE=HE.advance,qE=function(e,t){function n(e,t,n){var r,i=t.args,a=void 0===i?[]:i,o=t.attach,s=ee(t,eE),u="".concat(e[0].toUpperCase()).concat(e.slice(1));if(void 0===o&&(u.endsWith("Geometry")?o="geometry":u.endsWith("Material")&&(o="material")),"primitive"===e){if(void 0===s.object)throw"Primitives without 'object' are invalid!";r=pE(s.object,{type:e,root:n,attach:o,primitive:!0})}else{var l=CE[u];if(!l)throw"".concat(u," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively");if(!Array.isArray(a))throw"The args prop must be an array!";r=pE(oe(l,Q(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return"inject"!==u&&_E(r,s),r}function r(e,t){var n,r,i=!1;t&&(null!=(n=t.__r3f)&&n.attach?gE(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),i=!0),i||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||pE(t,{}),t.__r3f.parent=e,wE(t),xE(t))}function i(e,t,n){var r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)gE(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var o=e.children.filter((function(e){return e!==t})),s=o.indexOf(n);e.children=[].concat(Q(o.slice(0,s)),[t],Q(o.slice(s))),r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||pE(t,{}),t.__r3f.parent=e,wE(t),xE(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&Q(e).forEach((function(e){return o(t,e,n)}))}function o(e,t,n){if(t){var r,i,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(i=t.__r3f)&&i.attach)yE(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,r){e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach((function(e,r){EE(n.capturedMap,t,e,r)}))}(t.__r3f.root,t)}var u,l=null==(o=t.__r3f)?void 0:o.primitive,c=void 0===n?null!==t.dispose&&!l:n;if(!l)a(null==(u=t.__r3f)?void 0:u.objects,t,c),a(t.children,t,c);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,l||delete t.__r3f),c&&t.dispose&&"Scene"!==t.type&&(0,qM.unstable_scheduleCallback)(qM.unstable_IdlePriority,(function(){try{t.dispose()}catch(e){}})),xE(e)}}var s=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")},u=GM()({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f.root=e,r(n,t)}},removeChildFromContainer:function(e,t){t&&o(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){t&&n&&i(e.getState().scene,t,n)},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,r){if(e.__r3f.primitive&&r.object&&r.object!==e)return[!0];var i=r.args,a=void 0===i?[]:i,o=(r.children,ee(r,tE)),s=n.args,u=void 0===s?[]:s,l=(n.children,ee(n,nE));if(!Array.isArray(a))throw"The args prop must be an array!";if(a.some((function(e,t){return e!==u[t]})))return[!0];var c=bE(e,o,l,!0);return c.changes.length?[!1,c]:null},commitUpdate:function(e,t,i,a,s,u){var l=c(t,2),f=l[0],h=l[1];f?function(e,t,i,a){var s,u=null==(s=e.__r3f)?void 0:s.parent;if(u){var l=n(t,i,e.__r3f.root);"primitive"!==t&&e.children&&(e.children.forEach((function(e){return r(l,e)})),e.children=[]),e.__r3f.objects.forEach((function(e){return r(l,e)})),e.__r3f.objects=[],o(u,e),r(u,l),l.raycast&&l.__r3f.eventCount&&l.__r3f.root.getState().internal.interaction.push(l),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=l,e.ref&&("function"===typeof e.ref?e.ref(l):e.ref.current=l))}))}}(e,i,s,u):_E(e,h)},commitMount:function(e,t,n,r){var i,a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return pE(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{},r=n.attach,i=n.parent;r&&i&&yE(i,e,r),e.isObject3D&&(e.visible=!1),xE(e)},unhideInstance:function(e,t){var n,r=null!=(n=null==e?void 0:e.__r3f)?n:{},i=r.attach,a=r.parent;i&&a&&gE(a,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),xE(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:function(){return t?t():VM.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&hE.fun(performance.now)?performance.now:hE.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:hE.fun(setTimeout)?setTimeout:void 0,cancelTimeout:hE.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:u,applyProps:_E}}(0,(function(){var e,t;switch(null==(e=window)||null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return VM.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return VM.ContinuousEventPriority;default:return VM.DefaultEventPriority}})),XE=qE.reconciler,YE=qE.applyProps,ZE={objects:"shallow",strict:!1},$E=function(e,t){var n="function"===typeof e?e(t):e;return RE(n)?n:new Eb(de({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function JE(e){var n=jE.get(e),r=null==n?void 0:n.fiber,a=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var o,s="function"===typeof reportError?reportError:console.error,u=a||function(e,t){var n=function(e){var t="function"===typeof e?jM(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=c((0,i.useReducer)((function(e){return e+1}),0),2)[1],o=t.getState(),s=(0,i.useRef)(o),u=(0,i.useRef)(n),l=(0,i.useRef)(r),f=(0,i.useRef)(!1),h=(0,i.useRef)();void 0===h.current&&(h.current=n(o));var d=!1;(s.current!==o||u.current!==n||l.current!==r||f.current)&&(e=n(o),d=!r(h.current,e)),HM((function(){d&&(h.current=e),s.current=o,u.current=n,l.current=r,f.current=!1}));var p=(0,i.useRef)(o);HM((function(){var e=function(){try{var e=t.getState(),n=u.current(e);l.current(h.current,n)||(s.current=e,h.current=n,a())}catch(r){f.current=!0,a()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]);var v=d?e:h.current;return(0,i.useDebugValue)(v),v};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}((function(n,r){var a=new Mp,o=new Mp,s=new Mp;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size,i=n.width,u=n.height,l=n.top,c=n.left,f=i/u;t instanceof Mp?s.copy(t):s.set.apply(s,Q(t));var h=e.getWorldPosition(a).distanceTo(s);if(iE(e))return{width:i/e.zoom,height:u/e.zoom,top:l,left:c,factor:1,distance:h,aspect:f};var d=e.fov*Math.PI/180,p=2*Math.tan(d/2)*h,v=p*(i/u);return{width:v,height:p,top:l,left:c,factor:i/v,distance:h,aspect:f}}var l=void 0,c=function(e){return n((function(t){return{performance:de(de({},t.performance),{},{current:e})}}))},f=new Yd,h={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:function(e,n){return t(e,n,r())},legacy:!1,linear:!1,flat:!1,scene:pE(new Pb),controls:null,clock:new DS,pointer:f,mouse:f,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=r();l&&clearTimeout(l),e.performance.current!==e.performance.min&&c(e.performance.min),l=setTimeout((function(){return c(r().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:function(e){return n((function(t){return de(de({},t),{},{events:de(de({},t.events),e)})}))},setSize:function(e,t,i,a,s){var l=r().camera,c={width:e,height:t,top:a||0,left:s||0,updateStyle:i};n((function(e){return{size:c,viewport:de(de({},e.viewport),u(l,o,c))}}))},setDpr:function(e){return n((function(t){var n=cE(e);return{viewport:de(de({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return h})),r=n.getState(),a=r.size,o=r.viewport.dpr,s=r.camera;return n.subscribe((function(){var e=n.getState(),t=e.camera,r=e.size,i=e.viewport,u=e.gl,l=e.set;r===a&&i.dpr===o||(a=r,o=i.dpr,SE(t,r),u.setPixelRatio(i.dpr),u.setSize(r.width,r.height,r.updateStyle)),t!==s&&(s=t,l((function(e){return{viewport:de(de({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),n.subscribe((function(t){return e(t)})),n}(WE,GE),l=r||XE.createContainer(u,VM.ConcurrentRoot,null,!1,null,"",s,null);n||jE.set(e,{fiber:l,store:u});var f=!1;return{configure:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.gl,i=n.size,a=n.events,s=n.onCreated,l=n.shadows,c=void 0!==l&&l,h=n.linear,d=void 0!==h&&h,p=n.flat,v=void 0!==p&&p,m=n.legacy,g=void 0!==m&&m,y=n.orthographic,b=void 0!==y&&y,_=n.frameloop,x=void 0===_?"always":_,w=n.dpr,S=void 0===w?[1,2]:w,k=n.performance,M=n.raycaster,E=n.camera,T=n.onPointerMissed,C=u.getState(),A=C.gl;C.gl||C.set({gl:A=$E(r,e)});var R=C.raycaster;R||C.set({raycaster:R=new dk});var P=M||{},L=P.params,N=ee(P,rE);if(hE.equ(N,R,ZE)||YE(R,de({},N)),hE.equ(L,R.params,ZE)||YE(R,{params:de(de({},R.params),L)}),!C.camera){var I=E instanceof Nm,D=I?E:b?new ig(0,0,0,0,.1,1e3):new Im(75,0,.1,1e3);I||(D.position.z=5,E&&YE(D,E),null!=E&&E.rotation||D.lookAt(0,0,0)),C.set({camera:D})}if(!C.xr){var O=function(e,t){var n=u.getState();"never"!==n.frameloop&&GE(e,!0,n,t)},z=function(){var e=u.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?O:null),e.gl.xr.isPresenting||WE(e)},F={connect:function(){var e=u.getState().gl;e.xr.addEventListener("sessionstart",z),e.xr.addEventListener("sessionend",z)},disconnect:function(){var e=u.getState().gl;e.xr.removeEventListener("sessionstart",z),e.xr.removeEventListener("sessionend",z)}};A.xr&&F.connect(),C.set({xr:F})}if(A.shadowMap){var U=hE.boo(c);if(U&&A.shadowMap.enabled!==c||!hE.equ(c,A.shadowMap,ZE)){var B=A.shadowMap.enabled;A.shadowMap.enabled=!!c,U?A.shadowMap.type=Pc:Object.assign(A.shadowMap,c),B!==A.shadowMap.enabled&&(A.shadowMap.needsUpdate=!0)}}kE(t,g,["ColorManagement","legacyMode"]);var V=d?Kh:Qh,j=v?yf:wf;return A.outputEncoding!==V&&(A.outputEncoding=V),A.toneMapping!==j&&(A.toneMapping=j),C.legacy!==g&&C.set((function(){return{legacy:g}})),C.linear!==d&&C.set((function(){return{linear:d}})),C.flat!==v&&C.set((function(){return{flat:v}})),!r||hE.fun(r)||RE(r)||hE.equ(r,A,ZE)||YE(A,r),a&&!C.events.handlers&&C.set({events:a(u)}),S&&C.viewport.dpr!==cE(S)&&C.setDpr(S),i=i||(e.parentElement?{width:e.parentElement.clientWidth,height:e.parentElement.clientHeight,top:e.parentElement.clientTop,left:e.parentElement.clientLeft}:{width:0,height:0,top:0,left:0}),hE.equ(i,C.size,ZE)||C.setSize(i.width,i.height,i.updateStyle,i.top,i.left),C.frameloop!==x&&C.setFrameloop(x),C.onPointerMissed||C.set({onPointerMissed:T}),k&&!hE.equ(k,C.performance,ZE)&&C.set((function(e){return{performance:de(de({},e.performance),k)}})),o=s,f=!0,this},render:function(t){return f||this.configure(),XE.updateContainer(i.createElement(KE,{store:u,children:t,onCreated:o,rootElement:e}),l,null,(function(){})),u},unmount:function(){QE(e)}}}function KE(e){var t=e.store,n=e.children,r=e.onCreated,a=e.rootElement;return aE((function(){var e=t.getState();e.set((function(e){return{internal:de(de({},e.internal),{},{active:!0})}})),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),i.createElement(PE.Provider,{value:t},n)}function QE(e,t){var n=jE.get(e),r=null==n?void 0:n.fiber;if(r){var i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),XE.updateContainer(null,r,null,(function(){i&&setTimeout((function(){try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),jE.delete(e),t&&t(e)}catch(s){}}),500)}))}}XE.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;var eT=n(7494),tT=n.n(eT);function nT(e){var t=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,n=t.debounce,r=t.scroll,a=t.polyfill,o=t.offsetSize,s=a||("undefined"===typeof window?_e((function e(){ye(this,e)})):window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var u=c((0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),l=u[0],f=u[1],h=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l}),d=n?"number"===typeof n?n:n.scroll:null,p=n?"number"===typeof n?n:n.resize:null,v=(0,i.useRef)(!1);(0,i.useEffect)((function(){return v.current=!0,function(){v.current=!1}}));var m=c((0,i.useMemo)((function(){var e=function(){if(h.current.element){var e=h.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};h.current.element instanceof HTMLElement&&o&&(t.height=h.current.element.offsetHeight,t.width=h.current.element.offsetWidth),Object.freeze(t),v.current&&!aT(h.current.lastBounds,t)&&f(h.current.lastBounds=t)}};return[e,p?tT()(e,p):e,d?tT()(e,d):e]}),[f,o,d,p]),3),g=m[0],y=m[1],b=m[2];function _(){h.current.scrollContainers&&(h.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",b,!0)})),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null)}function x(){h.current.element&&(h.current.resizeObserver=new s(b),h.current.resizeObserver.observe(h.current.element),r&&h.current.scrollContainers&&h.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",b,{capture:!0,passive:!0})})))}var w,S,k;return w=b,S=Boolean(r),(0,i.useEffect)((function(){if(S){var e=w;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",e,!0)}}}),[w,S]),k=y,(0,i.useEffect)((function(){var e=k;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[k]),(0,i.useEffect)((function(){_(),x()}),[r,b,y]),(0,i.useEffect)((function(){return _}),[]),[function(e){e&&e!==h.current.element&&(_(),h.current.element=e,h.current.scrollContainers=rT(e),x())},l,g]}function rT(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,Q(rT(e.parentElement)))}var iT=["x","y","top","bottom","left","right","width","height"],aT=function(e,t){return iT.every((function(n){return e[n]===t[n]}))},oT=["children","fallback","resize","style","gl","events","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],sT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function uT(e){var t=TE(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(sT).reduce((function(e,n){return de(de({},e),{},fe({},n,t(n)))}),{}),connect:function(t){var n,r=e.getState(),i=r.set,a=r.events;null==a.disconnect||a.disconnect(),i((function(e){return{events:de(de({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=c(e,2),r=n[0],i=n[1],a=c(sT[r],2),o=a[0],s=a[1];t.addEventListener(o,i,{passive:s})}))},disconnect:function(){var t,n=e.getState(),r=n.set,i=n.events;i.connected&&(Object.entries(null!=(t=i.handlers)?t:[]).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];if(i&&i.connected instanceof HTMLElement){var a=c(sT[n],1)[0];i.connected.removeEventListener(a,r)}})),r((function(e){return{events:de(de({},e.events),{},{connected:void 0})}})))}}}var lT=i.forwardRef((function(e,n){var r=e.children,a=e.fallback,o=e.resize,s=e.style,u=e.gl,l=e.events,h=void 0===l?uT:l,d=e.shadows,p=e.linear,v=e.flat,m=e.legacy,g=e.orthographic,y=e.frameloop,b=e.dpr,_=e.performance,x=e.raycaster,w=e.camera,S=e.onPointerMissed,k=e.onCreated,M=ee(e,oT);i.useMemo((function(){return e=t,void(CE=de(de({},CE),e));var e}),[]);var E=c(nT(de({scroll:!0,debounce:{scroll:50,resize:0}},o)),2),T=E[0],C=E[1],A=i.useRef(null),R=i.useRef(null),P=c(i.useState(null),2),L=P[0],N=P[1];i.useImperativeHandle(n,(function(){return A.current}));var I=oE(S),D=c(i.useState(!1),2),O=D[0],z=D[1],F=c(i.useState(!1),2),U=F[0],B=F[1];if(O)throw O;if(U)throw U;var V=i.useRef(null);return C.width>0&&C.height>0&&L&&(V.current||(V.current=JE(L)),V.current.configure({gl:u,events:h,shadows:d,linear:p,flat:v,legacy:m,orthographic:g,frameloop:y,dpr:b,performance:_,raycaster:x,camera:w,size:C,onPointerMissed:function(){return null==I.current?void 0:I.current.apply(I,arguments)},onCreated:function(e){null==e.events.connect||e.events.connect(R.current),null==k||k(e)}}),V.current.render(i.createElement(uE,{set:B},i.createElement(i.Suspense,{fallback:i.createElement(sE,{set:z})},r)))),aE((function(){N(A.current)}),[]),i.useEffect((function(){if(L)return function(){return QE(L)}}),[L]),i.createElement("div",f({ref:R,style:de({position:"relative",width:"100%",height:"100%",overflow:"hidden"},s)},M),i.createElement("div",{ref:T,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:A,style:{display:"block"}},a)))})),cT=n(7441),fT=n(9613),hT=n.n(fT);var dT=function(e){function t(e,r,u,l,h){for(var d,p,v,m,_,w=0,S=0,k=0,M=0,E=0,L=0,I=v=d=0,O=0,z=0,F=0,U=0,B=u.length,V=B-1,j="",H="",W="",G="";O<B;){if(p=u.charCodeAt(O),O===V&&0!==S+M+k+w&&(0!==S&&(p=47===S?10:47),M=k=w=0,B++,V++),0===S+M+k+w){if(O===V&&(0<z&&(j=j.replace(f,"")),0<j.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:j+=u.charAt(O)}p=59}switch(p){case 123:for(d=(j=j.trim()).charCodeAt(0),v=1,U=++O;O<B;){switch(p=u.charCodeAt(O)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(O+1)){case 42:case 47:e:{for(I=O+1;I<V;++I)switch(u.charCodeAt(I)){case 47:if(42===p&&42===u.charCodeAt(I-1)&&O+2!==I){O=I+1;break e}break;case 10:if(47===p){O=I+1;break e}}O=I}}break;case 91:p++;case 40:p++;case 34:case 39:for(;O++<V&&u.charCodeAt(O)!==p;);}if(0===v)break;O++}if(v=u.substring(U,O),0===d&&(d=(j=j.replace(c,"").trim()).charCodeAt(0)),64===d){switch(0<z&&(j=j.replace(f,"")),p=j.charCodeAt(1)){case 100:case 109:case 115:case 45:z=r;break;default:z=P}if(U=(v=t(r,z,v,p,h+1)).length,0<N&&(_=s(3,v,z=n(P,j,F),r,C,T,U,p,h,l),j=z.join(""),void 0!==_&&0===(U=(v=_.trim()).length)&&(p=0,v="")),0<U)switch(p){case 115:j=j.replace(x,o);case 100:case 109:case 45:v=j+"{"+v+"}";break;case 107:v=(j=j.replace(g,"$1 $2"))+"{"+v+"}",v=1===R||2===R&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=j+v,112===l&&(H+=v,v="")}else v=""}else v=t(r,n(r,j,F),v,l,h+1);W+=v,v=F=z=I=d=0,j="",p=u.charCodeAt(++O);break;case 125:case 59:if(1<(U=(j=(0<z?j.replace(f,""):j).trim()).length))switch(0===I&&(d=j.charCodeAt(0),45===d||96<d&&123>d)&&(U=(j=j.replace(" ",":")).length),0<N&&void 0!==(_=s(1,j,r,e,C,T,H.length,l,h,l))&&0===(U=(j=_.trim()).length)&&(j="\0\0"),d=j.charCodeAt(0),p=j.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){G+=j+u.charAt(O);break}default:58!==j.charCodeAt(U-1)&&(H+=i(j,d,p,j.charCodeAt(2)))}F=z=I=d=0,j="",p=u.charCodeAt(++O)}}switch(p){case 13:case 10:47===S?S=0:0===1+d&&107!==l&&0<j.length&&(z=1,j+="\0"),0<N*D&&s(0,j,r,e,C,T,H.length,l,h,l),T=1,C++;break;case 59:case 125:if(0===S+M+k+w){T++;break}default:switch(T++,m=u.charAt(O),p){case 9:case 32:if(0===M+w+S)switch(E){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===M+S+w&&(z=F=1,m="\f"+m);break;case 108:if(0===M+S+w+A&&0<I)switch(O-I){case 2:112===E&&58===u.charCodeAt(O-3)&&(A=E);case 8:111===L&&(A=L)}break;case 58:0===M+S+w&&(I=O);break;case 44:0===S+k+M+w&&(z=1,m+="\r");break;case 34:case 39:0===S&&(M=M===p?0:0===M?p:M);break;case 91:0===M+S+k&&w++;break;case 93:0===M+S+k&&w--;break;case 41:0===M+S+w&&k--;break;case 40:if(0===M+S+w){if(0===d)if(2*E+3*L===533);else d=1;k++}break;case 64:0===S+k+M+w+I+v&&(v=1);break;case 42:case 47:if(!(0<M+w+k))switch(S){case 0:switch(2*p+3*u.charCodeAt(O+1)){case 235:S=47;break;case 220:U=O,S=42}break;case 42:47===p&&42===E&&U+2!==O&&(33===u.charCodeAt(U+2)&&(H+=u.substring(U,O+1)),m="",S=0)}}0===S&&(j+=m)}L=E,E=p,O++}if(0<(U=H.length)){if(z=r,0<N&&(void 0!==(_=s(2,H,z,e,C,T,U,l,h,l))&&0===(H=_).length))return G+H+W;if(H=z.join(",")+"{"+H+"}",0!==R*A){switch(2!==R||a(H,2)||(A=0),A){case 111:H=H.replace(b,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}A=0}}return G+H+W}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<a;++s)for(var l=0;l<o;++l)t[u++]=r(e[l]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===R||2===R&&a(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(E,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(_,"tb");break;case 232:u=o.replace(_,"tb-rl");break;case 220:u=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===M.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),I(2!==t?r:r.replace(k,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,u,c){for(var f,h=0,d=t;h<N;++h)switch(f=L[h].call(l,e,d,n,r,i,a,o,s,u,c)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(I=null,e?"function"!==typeof e?R=1:(R=2,I=e):R=0),u}function l(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<N){var i=s(-1,n,r,r,C,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(P,r,n,0,0);return 0<N&&(void 0!==(i=s(-2,a,r,r,C,T,a.length,0,0,0))&&(a=i)),"",A=0,T=C=1,a}var c=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,S=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,M=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,T=1,C=1,A=0,R=1,P=[],L=[],N=0,I=null,D=0;return l.use=function e(t){switch(t){case void 0:case null:N=L.length=0;break;default:if("function"===typeof t)L[N++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},l.set=u,void 0!==e&&u(e),l},pT={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var vT=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},mT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,gT=vT((function(e){return mT.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),yT=n(2110),bT=n.n(yT);function _T(){return(_T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var xT=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},wT=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,cT.typeOf)(e)},ST=Object.freeze([]),kT=Object.freeze({});function MT(e){return"function"==typeof e}function ET(e){return e.displayName||e.name||"Component"}function TT(e){return e&&"string"==typeof e.styledComponentId}var CT="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.SC_ATTR)||"data-styled",AT="undefined"!=typeof window&&"HTMLElement"in window,RT=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BACKEND_DEV:"localhost:3001",REACT_APP_BACKEND:"peliback.kimmolepola.com"}.SC_DISABLE_SPEEDY));function PT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var LT=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&PT(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),NT=new Map,IT=new Map,DT=1,OT=function(e){if(NT.has(e))return NT.get(e);for(;IT.has(DT);)DT++;var t=DT++;return NT.set(e,t),IT.set(t,e),t},zT=function(e){return IT.get(e)},FT=function(e,t){t>=DT&&(DT=t+1),NT.set(e,t),IT.set(t,e)},UT="style["+CT+'][data-styled-version="5.3.5"]',BT=new RegExp("^"+CT+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),VT=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},jT=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(BT);if(s){var u=0|parseInt(s[1],10),l=s[2];0!==u&&(FT(l,u),VT(e,l,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},HT=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},WT=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(CT))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(CT,"active"),r.setAttribute("data-styled-version","5.3.5");var o=HT();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},GT=function(){function e(e){var t=this.element=WT(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}PT(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),qT=function(){function e(e){var t=this.element=WT(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),XT=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),YT=AT,ZT={isServer:!AT,useCSSOMInjection:!RT},$T=function(){function e(e,t,n){void 0===e&&(e=kT),void 0===t&&(t={}),this.options=_T({},ZT,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&AT&&YT&&(YT=!1,function(e){for(var t=document.querySelectorAll(UT),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(CT)&&(jT(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return OT(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(_T({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new XT(i):r?new GT(i):new qT(i),new LT(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(OT(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(OT(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(OT(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=zT(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var u=CT+".g"+i+'[id="'+a+'"]',l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+=e+",")})),r+=""+s+u+'{content:"'+l+'"}/*!sc*/\n'}}}return r}(this)},e}(),JT=/(a)(d)/gi,KT=function(e){return String.fromCharCode(e+(e>25?39:97))};function QT(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=KT(t%52)+n;return(KT(t%52)+n).replace(JT,"$1-$2")}var eC=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},tC=function(e){return eC(5381,e)};function nC(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(MT(n)&&!TT(n))return!1}return!0}var rC=tC("5.3.5"),iC=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&nC(e),this.componentId=t,this.baseHash=eC(rC,t),this.baseStyle=n,$T.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=wC(this.rules,e,t,n).join(""),o=QT(eC(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,l=eC(this.baseHash,n.hash),c="",f=0;f<u;f++){var h=this.rules[f];if("string"==typeof h)c+=h;else if(h){var d=wC(h,e,t,n),p=Array.isArray(d)?d.join(""):d;l=eC(l,p+f),c+=p}}if(c){var v=QT(l>>>0);if(!t.hasNameForId(r,v)){var m=n(c,"."+v,void 0,r);t.insertRules(r,v,m)}i.push(v)}}return i.join(" ")},e}(),aC=/^\s*\/\/.*$/gm,oC=[":","[",".","#"];function sC(e){var t,n,r,i,a=void 0===e?kT:e,o=a.options,s=void 0===o?kT:o,u=a.plugins,l=void 0===u?ST:u,c=new dT(s),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,u,l,c,f){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==oC.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var u=e.replace(aC,""),l=a&&o?o+" "+a+" { "+u+" }":u;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(o||!a?"":a,l)}return c.use([].concat(l,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=l.length?l.reduce((function(e,t){return t.name||PT(15),eC(e,t.name)}),5381).toString():"",p}var uC=i.createContext(),lC=(uC.Consumer,i.createContext()),cC=(lC.Consumer,new $T),fC=sC();function hC(){return(0,i.useContext)(uC)||cC}function dC(){return(0,i.useContext)(lC)||fC}function pC(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],a=hC(),o=(0,i.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,i.useMemo)((function(){return sC({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){hT()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(uC.Provider,{value:o},i.createElement(lC.Provider,{value:s},e.children))}var vC=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=fC);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return PT(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=fC),this.name+e.hash},e}(),mC=/([A-Z])/,gC=/([A-Z])/g,yC=/^ms-/,bC=function(e){return"-"+e.toLowerCase()};function _C(e){return mC.test(e)?e.replace(gC,bC).replace(yC,"-ms-"):e}var xC=function(e){return null==e||!1===e||""===e};function wC(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=wC(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return xC(e)?"":TT(e)?"."+e.styledComponentId:MT(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:wC(e(t),t,n,r):e instanceof vC?n?(e.inject(n,r),e.getName(r)):e:wT(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!xC(t[o])&&(Array.isArray(t[o])&&t[o].isCss||MT(t[o])?a.push(_C(o)+":",t[o],";"):wT(t[o])?a.push.apply(a,e(t[o],o)):a.push(_C(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in pT?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var SC=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function kC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return MT(e)||wT(e)?SC(wC(xT(ST,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:SC(wC(xT(e,n)))}new Set;var MC=function(e,t,n){return void 0===n&&(n=kT),e.theme!==n.theme&&e.theme||t||n.theme},EC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,TC=/(^-|-$)/g;function CC(e){return e.replace(EC,"-").replace(TC,"")}var AC=function(e){return QT(tC(e)>>>0)};function RC(e){return"string"==typeof e&&!0}var PC=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},LC=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function NC(e,t,n){var r=e[n];PC(t)&&PC(r)?IC(r,t):e[n]=t}function IC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(PC(o))for(var s in o)LC(s)&&NC(e,o[s],s)}return e}var DC=i.createContext();DC.Consumer;var OC={};function zC(e,t,n){var r=TT(e),a=!RC(e),o=t.attrs,s=void 0===o?ST:o,u=t.componentId,l=void 0===u?function(e,t){var n="string"!=typeof e?"sc":CC(e);OC[n]=(OC[n]||0)+1;var r=n+"-"+AC("5.3.5"+n+OC[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,c=t.displayName,f=void 0===c?function(e){return RC(e)?"styled."+e:"Styled("+ET(e)+")"}(e):c,h=t.displayName&&t.componentId?CC(t.displayName)+"-"+t.componentId:t.componentId||l,d=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,m=new iC(n,h,r?e.componentStyle:void 0),g=m.isStatic&&0===s.length,y=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,l=e.shouldForwardProp,c=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=kT);var r=_T({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in MT(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(MC(t,(0,i.useContext)(DC),s)||kT,t,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=hC(),a=dC();return t?e.generateAndInjectStyles(kT,i,a):e.generateAndInjectStyles(n,i,a)}(o,r,d),m=n,g=p.$as||t.$as||p.as||t.as||f,y=RC(g),b=p!==t?_T({},t,{},p):t,_={};for(var x in b)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?_.as=b[x]:(l?l(x,gT,g):!y||gT(x))&&(_[x]=b[x]));return t.style&&p.style!==t.style&&(_.style=_T({},t.style,{},p.style)),_.className=Array.prototype.concat(u,c,v!==c?v:null,t.className,p.className).filter(Boolean).join(" "),_.ref=m,(0,i.createElement)(g,_)}(v,e,t,g)};return y.displayName=f,(v=i.forwardRef(y)).attrs=d,v.componentStyle=m,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):ST,v.styledComponentId=h,v.target=r?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(RC(e)?e:CC(ET(e)));return zC(e,_T({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?IC({},e.defaultProps,t):t}}),v.toString=function(){return"."+v.styledComponentId},a&&bT()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var FC=function(e){return function e(t,n,r){if(void 0===r&&(r=kT),!(0,cT.isValidElementType)(n))return PT(1,String(n));var i=function(){return t(n,r,kC.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,_T({},r,{},i))},i.attrs=function(i){return e(t,n,_T({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(zC,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){FC[e]=FC(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=nC(e),$T.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(wC(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&$T.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=HT();return"<style "+[n&&'nonce="'+n+'"',CT+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?PT(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return PT(2);var n=((t={})[CT]="",t["data-styled-version"]="5.3.5",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=HT();return r&&(n.nonce=r),[i.createElement("style",_T({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new $T({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?PT(2):i.createElement(pC,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return PT(3)}}();var UC,BC,VC,jC,HC,WC,GC,qC,XC,YC,ZC,$C,JC,KC,QC,eA,tA,nA,rA,iA,aA,oA,sA,uA,lA=FC,cA=n(847),fA=n.n(cA),hA=n(184),dA=function(e,t){var n,r=t,i=ce(r.keyDowns);try{for(i.s();!(n=i.n()).done;){switch(n.value){case hM.UP:r.controlsUp+=e,r.controlsOverChannelsUp+=e;break;case hM.DOWN:r.controlsDown+=e,r.controlsOverChannelsDown+=e;break;case hM.LEFT:r.controlsLeft+=e,r.controlsOverChannelsLeft+=e;break;case hM.RIGHT:r.controlsRight+=e,r.controlsOverChannelsRight+=e}}}catch(ZR){i.e(ZR)}finally{i.f()}},pA=function(e,t,n){var r,i,a=e;a.position.x=(null===(r=t.object3D)||void 0===r?void 0:r.position.x)||0,a.position.y=(null===(i=t.object3D)||void 0===i?void 0:i.position.y)||0,a.rotation.z=n.rotation.z,a.translateY(2)},vA=function(e,t){var n=e;if(n.infoBoxElement){var r=Math.round(-t.rotation.z*(180/Math.PI)),i=r<0?r+360:r;n.infoBoxElement.textContent="x: ".concat(t.position.x.toFixed(0),"\n    y: ").concat(t.position.y.toFixed(0),"\n    z: ").concat(t.position.z.toFixed(0),"\n    heading: ").concat(i,"\n    speed: ").concat(e.speed.toFixed(1))}},mA=function(e,t,n){var r=t,i=e>1?r.controlsUp:e*r.controlsUp,a=e>1?r.controlsDown:e*r.controlsDown,o=e>1?r.controlsLeft:e*r.controlsLeft,s=e>1?r.controlsRight:e*r.controlsRight;r.speed+=i,r.speed>10&&(r.speed=10),r.speed-=a,r.speed<.3&&(r.speed=.3),n.rotateZ(r.rotationSpeed*o),n.rotateZ(-1*r.rotationSpeed*s),r.controlsUp-=i,r.controlsDown-=a,r.controlsLeft-=o,r.controlsRight-=s,n.translateY(r.speed*e)},gA=function(e,t){var n,r,i,a,o,s,u;e[t.id]={uScore:t.score,uControlsUp:t.controlsOverChannelsUp,uControlsDown:t.controlsOverChannelsDown,uControlsLeft:t.controlsOverChannelsLeft,uControlsRight:t.controlsOverChannelsRight,uRotationSpeed:t.rotationSpeed,uSpeed:t.speed,uPositionX:(null===(n=t.object3D)||void 0===n?void 0:n.position.x)||0,uPositionY:(null===(r=t.object3D)||void 0===r?void 0:r.position.y)||0,uPositionZ:(null===(i=t.object3D)||void 0===i?void 0:i.position.z)||0,uQuaternionX:(null===(a=t.object3D)||void 0===a?void 0:a.quaternion.x)||0,uQuaternionY:(null===(o=t.object3D)||void 0===o?void 0:o.quaternion.y)||0,uQuaternionZ:(null===(s=t.object3D)||void 0===s?void 0:s.quaternion.z)||0,uQuaternionW:(null===(u=t.object3D)||void 0===u?void 0:u.quaternion.w)||0}},yA=function(e){var t=e;t.controlsOverChannelsUp=0,t.controlsOverChannelsDown=0,t.controlsOverChannelsLeft=0,t.controlsOverChannelsRight=0},bA=function(e,t,n,r,i,a){var o=e;o.infoElement&&(o.infoElement.textContent=o.username,t.copy(i.position),t.project(a),o.infoElement.style.top="calc(".concat(n*-t.y+n,"px + 10%)"),o.infoElement.style.left="".concat(r*t.x+r,"px"))},_A=function(e){return{up:e.controlsOverChannelsUp,down:e.controlsOverChannelsDown,left:e.controlsOverChannelsLeft,right:e.controlsOverChannelsRight}},xA=function(e,t){t.position.lerp(e.backendPosition,.05),t.quaternion.slerp(e.backendQuaternion,.05)},wA=function(e){var t=e.objectsRef;console.log("--Loop");var n=Fu(mc),r=Fu(vc),i=Bu(cc),a=IM().sendUnordered,o=DM().sendUnordered,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return UE()(e,t)}(),u=s.size,l=s.camera,c=new Mp,f=u.height/2,h=u.width/2,d=Date.now(),p=Date.now();return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=UE(),r=n.getState().internal.subscribe,i=oE(e);aE((function(){return r(i,t,n)}),[t,r,n])}((function(e,s){if(n){for(var u={},v=(t.current||[]).length-1;v>-1;v--){var m,g=null===(m=t.current)||void 0===m?void 0:m[v];g&&g.object3D&&(g.id===r&&(dA(s,g),pA(l,g,g.object3D),vA(g,g.object3D)),mA(s,g,g.object3D),Date.now()>d&&(gA(u,g),yA(g)),bA(g,c,f,h,g.object3D,l),Date.now()>p&&(p=Date.now()+9875,g.score+=1,i(g.score)))}Date.now()>d&&(d=Date.now()+1360,o({type:dM.UPDATE,data:u}))}else for(var y=(t.current||[]).length-1;y>-1;y--){var b,_=null===(b=t.current)||void 0===b?void 0:b[y];_&&_.object3D&&(_.id===r&&(dA(s,_),pA(l,_,_.object3D),vA(_,_.object3D),Date.now()>d&&(d=Date.now()+1350,a({type:dM.CONTROLS,data:_A(_)}),yA(_))),mA(s,_,_.object3D),xA(_,_.object3D),bA(_,c,f,h,_.object3D,l))}})),(0,hA.jsx)(hA.Fragment,{})},SA=(0,i.memo)(wA),kA=function(e){var t,n=e.id,r=e.map,a=e.objectsRef;console.log("--GameObject");var o=Fu(vc),s=null===(t=a.current)||void 0===t?void 0:t.find((function(e){return e.id===n})),u=(0,i.useMemo)((function(){return o===n?"orange":void 0}),[o,n]),l=(0,i.useMemo)((function(){return{width:Math.min(1,r.image.width/r.image.height),height:Math.min(1,r.image.height/r.image.width),depth:1}}),[r]);return s?(0,hA.jsxs)("mesh",{ref:function(e){s.object3D=e},children:[(0,hA.jsx)("meshBasicMaterial",{attach:"material-4",color:u,transparent:!0,map:r}),(0,hA.jsx)("boxGeometry",{args:[l.width,l.height,l.depth]})]}):(0,hA.jsx)(hA.Fragment,{})},MA=(0,i.memo)(kA),EA=function(e){var t=e.map;console.log("--Background");var n=t;return n.wrapS=Lf,n.wrapT=Lf,n.repeat.set(120,120),(0,hA.jsxs)("mesh",{children:[(0,hA.jsx)("planeGeometry",{args:[n.image.width,n.image.height]}),(0,hA.jsx)("meshBasicMaterial",{color:"#e5e4e2",map:n})]})},TA=(0,i.memo)(EA),CA=function(e){var t=e.objectsRef;console.log("--Container (game/components/Canvas/Objects");var n=Fu(dc),r=c(VE(Kw,["fighter.png","image1.jpeg"]),2),i=r[0],a=r[1];return(0,hA.jsxs)(hA.Fragment,{children:[(0,hA.jsx)(TA,{map:a}),n.map((function(e){return(0,hA.jsx)(MA,{id:e,map:i,objectsRef:t},e)}))]})},AA=(0,i.memo)(CA),RA=lA.div(UC||(UC=BM(["\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: min(\n    ",",\n    ","px\n  );\n  left: 0px;\n  @media (min-width: ","px) {\n    right: min(",", ","vw);\n    bottom: 0px;\n  }\n"])),fA().sidepanelMaxWidth,(function(e){return e.windowHeight/100*fA().sidepanelWidthPercent}),fA().mobileWidth,fA().sidepanelMaxWidth,fA().sidepanelWidthPercent),PA=function(e){var t=e.objectsRef;console.log("--CanvasContainer");var n=Ou(),r=Fu(fc);return(0,hA.jsx)(RA,{windowHeight:r,children:(0,hA.jsx)(lT,{camera:{fov:75,near:5,far:11,position:[0,0,10]},children:(0,hA.jsxs)(n,{children:[(0,hA.jsx)("color",{attach:"background",args:["bisque"]}),(0,hA.jsx)(SA,{objectsRef:t}),(0,hA.jsx)(i.Suspense,{fallback:null,children:(0,hA.jsx)(AA,{objectsRef:t})})]})})})},LA=(0,i.memo)(PA),NA=lA.div(BC||(BC=BM(["\n  position: absolute;\n  top: max(calc(50% - 75px), 0px);\n  right: max(calc(50% - 150px), 0px);\n  bottom: max(calc(50% - 75px), 0px);\n  left: max(calc(50% - 150px), 0px);\n  background: ",";\n  display: ",";\n  justify-content: center;\n  align-items: center;\n  transition: transform 3s;\n"])),fA().colors.bgVerylight,(function(e){return e.show?"flex":"none"})),IA=lA.div(VC||(VC=BM(["\n  display: ",";\n  padding: 5px;\n  background: rgba(255, 255, 255, 0.75);\n  white-space: pre-line;\n  position: absolute;\n  left: 20px;\n  top: 20px;\n  font-family: ",";\n  font-size: 12px;\n"])),(function(e){return e.show?"":"none"}),fA().fontFamily),DA=lA.div(jC||(jC=BM(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  @media (min-width: ","px) {\n    display: none;\n  }\n"])),fA().mobileWidth),OA=lA.div(HC||(HC=BM(["\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),zA=lA.div(WC||(WC=BM(["\n  display: flex;\n  flex-direction: column;\n"]))),FA=lA.button(GC||(GC=BM(["\n  padding: 0px;\n  display: flex;\n  opacity: 85%;\n  color: ",";\n  border-color: ",";\n  align-items: center;\n  justify-content: center;\n  font-size: 22px;\n  border-radius: 50%;\n  border-width: 3px;\n  margin: 2mm 7mm 4mm 7mm;\n  width: 1cm;\n  height: 1cm;\n  background: transparent;\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  -ms-user-select: none; /* IE 10+ */\n  user-select: none; /* Likely future */\n"])),fA().colors.highlight1,fA().colors.highlight1),UA=lA.div(qC||(qC=BM(["\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: min(\n    ",",\n    ","px\n  );\n  left: 0px;\n  @media (min-width: ","px) {\n    right: min(",", ","vw);\n    bottom: 0px;\n  }\n  display: flex;\n"])),fA().sidepanelMaxWidth,(function(e){return e.windowHeight/100*fA().sidepanelWidthPercent}),fA().mobileWidth,fA().sidepanelMaxWidth,fA().sidepanelWidthPercent),BA=lA.div(XC||(XC=BM(["\n  position: absolute;\n  transform: translate(-50%, -50%);\n  transition: all 0.02s;\n  font-family: ",";\n  font-size: 11px;\n  color: white;\n"])),fA().fontFamily),VA=function(e){var t=e.objectsRef,n=Fu(vc);return(0,hA.jsx)(hA.Fragment,{children:Object.entries(t.current||[]).reduce((function(e,t){var r=c(t,2),i=r[0],a=r[1];return i!==n&&e.push((0,hA.jsx)(BA,{ref:function(e){a.infoElement=e}},i)),e}),[])})},jA=function(e){var t=e.control,n=e.objectsRef,r=Fu(vc),a=(0,i.useCallback)((function(){SM(t,r,n)}),[t,r,n]),o=(0,i.useCallback)((function(){kM(t,r,n)}),[t,r,n]),s=(0,i.useMemo)((function(){switch(t){case hM.UP:return"\u2191";case hM.DOWN:return"\u2193";case hM.LEFT:return"\u2190";case hM.RIGHT:return"\u2192";default:return null}}),[t]);return(0,hA.jsx)(FA,{onTouchStart:a,onTouchEnd:o,onMouseDown:a,onMouseUp:o,children:s})},HA=function(e){var t=e.objectsRef;console.log("--CanvasOverlay");var n=Fu(fc),r=Fu(gc),a=Fu(yc),o=Fu(dc),s=Fu(mc),u=Fu(vc);return(0,i.useEffect)((function(){}),[o]),(0,hA.jsxs)(UA,{windowHeight:n,children:[(0,hA.jsx)(VA,{objectsRef:t}),(0,hA.jsx)(NA,{show:!s&&(!r.length||!a.length),children:"Connecting..."}),(0,hA.jsx)(IA,{show:Boolean(s||r.length&&a.length),ref:function(e){var n,r=null===(n=t.current)||void 0===n?void 0:n.find((function(e){return e.id===u}));r&&(r.infoBoxElement=e)}}),(0,hA.jsx)(DA,{children:(0,hA.jsxs)(OA,{children:[(0,hA.jsx)(jA,{control:hM.LEFT,objectsRef:t}),(0,hA.jsxs)(zA,{children:[(0,hA.jsx)(jA,{control:hM.UP,objectsRef:t}),(0,hA.jsx)(jA,{control:hM.DOWN,objectsRef:t})]}),(0,hA.jsx)(jA,{control:hM.RIGHT,objectsRef:t})]})})]})},WA=(0,i.memo)(HA),GA=lA.img(YC||(YC=BM(["\n  margin-left: auto;\n  height: 30px;\n  width: 30px;\n  border-radius: ",";\n"])),fA().borderRadius),qA=lA.div(ZC||(ZC=BM(["\n  overflow-anchor: none;\n  display: flex;\n  padding: 3px 3px 3px 6px;\n"]))),XA=lA.div($C||($C=BM(["\n  margin-right: 3px;\n  font-family: ",";\n  font-size: 12px;\n"])),fA().fontFamily),YA=lA.hr(JC||(JC=BM(["\n  border-style: solid;\n  border-color: "," transparent\n    transparent;\n  margin: 0;\n"])),fA().colors.bgVerylight),ZA=lA.div(KC||(KC=BM(["\n  ::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  ::-webkit-scrollbar-track {\n    -webkit-box-shadow: inset 0 0 8px ",";\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: ",";\n    outline: 1px solid ",";\n  }\n  display: flex;\n  flex-direction: column-reverse;\n  max-height: calc(100% - 30px);\n  overflow-y: auto;\n  scrollbar-width: thin;\n  background: white;\n  box-shadow: ",";\n  border: ",";\n  border-radius: ",";\n"])),fA().colors.bgLight,fA().colors.bgMedium,fA().colors.bgLight,fA().shadow,fA().borders.basic,fA().borderRadius),$A=function(){console.log("--Chat");var e=Fu(hc),t=Fu(vc);return(0,hA.jsx)(ZA,{children:e.map((function(n,r){return(0,hA.jsxs)("div",{children:[(0,hA.jsx)(YA,{style:{display:r!==e.length-1?"":"none"}}),(0,hA.jsxs)(qA,{style:{background:n.userId===t?"DarkKhaki":"none"},children:[(0,hA.jsxs)(XA,{children:[n.username,":",n.message]}),(0,hA.jsx)(GA,{src:"avatar.jpg",alt:"Avatar"})]})]},n.messageId)}))})},JA=(0,i.memo)($A),KA=lA.button(QC||(QC=BM(["\n  width: 12%;\n  min-width: 22px;\n  ","\n"])),fA().basicButton),QA=lA.input(eA||(eA=BM(["\n  ","\n  min-width: 40px;\n  flex: 1;\n"])),fA().basicInput),eR=lA.form(tA||(tA=BM(["\n  display: flex;\n  height: 30px;\n"]))),tR=lA.div(nA||(nA=BM([""]))),nR=function(e){var t=e.objectsRef;console.log("--InputForm");var n=Bu(hc),r=DM().sendOrdered,a=IM().sendOrdered,o=Fu(mc),s=Fu(vc),u=c((0,i.useState)(""),2),l=u[0],f=u[1],h=(0,i.useCallback)((function(e){if(e.preventDefault(),o){if(s){var i={type:dM.CHATMESSAGE_MAIN,userId:s,messageId:s+Date.now().toString(),message:l};r(i),n((function(e){var n,r;return[{userId:s,username:(null===(n=t.current)||void 0===n||null===(r=n.find((function(e){return e.id===s})))||void 0===r?void 0:r.username)||"",messageId:i.messageId,message:l}].concat(Q(e))}))}}else a({type:dM.CHATMESSAGE_CLIENT,message:l});f("")}),[o,t,s,a,r,n,l]),d=(0,i.useCallback)((function(e){f(e.target.value)}),[]),p=(0,i.useCallback)((function(e){e.target.placeholder=""}),[]),v=(0,i.useCallback)((function(e){e.target.placeholder="Input"}),[]);return(0,hA.jsx)(tR,{children:(0,hA.jsxs)(eR,{onSubmit:h,noValidate:!0,autoComplete:"off",children:[(0,hA.jsx)(QA,{type:"text",value:l,onChange:d,placeholder:"Input",onFocus:p,onBlur:v}),(0,hA.jsx)(KA,{children:"\u23ce"})]})})},rR=(0,i.memo)(nR),iR=lA.div(rA||(rA=BM(["\n  background: ",";\n  box-shadow: ",";\n  border: ",";\n  border-radius: ",";\n  display: flex;\n  flex-direction: column-reverse;\n  height: 65%;\n"])),fA().colors.bgVerylight,fA().shadow,fA().borders.basic,fA().borderRadius),aR=function(e){var t=e.objectsRef;return console.log("--ChatContainer"),(0,hA.jsxs)(iR,{children:[(0,hA.jsx)(rR,{objectsRef:t}),(0,hA.jsx)(JA,{})]})},oR=(0,i.memo)(aR),sR=lA.div(iA||(iA=BM(["\n  margin: ",";\n  opacity: ",";\n  font-family: ",";\n  font-size: 16px;\n  color: ",";\n  font-weight: bold;\n  user-select: none;\n"])),fA().margins.basic,fA().opacity.basic,fA().fontFamily,fA().colors.highlight1),uR=lA.button(aA||(aA=BM(["\n  margin-bottom: ",";\n  align-self: flex-end;\n  font-family: ",";\n  font-size: 10px;\n  height: 20px;\n  width: 40px;\n  ","\n  background-color: transparent;\n  color: ",";\n  font-weight: bold;\n"])),fA().margins.large,fA().fontFamily,fA().basicButton,fA().colors.highlight1),lR=lA.div(oA||(oA=BM(["\n  margin-bottom: ",";\n  color: ",";\n  background: white;\n  padding: 2px;\n  font-family: ",";\n  font-size: 12px;\n  border-radius: ",";\n  cursor: default;\n"])),fA().margins.basic,fA().colors.bgMedium,fA().fontFamily,fA().borderRadius),cR=lA.div(sA||(sA=BM(["\n  position: absolute;\n  top: calc(\n    ","px -\n      min(\n        ",",\n        ","px\n      )\n  );\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  @media (min-width: ","px) {\n    top: 0px;\n    left: calc(\n      100vw - min(",", ","vw)\n    );\n  }\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  padding: 3px;\n  background: ",";\n"])),(function(e){return e.windowHeight}),fA().sidepanelMaxWidth,(function(e){return e.windowHeight/100*fA().sidepanelWidthPercent}),fA().mobileWidth,fA().sidepanelMaxWidth,fA().sidepanelWidthPercent,fA().colors.bgMain),fR=function(e){var t=e.quit,n=e.objectsRef;console.log("--Sidepanel");var r=Fu(fc),a=Fu(mc),o=Fu(pc),s=Fu(bc),u=Fu(cc),l=(0,i.useCallback)((function(){t()}),[t]);return(0,hA.jsxs)(cR,{windowHeight:r,children:[(0,hA.jsxs)("div",{className:"flex flex-col",children:[(0,hA.jsxs)("div",{className:"flex w-full justify-between",children:[(0,hA.jsx)(sR,{children:"AO13"}),(0,hA.jsx)(uR,{onClick:l,children:"Quit"})]}),(0,hA.jsxs)(lR,{children:[(0,hA.jsx)("div",{children:a?"You are the game host":null}),a&&(0,hA.jsx)("div",{children:"Players: ".concat(o.length)}),(0,hA.jsx)("div",{children:s})]}),(0,hA.jsxs)(lR,{children:[(0,hA.jsx)("p",{}),(0,hA.jsx)("p",{}),u,(0,hA.jsx)("p",{}),(0,hA.jsx)("p",{})]})]}),(0,hA.jsx)(oR,{objectsRef:n})]})},hR=(0,i.memo)(fR),dR=function(e){var t=e.quit,n=e.objectsRef;return console.log("--UserInterface"),(0,hA.jsxs)(hA.Fragment,{children:[(0,hA.jsx)(WA,{objectsRef:n}),(0,hA.jsx)(hR,{quit:t,objectsRef:n})]})},pR=(0,i.memo)(dR),vR=!1,mR=function(){console.log("--Game");var e=B(),t=(0,i.useRef)([]),n=TM(t),r=n.connect,a=n.disconnect;!function(e){console.log("--useControls");var t=Fu(vc),n=(0,i.useCallback)((function(n){if(!n.repeat){var r=MM(n.code);r&&t&&SM(r,t,e)}}),[e,t]),r=(0,i.useCallback)((function(n){var r=MM(n.code);r&&t&&kM(r,t,e)}),[e,t]);(0,i.useEffect)((function(){return document.addEventListener("keyup",r),document.addEventListener("keydown",n),function(){document.removeEventListener("keyup",r),document.removeEventListener("keydown",n)}}),[r,n])}(t);var o=Bu(fc),s=Fu(lc),u=(0,i.useCallback)((function(){o(window.innerHeight)}),[o]),l=(0,i.useMemo)((function(){return(0,Vu.debounce)(u,300)}),[u]);window.onresize=l;var c=(0,i.useCallback)(ne(le().mark((function t(){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e("/"),vR=!1,a();case 3:case"end":return t.stop()}}),t)}))),[e,a]);return(0,i.useEffect)((function(){return console.log("--game useEffect, initialized:",vR),!vR&&s&&(console.log("--initialize"),vR=!0,r()),function(){console.log("--game useEffect return")}}),[r,s]),(0,hA.jsxs)(hA.Fragment,{children:[(0,hA.jsx)(LA,{objectsRef:t}),(0,hA.jsx)(pR,{quit:c,objectsRef:t})]})},gR=(0,i.memo)(mR),yR=function(e){console.log("--setToken"),mM().defaults.headers.common={Authorization:"Bearer ".concat(e)}},bR=function(){var e=ne(le().mark((function e(){var t,n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--getTurnCredentials"),e.prev=1,e.next=4,mM().post("".concat(uc,"/api/v1/auth/getTurnCredentials"));case 4:return t=e.sent,e.abrupt("return",{data:t.data});case 8:return e.prev=8,e.t0=e.catch(1),r=null!==(n=e.t0.response)&&void 0!==n&&n.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{error:r});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),_R=function(){var e=ne(le().mark((function e(){var t,n,r;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--logout"),e.prev=1,e.next=4,mM().post("".concat(uc,"/api/v1/auth/logout"));case 4:return t=e.sent,e.abrupt("return",{data:t.data});case 8:return e.prev=8,e.t0=e.catch(1),r=null!==(n=e.t0.response)&&void 0!==n&&n.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{error:r});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),xR=function(){var e=ne(le().mark((function e(t){var n,r,i,a,o,s;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,r=t.userId,i=t.password,console.log("--resetPassword"),e.prev=2,e.next=5,mM().post("".concat(uc,"/api/v1/auth/resetpassword"),{token:n,userId:r,password:i});case 5:return a=e.sent,e.abrupt("return",{data:a.data,error:null});case 9:return e.prev=9,e.t0=e.catch(2),s=null!==(o=e.t0.response)&&void 0!==o&&o.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{data:null,error:s});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),wR=function(){var e=ne(le().mark((function e(t){var n,r,i,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,console.log("--requestPasswordReset"),e.prev=2,e.next=5,mM().post("".concat(uc,"/api/v1/auth/requestResetPassword"),{username:n});case 5:return r=e.sent,e.abrupt("return",{data:r.data});case 9:return e.prev=9,e.t0=e.catch(2),a=null!==(i=e.t0.response)&&void 0!==i&&i.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{error:a});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),SR=function(){var e=ne(le().mark((function e(t){var n,r,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,console.log("--login"),e.prev=2,e.next=5,mM().post("".concat(uc,"/api/v1/auth/login"),{username:n,password:r});case 5:return i=e.sent,e.abrupt("return",{data:i.data});case 9:return e.prev=9,e.t0=e.catch(2),o=null!==(a=e.t0.response)&&void 0!==a&&a.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{error:o});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),kR=function(){var e=ne(le().mark((function e(t){var n,r,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,console.log("--signup"),e.prev=2,e.next=5,mM().post("".concat(uc,"/api/v1/auth/signup"),{email:n,password:r});case 5:return i=e.sent,e.abrupt("return",{data:i.data});case 9:return e.prev=9,e.t0=e.catch(2),o=null!==(a=e.t0.response)&&void 0!==a&&a.data?e.t0.response.data.error:e.t0.toString(),e.abrupt("return",{error:o});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),MR=function(e){return"pl-2 h-8 outline-none border focus:border-zinc-400 ".concat(e&&"border-red-400")},ER="flex flex-col text-sm gap-6 items-center w-full",TR="flex flex-col gap-2 w-full max-w-[5cm] items-center",CR="text-red-500",AR="h-8 border text-zinc-50 bg-rose-900 active:brightness-90 min-w-[2.2cm]",RR="h-8 border text-zinc-50 bg-orange-500 active:brightness-90 min-w-[2.2cm]";!function(e){e[e.OPEN=0]="OPEN",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS"}(uA||(uA={}));var PR=function(){console.log("--useValidation");var e=(0,i.useMemo)((function(){return{dirty:!1,state:uA.OPEN,login:void 0,create:void 0,request:void 0,update:void 0,email:void 0,username:void 0,password:void 0,repeatPassword:void 0}}),[]),t=c((0,i.useState)(e),2),n=t[0],r=t[1],a=(0,i.useCallback)((function(){n.dirty&&r(e)}),[n.dirty,r,e]);return[n,r,a]},LR=function(){console.log("--Login");var e=Bu(_c),t=B(),n=c(PR(),3),r=n[0],a=n[1],o=n[2],s=c((0,i.useState)(""),2),u=s[0],l=s[1],f=c((0,i.useState)(""),2),h=f[0],d=f[1],p=c((0,i.useState)(!1),2),v=p[0],m=p[1],g=function(){var t=ne(le().mark((function t(n){var r,i,o,s;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(r={dirty:!0,state:uA.OPEN,login:void 0,username:u.length?void 0:"Required",password:h.length?void 0:"Required"}).username||r.password){t.next=13;break}return r.state=uA.LOADING,a(r),t.next=7,SR({username:u,password:h});case 7:i=t.sent,o=i.data,s=i.error,r.login=s,r.state=uA.OPEN,s||(e(o),yR(o.token),l(""),v&&localStorage.setItem("user",JSON.stringify(o)));case 13:d(""),a(de({},r));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=(0,i.useCallback)((function(e){o(),l(e.target.value)}),[o]),b=(0,i.useCallback)((function(e){o(),d(e.target.value)}),[o]),_=(0,i.useCallback)((function(e){m(e.target.checked)}),[]),x=(0,i.useCallback)((function(){t("/signup")}),[t]);return(0,hA.jsxs)("div",{className:ER,children:[r.login&&(0,hA.jsx)("div",{className:CR,children:r.login}),(0,hA.jsxs)("form",{onSubmit:g,className:TR,children:[r.username&&(0,hA.jsx)("div",{className:CR,children:r.username}),(0,hA.jsx)("input",{className:MR(r.username),autoCapitalize:"none",onChange:y,value:u,placeholder:"username or email"}),r.password&&(0,hA.jsx)("div",{className:CR,children:r.password}),(0,hA.jsx)("input",{className:MR(r.password),type:"password",onChange:b,value:h,placeholder:"password"}),(0,hA.jsx)("button",{className:AR,disabled:r.state===uA.LOADING,type:"submit",children:"Sign in"}),(0,hA.jsxs)("label",{className:"flex gap-1 cursor-pointer select-none",children:[(0,hA.jsx)("input",{type:"checkbox",checked:v,onChange:_}),"Remember me"]})]}),(0,hA.jsx)(J,{to:"/forgottenpassword",children:"Forgotten password?"}),(0,hA.jsx)("button",{className:RR,type:"button",onClick:x,children:"Sign up"})]})},NR=(0,i.memo)(LR),IR=function(){console.log("--ForgottenPassword");var e=B(),t=c(PR(),3),n=t[0],r=t[1],a=t[2],o=c((0,i.useState)(""),2),s=o[0],u=o[1],l=(0,i.useMemo)((function(){switch(n.state){case uA.LOADING:return"Please wait...";case uA.SUCCESS:return"Email sent (check spam)";default:return"Enter your username or email"}}),[n.state]),f=function(){var e=ne(le().mark((function e(t){var n,i,a;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n={dirty:!0,state:uA.OPEN,request:void 0,username:s.length?void 0:"required"}).username){e.next=12;break}return n.state=uA.LOADING,r(n),e.next=7,wR({username:s});case 7:i=e.sent,a=i.error,n.request=a,n.state=a?uA.OPEN:uA.SUCCESS,u("");case 12:r(de({},n));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=(0,i.useCallback)((function(e){a(),u(e.target.value)}),[a]),d=(0,i.useCallback)((function(){e("/login")}),[e]);return(0,hA.jsxs)("div",{className:ER,children:[l,n.request&&(0,hA.jsx)("div",{className:CR,children:n.request}),n.state!==uA.SUCCESS&&(0,hA.jsxs)("form",{onSubmit:f,className:TR,children:[n.username&&(0,hA.jsx)("div",{className:CR,children:n.username}),(0,hA.jsx)("input",{className:MR(n.username),autoCapitalize:"none",onChange:h,value:s,placeholder:"username or email"}),(0,hA.jsxs)("div",{className:"flex justify-between gap-2 w-full",children:[(0,hA.jsx)("button",{className:"h-8 border border-rose-900 text-rose-900 bg-transparent grow",onClick:d,type:"button",children:"Cancel"}),(0,hA.jsx)("button",{disabled:n.state===uA.LOADING,type:"submit",className:"h-8 border text-gray-50 bg-rose-900 grow",children:"Submit"})]})]})]})},DR=(0,i.memo)(IR),OR=function(){console.log("--SignUp");var e=B(),t=c(Uu(_c),2),n=t[0],r=t[1],a=c(PR(),3),o=a[0],s=a[1],u=a[2],l=c((0,i.useState)(""),2),f=l[0],h=l[1],d=c((0,i.useState)(""),2),p=d[0],v=d[1],m=c((0,i.useState)(""),2),g=m[0],y=m[1];(0,i.useEffect)((function(){n&&e("/")}),[e,n]);var b=function(){var e=ne(le().mark((function e(t){var n,i,a,o;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n={dirty:!0,state:uA.OPEN,create:void 0,email:f.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)?void 0:"Invalid email address",password:""!==p?void 0:"Invalid password",repeatPassword:p===g?void 0:"Password mismatch"}).email||n.password||n.repeatPassword){e.next=13;break}return n.state=uA.LOADING,s(n),e.next=7,kR({email:f,password:p});case 7:i=e.sent,a=i.data,o=i.error,n.create=o,n.state=uA.OPEN,o||r(a);case 13:v(""),y(""),s(de({},n));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,i.useCallback)((function(e){u(),h(e.target.value)}),[u]),x=(0,i.useCallback)((function(e){u(),v(e.target.value)}),[u]),w=(0,i.useCallback)((function(e){u(),y(e.target.value)}),[u]);return(0,hA.jsxs)("div",{className:ER,children:[o.state!==uA.LOADING?"Create account":"Creating...",(0,hA.jsxs)("form",{onSubmit:b,className:TR,children:[o.create&&(0,hA.jsx)("div",{className:CR,children:o.create}),o.email&&(0,hA.jsx)("div",{className:CR,children:o.email}),(0,hA.jsx)("input",{className:MR(o.email),onChange:_,value:f,placeholder:"email"}),o.password&&(0,hA.jsx)("div",{className:CR,children:o.password}),(0,hA.jsx)("input",{className:MR(o.password),onChange:x,type:"password",value:p,placeholder:"password"}),o.repeatPassword&&(0,hA.jsx)("div",{className:CR,children:o.repeatPassword}),(0,hA.jsx)("input",{className:MR(o.repeatPassword),onChange:w,type:"password",value:g,placeholder:"repeat password"}),(0,hA.jsx)("button",{disabled:o.state===uA.LOADING,type:"submit",className:RR,children:"Create"})]})]})},zR=(0,i.memo)(OR),FR=function(){console.log("--ResetPassword");var e=new URLSearchParams(U().search),t=c(PR(),3),n=t[0],r=t[1],a=t[2],o=c((0,i.useState)(""),2),s=o[0],u=o[1],l=c((0,i.useState)(""),2),f=l[0],h=l[1],d=(0,i.useMemo)((function(){switch(n.state){case uA.LOADING:return"Please wait...";case uA.SUCCESS:return"Password changed. You can now log in using your new password.";default:return"Enter new password"}}),[n.state]),p=function(){var t=ne(le().mark((function t(n){var i,a,o,l,c,d;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(i={dirty:!0,state:uA.OPEN,request:void 0,password:""!==s?void 0:"invalid password",repeatPassword:s===f?void 0:"password mismatch"}).password||i.repeatPassword){t.next=18;break}if(i.state=uA.LOADING,r(i),a=e.get("token"),o=e.get("id"),!a||!o){t.next=15;break}return t.next=10,xR({password:s,token:a,userId:o});case 10:c=t.sent,d=c.error,l=d,t.next=16;break;case 15:l="Missing token or userId";case 16:i.request=l,i.state=l?uA.OPEN:uA.SUCCESS;case 18:u(""),h(""),r(de({},i));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=(0,i.useCallback)((function(e){a(),u(e.target.value)}),[a]),m=(0,i.useCallback)((function(e){a(),h(e.target.value)}),[a]);return(0,hA.jsxs)("div",{className:ER,children:[d,n.request&&(0,hA.jsx)("div",{className:CR,children:n.request}),n.state!==uA.SUCCESS&&(0,hA.jsxs)("form",{onSubmit:p,className:TR,children:[n.password&&(0,hA.jsx)("div",{className:CR,children:n.password}),(0,hA.jsx)("input",{className:MR(n.password),type:"password",onChange:v,value:s,placeholder:"password"}),n.repeatPassword&&(0,hA.jsx)("div",{className:CR,children:n.repeatPassword}),(0,hA.jsx)("input",{className:MR(n.repeatPassword),type:"password",onChange:m,value:f,placeholder:"repeat password"}),(0,hA.jsx)("button",{disabled:n.state===uA.LOADING,type:"submit",className:AR,children:"Submit"})]})]})},UR=(0,i.memo)(FR),BR=function(){console.log("--Settings");var e=Bu(_c),t=c(PR(),3),n=t[0],r=t[1],a=t[2],o=c((0,i.useState)(""),2),s=o[0],u=o[1],l=(0,i.useMemo)((function(){switch(n.state){case uA.LOADING:return"Updating...";case uA.SUCCESS:return"Username updated";default:return"Update username"}}),[n.state]),f=function(){var t=ne(le().mark((function t(n){var i,a,o,l;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),(i={dirty:!0,state:uA.OPEN,update:void 0,username:s.length?s.length>20?"max 20 characters":void 0:"can not be empty"}).username){t.next=13;break}return i.state=uA.LOADING,r(i),t.next=7,FM(s);case 7:a=t.sent,o=a.data,l=a.error,i.update=l,i.state=l?uA.OPEN:uA.SUCCESS,l||(e(o),u(""));case 13:r(de({},i));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=(0,i.useCallback)((function(e){a(),u(e.target.value)}),[a]);return(0,hA.jsxs)("div",{className:ER,children:[l,n.state===uA.SUCCESS&&(0,hA.jsx)(J,{to:"/",children:"\u2794"}),n.state!==uA.SUCCESS&&(0,hA.jsxs)("form",{className:TR,onSubmit:f,children:[n.update&&(0,hA.jsx)("div",{className:CR,children:n.update}),n.username&&(0,hA.jsx)("div",{className:CR,children:n.username}),(0,hA.jsx)("input",{className:MR(n.username),autoCapitalize:"none",onChange:h,value:s,placeholder:"new username"}),(0,hA.jsx)("button",{type:"submit",className:AR,children:"Submit"})]})]})},VR=(0,i.memo)(BR),jR=function(){var e=U();console.log("--LoggedIn");var t=B(),n=Fu(_c),r=Bu(lc),a=function(){console.log("--useUser");var e=c(Uu(_c),2),t=e[0],n=e[1],r=(0,i.useCallback)(ne(le().mark((function e(){var r,i;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,zM();case 3:r=e.sent,i=r.data,n(i);case 6:case"end":return e.stop()}}),e)}))),[t,n]);return{refreshUser:r}}(),o=a.refreshUser,s=c((0,i.useState)(),2),u=s[0],l=s[1],f=c((0,i.useState)(!1),2),h=f[0],d=f[1];(0,i.useEffect)((function(){l(void 0)}),[n,e]);var p=(0,i.useCallback)(ne(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,o();case 3:setTimeout((function(){return d(!1)}),250);case 4:case"end":return e.stop()}}),e)}))),[o]),v=(0,i.useCallback)(ne(le().mark((function e(){var n,i,a,o,s,c;return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=17;break}return e.next=3,OM();case 3:if(n=e.sent,i=n.data,a=n.error,!i||!i.success){e.next=15;break}return e.next=9,bR();case 9:o=e.sent,s=o.data,c=o.error,s?(r(s),t("/play")):(l(c),setTimeout((function(){return l(void 0)}),5e3)),e.next=17;break;case 15:l(a||i.reason),setTimeout((function(){return l(void 0)}),5e3);case 17:case"end":return e.stop()}}),e)}))),[u,l,t,r]);return(0,hA.jsxs)(G,{children:[(0,hA.jsx)(H,{path:"/settings",element:(0,hA.jsx)(VR,{})}),(0,hA.jsx)(H,{path:"*",element:(0,hA.jsxs)(hA.Fragment,{children:[(0,hA.jsxs)("div",{className:"flex gap-4",children:[n&&"Score: ".concat(n.score),(0,hA.jsx)("button",{className:"disabled:animate-[spin_600ms_linear_infinite]",disabled:h,onClick:p,type:"button",children:"\u21bb"})]}),u&&(0,hA.jsx)("div",{className:CR,children:u}),(0,hA.jsx)("button",{className:AR,onClick:v,type:"button",children:"Play"})]})})]})},HR=(0,i.memo)(jR),WR=function(){console.log("--AppBar");var e=c(Uu(_c),2),t=e[0],n=e[1],r=(0,i.useCallback)(ne(le().mark((function e(){return le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_R(),localStorage.removeItem("user"),n(void 0),yR("");case 4:case"end":return e.stop()}}),e)}))),[n]);return(0,hA.jsxs)(hA.Fragment,{children:[(0,hA.jsx)("div",{className:"absolute left-0 right-0 top-0 h-12 bg-rose-50 opacity-10"}),(0,hA.jsxs)("div",{className:"absolute left-0 right-0 top-0 h-12 justify-between flex items-center border border-b-zinc-200 text-zinc-700",children:[(0,hA.jsx)("div",{className:"w-1/3 pl-3",children:(0,hA.jsx)(J,{className:"active:text-black",to:"/",children:"AO13"})}),(0,hA.jsx)("div",{className:"w-1/3 flex justify-center",children:(null===t||void 0===t?void 0:t.username)&&"Hi, ".concat(t.username)}),(0,hA.jsxs)("div",{className:"w-1/3 flex justify-end pr-3 gap-4",children:[t&&!t.username.includes("guest_")&&(0,hA.jsx)(J,{className:"text-2xl active:text-black",to:"/settings",children:"\u2699"}),(0,hA.jsx)("div",{className:"flex flex-col justify-center",children:(0,hA.jsx)("button",{className:"border active:text-black border-zinc-700 active:border-black pl-2 pr-2 rounded",onClick:r,type:"button",children:"logout"})})]})]})]})},GR=(0,i.memo)(WR),qR=function(){console.log("--Frontpage");var e=Fu(_c),t=U();return(0,hA.jsxs)(hA.Fragment,{children:[Boolean(e)&&(0,hA.jsx)(GR,{}),(0,hA.jsxs)("div",{className:"flex flex-col items-center absolute inset-0 bg-rose-50 text-zinc-800 gap-4 ".concat(e?"pt-12 top-12":"pt-24"),children:[e||"/"!==t.pathname?(0,hA.jsx)(J,{className:"active:text-black",to:"/",children:"AO13"}):(0,hA.jsx)("a",{className:"active:text-black",href:"/",children:"AO13"}),(0,hA.jsxs)(G,{children:[(0,hA.jsx)(H,{path:"/resetpassword",element:(0,hA.jsx)(UR,{})}),(0,hA.jsx)(H,{path:"/forgottenpassword",element:(0,hA.jsx)(DR,{})}),(0,hA.jsx)(H,{path:"/signup",element:(0,hA.jsx)(zR,{})}),(0,hA.jsx)(H,{path:"*",element:e?(0,hA.jsx)(HR,{}):(0,hA.jsx)(NR,{})})]})]})]})},XR=(0,i.memo)(qR),YR=function(){console.log("--App");var e=function(){console.log("--useAuth");var e=Bu(_c);return{loadSavedUser:(0,i.useCallback)((function(){var t=JSON.parse(localStorage.getItem("user")||"null");e(t),yR(null===t||void 0===t?void 0:t.token)}),[e])}}().loadSavedUser;return(0,i.useEffect)((function(){e()}),[e]),(0,hA.jsxs)(G,{children:[(0,hA.jsx)(H,{path:"/play",element:(0,hA.jsx)(gR,{})}),(0,hA.jsx)(H,{path:"*",element:(0,hA.jsx)(XR,{})})]})};a.createRoot(document.getElementById("root")).render((0,hA.jsx)(i.StrictMode,{children:(0,hA.jsx)(Du,{children:(0,hA.jsx)($,{children:(0,hA.jsx)(YR,{})})})}))}()}();
//# sourceMappingURL=main.d4663ac9.js.map